var Zt=Object.defineProperty;var qt=(r,e,t)=>e in r?Zt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ge=(r,e,t)=>(qt(r,typeof e!="symbol"?e+"":e,t),t);import{w as $e,S as z,i as U,s as V,f as O,b as c,c as k,X as ue,F as Z,n as v,d as b,G as fe,a1 as we,z as x,A as De,t as S,B as Ae,C as He,D as Re,r as m,o as _,N as Mt,a as P,E as H,k as $,Q as Ze,K as L,L as I,m as Y,M,p as G,j as B,aj as jt,ak as Kt,al as Wt,am as Bt,an as Ft,ao as Yt,ap as Gt,aq as Jt,ar as Qt,as as Xt,at as xt,ab as en,au as tn,av as nn,aw as ln,ax as rn,ay as sn,az as on,aA as un,e as an,q as fn,aB as cn,aC as dn,aD as pn,aE as hn,aF as mn,aG as gn,aH as _n,aI as $n,aJ as kn,h as Pe,u as X,x as se,y as rt,H as ze,l as ve,I as pe,U as bn,V as wn,W as Pt,R as Et,T as Ot,a0 as ee,aK as st,aL as vn,g as Ye,aM as Tt,J as le,Z as Dt,_ as At,a2 as We,a3 as Be,a4 as Oe,ah as Cn}from"./index-3b0806a3.js";function Ue(r){let e=r.month,t=r.day,n=r.year,l=e!=null&&e.length!=0&&!isNaN(parseInt(e))&&parseInt(e)>=1&&parseInt(e)<=12&&e.length<=2&&e.length>=1,s=t!=null&&t.length!=0&&!isNaN(parseInt(t))&&parseInt(t)>=1&&parseInt(t)<=31&&t.length<=2&&t.length>=1,o=n!=null&&n.length!=0&&!isNaN(parseInt(n))&&n.length>2;return{month:l,day:s,year:o}}function Ve(r){return r!=null&&r.length!=0}function yn(r){return r.length>0&&r[0].name.length>0}let ne={bigAuthors:{key:"authors",format:function(r){let e=null;if(r.authors.length>0&&r.authors.filter(t=>t.name.length>0).length>0){const t=r.authors[0];t.isPerson?e=t.name.split(" ").pop()??null:e=`${t.name}`}return e}},bigDate:{key:"date",format:function(r){let e=null,t=Ue(r.date);if(!(t.month&&t.day&&t.year))return e;const n=new Date(parseInt(r.date.year),parseInt(r.date.month)-1,parseInt(r.date.day)),l=new Date;if(l.getFullYear()==n.getFullYear())e=`${n.getMonth()+1}/${n.getDate()}`;else{let s=`${n.getFullYear()}`;l.getFullYear()-n.getFullYear()>100?e=s:e=`'${s.slice(s.length-2)}`}return e}},date:{key:"date",format:function(r){let e=null,t=Ue(r.date);if(!(t.month&&t.day&&t.year))return e;const n=new Date(parseInt(r.date.year),parseInt(r.date.month)-1,parseInt(r.date.day));return e=`${n.getMonth()+1}/${n.getDate()}/${n.getFullYear()}`,e}},accessDate:{key:"accessDate",format:function(r){let e=null,t=Ue(r.accessDate);if(!(t.month&&t.day&&t.year))return e;const n=new Date(parseInt(r.accessDate.year),parseInt(r.accessDate.month)-1,parseInt(r.accessDate.day));return n instanceof Date&&!isNaN(n.valueOf())&&(e=`Accessed on ${n.getMonth()+1}/${n.getDate()}/${n.getFullYear()}`),e}},authors:{key:"authors",format:function(r){let e=null;return r.authors.length>0&&r.authors.filter(t=>t.name.length>0).length>0&&(e=r.authors.map(t=>t.name).join(", ")),e}},title:{key:"title",format:function(r){let e=null;return Ve(r.title)&&(e=r.title),e}},siteName:{key:"siteName",format:function(r){let e=null;return Ve(r.siteName)&&(e=r.siteName),e}},url:{key:"url",format:function(r){let e=null;return Ve(r.url)&&(e=r.url),e}}};function Ht(r,e,t=!0,n=!0){let l=document.createElement("div");if(t){let s=document.createElement("h3");s.textContent=r.tag,n&&(s.style.fontFamily="Calibri"),s.style.fontSize="13pt",s.style.margin="0px",l.appendChild(s);let o=document.createElement("p");n&&(o.style.fontFamily="Calibri"),o.style.margin="0px";let i=document.createElement("span");i.textContent=`${ne.bigAuthors.format(r)}, ${ne.bigDate.format(r)} `,i.style.fontSize="13pt",i.style.fontWeight="bold",o.appendChild(i);let u=document.createElement("span");u.textContent=`[${ne.authors.format(r)}. ${ne.date.format(r)}. "${ne.title.format(r)}". ${ne.siteName.format(r)}. ${ne.url.format(r)}. ${ne.accessDate.format(r)}]`,u.style.fontSize="11pt",o.appendChild(u),l.appendChild(o)}for(let s of r.paras){let o=document.createElement("p");n&&(o.style.fontFamily="Calibri"),o.style.fontSize="11pt",o.style.margin="0.8em 0",o.style.lineHeight="1.15em";for(let i of s){let u=document.createElement("span");u.innerText=i.text,i.underline&&(u.style.textDecoration="underline"),!i.underline&&e&&(u.style.fontSize="8pt"),i.highlight&&(u.style.backgroundColor="yellow"),o.appendChild(u)}l.appendChild(o)}return l}function Ln(r,e=!1){let t=Ht(r,e);In(t)}function In(r){let e=new Blob([r.innerHTML],{type:"text/html"});for(let l of r.children)l.appendChild(document.createTextNode(`
`));let t=new Blob([r.textContent??""],{type:"text/plain"});const n=new window.ClipboardItem({"text/html":e,"text/plain":t});navigator.clipboard.write([n])}let Te=$e({open:!1,claimed:!1}),Ie=$e([]);class Mn{constructor(){ge(this,"messages");ge(this,"timeouts");this.messages=$e([]),this.timeouts=[]}addMessage(e){this._addMessage(e,!1)}addErrorMessage(e){this._addMessage(e,!0)}addError(e,t){let n;if(t==null)n=`Unknown ${e} error`;else{let l=e.charAt(0).toUpperCase()+e.slice(1),s=t.toString();s.length>100&&(console.log(s),s=s.slice(0,100)+"..."),n=`${l} error: ${t}`}this._addMessage(n,!0)}_addMessage(e,t){this.messages.update(n=>(n.push({text:e,id:Date.now(),error:t}),n.length>3&&(n.shift(),clearTimeout(this.timeouts.shift())),this.timeouts.push(setTimeout(()=>{this.messages.update(l=>(l.shift(),l)),this.timeouts.shift()},5e3)),n))}}let W=new Mn,Pn=W.messages;function En(r){return JSON.parse(JSON.stringify(r))}let ot={text:" text edit",addAuthor:" author addition",deleteAuthor:" author deletion",editAuthor:" author edit",editDate:" date edit",editPara:" paragraph edit",condenseParas:" paragraph condensation",autoCutParas:" auto-cut"};class On{constructor(e){ge(this,"history");ge(this,"card");ge(this,"$card");ge(this,"authorIdCounter");ge(this,"pos");this.history=[],this.card=e,this.$card,this.pos=0,this.card.subscribe(t=>{var n,l;this.$card=t,this.authorIdCounter==null&&(this.authorIdCounter=((l=(n=this.$card)==null?void 0:n.authors)==null?void 0:l.length)-1)}),this.authorIdCounter=null}doAction(e,t){let n;switch(e){case"text":n={key:t.key,oldText:this.$card[t.key]},this.$card[t.key]=t.text;break;case"addAuthor":n={},this.authorIdCounter+=1,this.$card.authors.push({name:"",isPerson:!0,description:null,id:this.authorIdCounter});break;case"deleteAuthor":n={deletedAuthor:{...this.$card.authors[t.index]}},this.$card.authors.splice(t.index,1);break;case"editAuthor":n={index:t.index,oldAuthor:{...this.$card.authors[t.index]}},this.$card.authors[t.index]=t.author;break;case"editDate":n={key:t.key,oldDate:{...this.$card[t.key]}},this.$card[t.key]=t.date;break;case"editPara":n=this.editParas(t);break;case"condenseParas":n=this.condenseParas();break;case"autoCutParas":n={oldParas:En(this.$card.paras)},this.$card.paras=t}return n}action(e,t){let n=this.doAction(e,t);if(this.card.set(this.$card),this.history.push({name:e,undoData:n,redoData:t,canExtend:!0}),this.history.length>=2){let l=this.history[this.history.length-2];if(l.canExtend&&l.name==e)switch(e){case"text":this.history.pop();break;case"editAuthor":this.history.pop();break;case"editDate":this.history.pop();default:l.canExtend=!1}}this.pos!=0&&(this.history.splice(this.history.length-this.pos),this.pos=0)}preventExtension(){this.history.length>0&&(this.history[this.history.length-1].canExtend=!1)}undo(){if(this.history.length==0)return;if(this.pos+=1,this.pos>this.history.length){this.pos=this.history.length;return}let e=this.history[this.history.length-this.pos],t=e.undoData;switch(e.name){case"text":this.$card[t.key]=t.oldText;break;case"addAuthor":this.$card.authors.pop();break;case"deleteAuthor":this.$card.authors.splice(t.index,0,t.deletedAuthor);break;case"editAuthor":this.$card.authors[t.index]={...t.oldAuthor};break;case"editDate":this.$card[t.key]=t.oldDate;break;case"editPara":this.uneditParas(t);break;case"condenseParas":this.uncondenseParas(t);break;case"autoCutParas":this.$card.paras=t.oldParas;break}W.addMessage("Undid "+ot[e.name]),this.card.set(this.$card)}redo(){if(this.history.length==0)return;let e=this.history[this.history.length-this.pos];if(this.pos-=1,this.pos<0){this.pos=0;return}let t=e.redoData;this.doAction(e.name,t),W.addMessage("Redid "+ot[e.name]),this.card.set(this.$card)}getChangeRunIndexes(e,t){const n=t.startP,l=t.endP,s=t.startSpan;let o=t.endSpan;const i=t.startOffset,u=t.endOffset;let a=[];if(n==l&&s==o){let f=e[n][s],p={...f},d={...f},h={...f};p.text=f.text.slice(0,i),d.text=f.text.slice(i,u),h.text=f.text.slice(u),a.push([n,s+1]),e[n]=[...e[n].slice(0,s),p,d,h,...e[n].slice(s+1)]}else{let f=e[n][s],p={...f},d={...f};p.text=f.text.slice(0,i),d.text=f.text.slice(i),a.push([n,s+1]),e[n]=[...e[n].slice(0,s),p,d,...e[n].slice(s+1)],n==l&&(o+=1);for(let h=n;h<l+1;h++)for(let g=0;g<e[h].length;g++)h==n&&g<s+2||h==l&&g>o-1||a.push([h,g]);f=e[l][o],p={...f},d={...f},p.text=f.text.slice(0,u),d.text=f.text.slice(u),a.push([l,o]),e[l]=[...e[l].slice(0,o),p,d,...e[l].slice(o+1)],o+=1}return a}editParas(e){let t=e.tool,n=[...this.$card.paras],l=this.getChangeRunIndexes(n,e.index),s=!0;for(let[i,u]of l)n[i][u][t]||(s=!1);let o=[];for(let[i,u]of l){let a=0;for(let f=0;f<u;f++)a+=n[i][f].text.length;o.push({format:{highlight:n[i][u].highlight,underline:n[i][u].underline},paraIndex:i,startOffset:a,endOffset:a+n[i][u].text.length}),t=="eraser"?(n[i][u].underline=!1,n[i][u].highlight=!1):s?n[i][u][t]=!1:n[i][u][t]=!0}return this.$card.paras=n,this.combineRuns(),{changedRuns:o}}uneditParas(e){let t=[...this.$card.paras];for(let n of e.changedRuns){let l=n.paraIndex,s=t[l],o=0,i=n.startOffset;for(;i>s[o].text.length;)i-=s[o].text.length,o+=1;let u=0,a=n.endOffset;for(;a>s[u].text.length;)a-=s[u].text.length,u+=1;let f={startP:l,endP:l,startSpan:o,endSpan:u,startOffset:i,endOffset:a},p=this.getChangeRunIndexes(t,f);for(let[d,h]of p)t[d][h].underline=n.format.underline,t[d][h].highlight=n.format.highlight}this.$card.paras=t,this.combineRuns()}combineRuns(){this.$card.paras=this.$card.paras.map(function(e){let t=[];if(e.length==0)return[];let n={...e[0]};for(let l=1;l<e.length;l++){let s=e[l];s.text.length!=0&&(s.highlight==n.highlight&&s.underline==n.underline?n.text=n.text.concat(s.text):(t.push({...n}),n={...s}))}return t.push({...n}),t})}condenseParas(){let e=[],t=0,n=[];for(let l of this.$card.paras)if(l.length>0){l[l.length-1].text+=" ";let s=l.reduce(function(o,i){return o+i.text.length},0);t+=s,n.push(t),e=[...e,...l]}return this.$card.paras=[e],this.combineRuns(),{chopPoints:n}}uncondenseParas(e){if(this.$card.paras.length>1)return;let t=[],n=0,l=e.chopPoints,s=0;for(let u of this.$card.paras[0])for(n+=u.text.length,t.push(u);l[s]<n;){let a=l[s],f=t[t.length-1],p={...f},d={...f};p.text=p.text.slice(0,a-n),d.text=d.text.slice(a-n),t[t.length-1]={...p},t.push({...d}),s+=1}let o=[],i=[];n=0,l=e.chopPoints,s=0;for(let u of t)n+=u.text.length,i.push(u),l[s]==n&&(i[i.length-1].text=i[i.length-1].text.slice(0,i[i.length-1].text.length-1),o.push(i),s+=1,i=[]);this.$card.paras=o}}function Tn(r){let e,t,n;return{c(){e=O("textarea"),c(e,"style",`${r[4]}px; width: ${r[5]}px;`),c(e,"placeholder",r[1]),c(e,"class","svelte-109byin")},m(l,s){k(l,e,s),ue(e,r[0]),r[8](e),t||(n=[Z(e,"input",r[7]),Z(e,"input",r[2])],t=!0)},p(l,[s]){s&2&&c(e,"placeholder",l[1]),s&1&&ue(e,l[0])},i:v,o:v,d(l){l&&b(e),r[8](null),t=!1,fe(n)}}}function Dn(r,e,t){let{text:n}=e,{placeholder:l=""}=e,{autofocus:s=!1}=e,o,i,u;function a(){o&&(t(3,o.value=o.value.replace(/\r?\n|\r/g,""),o),t(3,o.style.height="0px",o),t(3,o.style.height=o.scrollHeight+"px",o))}we(function(){a(),s&&o.focus()});function f(){n=this.value,t(0,n)}function p(d){x[d?"unshift":"push"](()=>{o=d,t(3,o)})}return r.$$set=d=>{"text"in d&&t(0,n=d.text),"placeholder"in d&&t(1,l=d.placeholder),"autofocus"in d&&t(6,s=d.autofocus)},[n,l,a,o,i,u,s,f,p]}let An=class extends z{constructor(e){super(),U(this,e,Dn,Tn,V,{text:0,placeholder:1,autofocus:6,autoHeight:2})}get autoHeight(){return this.$$.ctx[2]}},Ee=$e({loggedIn:!1}),Rt=!1;chrome.storage.local.get(["loggedIn"],r=>{Ee.set({loggedIn:r.loggedIn}),Rt=!0});Ee.subscribe(r=>{Rt&&chrome.storage.local.set({loggedIn:r.loggedIn})});const Hn="https://vault.arguflow.ai/",Rn=Hn+"user/",Se="https://api.arguflow.ai/api/",Ge=Se+"auth",Sn=Se+"card/cut",Nn=Se+"card",zn=Se+"user/collections/",Un=Se+"card_collection/";function Ce(r,e,t,n=200,l=!0,s={}){return new Promise((o,i)=>{let u={method:e,headers:{"Content-Type":"application/json"}};e!=="GET"&&(u.body=JSON.stringify(t)),fetch(r,u).then(a=>{var f,p;a.ok&&a.status===n?l?a.json().then(d=>{var h;(h=s.onSuccess)==null||h.call(s,d),o(d)}).catch(d=>{var h;(h=s.onError)==null||h.call(s,d),i(d)}):((f=s.onSuccess)==null||f.call(s,a),o(a)):(a.status===401&&Ee.set({loggedIn:!1}),(p=s.onError)==null||p.call(s,a),i("Unauthorized"))}).catch(a=>{var f;(f=s.onError)==null||f.call(s,a),i(a)})})}function Vn(r,e,t=!0){return Ce(Ge,"POST",{email:r,password:e},204,!1,{onSuccess:()=>{Ee.set({loggedIn:!0}),t&&chrome.storage.local.set({arguflowLogin:{email:r,password:e}})}})}function Zn(){return Ce(Ge,"DELETE",{},204,!1,{onSuccess:()=>{Ee.set({loggedIn:!1})}})}function qn(r){return Ce(Sn,"POST",{uncut_card:r},200,!0)}function St(){return Ce(Ge,"GET",{},200,!0)}function jn(){return new Promise((r,e)=>{St().then(t=>{r(t.id)}).catch(t=>{e(t)})})}function Kn(r){r=Wn(r);let e=document.createElement("div");e.innerHTML=r;let t=[];for(let n of e.querySelectorAll("p")){let l=[];l.push(...Nt(n)),t.push(l)}return t}function Wn(r){return r=r.replace(/\n/g," "),r}function Nt(r,e={underline:!1,highlight:!1}){let t=[];if(r instanceof Text)t.push({text:r.textContent,...e});else if(r instanceof HTMLElement){(r.style.textDecoration==="underline"||r.tagName==="U")&&(e.underline=!0),(r.style.fontWeight==="bold"||r.tagName==="B")&&(e.highlight=!0);for(let n of r.childNodes)t.push(...Nt(n,{...e}))}return t}function Bn(r,e,t){return Ce(Nn,"POST",{link:e,card_html:r,private:t},200,!0)}async function it(r){try{const e=await St();return await Ce(zn+e.id+"/"+r.toString(),"GET",{},200,!0)}catch(e){return await Promise.reject(e)}}function Fn(r,e){return Ce(Un+e,"POST",{card_metadata_id:r},204,!1)}function Yn(r){let e,t,n,l;const s=r[3].default,o=De(s,r,r[2],null);return{c(){e=O("button"),o&&o.c(),e.disabled=r[1],c(e,"class","svelte-15ycvct"),S(e,"expand",r[0])},m(i,u){k(i,e,u),o&&o.m(e,null),t=!0,n||(l=Z(e,"click",r[4]),n=!0)},p(i,[u]){o&&o.p&&(!t||u&4)&&Ae(o,s,i,i[2],t?Re(s,i[2],u,null):He(i[2]),null),(!t||u&2)&&(e.disabled=i[1]),(!t||u&1)&&S(e,"expand",i[0])},i(i){t||(m(o,i),t=!0)},o(i){_(o,i),t=!1},d(i){i&&b(e),o&&o.d(i),n=!1,l()}}}function Gn(r,e,t){let{$$slots:n={},$$scope:l}=e,{expand:s=!1}=e,{disabled:o=!1}=e;function i(u){Mt.call(this,r,u)}return r.$$set=u=>{"expand"in u&&t(0,s=u.expand),"disabled"in u&&t(1,o=u.disabled),"$$scope"in u&&t(2,l=u.$$scope)},[s,o,l,n,i]}class be extends z{constructor(e){super(),U(this,e,Gn,Yn,V,{expand:0,disabled:1})}}function Jn(r){let e,t,n;return{c(){e=P("path"),t=H(),n=P("path"),c(e,"d","M39 57V147C39 163.569 52.4315 177 69 177H127"),c(e,"stroke-width","20"),c(e,"stroke-linecap","round"),c(e,"class","below svelte-vhy15y"),c(n,"d","M88 144H146C154.284 144 161 137.284 161 129V39C161 30.7157 154.284 24 146 24H88C79.7157 24 73 30.7157 73 39V129C73 137.284 79.7157 144 88 144Z"),c(n,"stroke-width","20"),c(n,"stroke-linecap","round"),c(n,"class","above svelte-vhy15y")},m(l,s){k(l,e,s),k(l,t,s),k(l,n,s)},p:v,i:v,o:v,d(l){l&&b(e),l&&b(t),l&&b(n)}}}class Qn extends z{constructor(e){super(),U(this,e,null,Jn,V,{})}}function Xn(r){let e,t,n,l,s;return{c(){e=P("path"),t=H(),n=P("g"),l=P("path"),s=P("path"),c(e,"d","M83 37H44C35.7157 37 29 43.7157 29 52V159.5C29 167.784 35.7157 174.5 44 174.5H151.5C159.784 174.5 166.5 167.784 166.5 159.5V113"),c(e,"stroke-width","20"),c(e,"stroke-linecap","round"),c(e,"class","window svelte-1wva86d"),c(l,"d","M114.325 29H166.5V81.1749L140.413 55.0874L114.325 29Z"),c(l,"fill","currentColor"),c(s,"d","M166.5 29H114.325L166.5 81.1749V29ZM166.5 29L89 106.5"),c(s,"stroke-width","20"),c(s,"stroke-linecap","round"),c(s,"stroke-linejoin","round"),c(n,"class","arrow svelte-1wva86d")},m(o,i){k(o,e,i),k(o,t,i),k(o,n,i),$(n,l),$(n,s)},p:v,i:v,o:v,d(o){o&&b(e),o&&b(t),o&&b(n)}}}class xn extends z{constructor(e){super(),U(this,e,null,Xn,V,{})}}function el(r){let e;return{c(){e=P("path"),c(e,"d","M53.1984 27.25L169.397 119.512L115.627 135.379L75 174.012L53.1984 27.25Z"),c(e,"stroke-width","20"),c(e,"stroke-linejoin","round"),c(e,"class","svelte-11rengu")},m(t,n){k(t,e,n)},p:v,i:v,o:v,d(t){t&&b(e)}}}class tl extends z{constructor(e){super(),U(this,e,null,el,V,{})}}function nl(r){let e,t,n;return{c(){e=P("g"),t=P("path"),n=P("path"),c(t,"d","M79.1126 161.07L168.685 71.4975C174.543 65.6396 174.543 56.1421 168.685 50.2843L151.008 32.6066C145.15 26.7487 135.652 26.7488 129.794 32.6066L40.2217 122.179"),c(t,"stroke-width","20"),c(n,"fill-rule","evenodd"),c(n,"clip-rule","evenodd"),c(n,"d","M33.5166 114.742C33.5166 114.742 33.5165 114.742 33.5165 114.742C18.8719 129.387 18.8719 153.131 33.5165 167.775C48.1612 182.42 71.9049 182.42 86.5495 167.775L33.5166 114.742Z"),c(n,"fill","currentColor"),c(e,"class","top svelte-1p4czs2")},m(l,s){k(l,e,s),$(e,t),$(e,n)},p:v,i:v,o:v,d(l){l&&b(e)}}}class ll extends z{constructor(e){super(),U(this,e,null,nl,V,{})}}function rl(r){let e,t,n;return{c(){e=P("path"),t=H(),n=P("path"),c(e,"d","M49 30V85C49 113.167 71.8335 136 100 136V136C128.167 136 151 113.167 151 85V30"),c(e,"stroke-width","20"),c(e,"stroke-linecap","round"),c(e,"class","letter svelte-1b9a7h6"),c(n,"class","line svelte-1b9a7h6"),c(n,"d","M50 171H150"),c(n,"stroke-width","20"),c(n,"stroke-linecap","round")},m(l,s){k(l,e,s),k(l,t,s),k(l,n,s)},p:v,i:v,o:v,d(l){l&&b(e),l&&b(t),l&&b(n)}}}class sl extends z{constructor(e){super(),U(this,e,null,rl,V,{})}}function ol(r){let e,t,n;return{c(){e=P("g"),t=P("path"),n=P("path"),c(t,"d","M178.248 76.0974L132.733 30.5824C126.857 24.7063 117.323 24.7273 111.473 30.6295L28.9733 113.862C23.1596 119.727 23.1805 129.189 29.0201 135.028L57.4243 163.432C60.2374 166.245 64.0527 167.826 68.0309 167.826L102.269 167.826C106.277 167.826 110.118 166.222 112.936 163.372L178.308 97.2499C184.109 91.3825 184.082 81.9316 178.248 76.0974Z"),c(t,"stroke-width","20"),c(n,"d","M97.7754 30.2132C109.491 18.4975 128.486 18.4975 140.202 30.2132L179.093 69.1041C190.808 80.8198 190.808 99.8148 179.093 111.53L159.712 130.911L78.3952 49.5935L97.7754 30.2132Z"),c(n,"fill","currentColor"),c(e,"class","svelte-1jmacb")},m(l,s){k(l,e,s),$(e,t),$(e,n)},p:v,i:v,o:v,d(l){l&&b(e)}}}class il extends z{constructor(e){super(),U(this,e,null,ol,V,{})}}function ul(r){let e,t,n,l,s;return{c(){e=P("path"),t=H(),n=P("path"),l=H(),s=P("path"),c(e,"d","M172.664 45L27 45"),c(e,"stroke-width","20"),c(e,"class","top svelte-1302pyf"),c(e,"stroke-linecap","round"),c(n,"d","M173.664 100L28 100"),c(n,"stroke-width","20"),c(n,"stroke-linecap","round"),c(n,"class","middle"),c(s,"d","M134 155H28"),c(s,"stroke-width","20"),c(s,"stroke-linecap","round"),c(s,"class","bottom svelte-1302pyf")},m(o,i){k(o,e,i),k(o,t,i),k(o,n,i),k(o,l,i),k(o,s,i)},p:v,i:v,o:v,d(o){o&&b(e),o&&b(t),o&&b(n),o&&b(l),o&&b(s)}}}class al extends z{constructor(e){super(),U(this,e,null,ul,V,{})}}function fl(r){let e,t,n;return{c(){e=P("g"),t=P("path"),n=P("path"),c(t,"d","M183.403 127.012L132.012 118L174.391 178.402L183.403 127.012Z"),c(t,"fill","currentColor"),c(t,"stroke-width","20"),c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(n,"d","M152.5 48.1264C140.354 37.4642 124.432 31 107 31C68.8924 31 38 61.8924 38 100C38 138.108 68.8924 169 107 169C124.432 169 140.354 162.536 152.5 151.874"),c(n,"stroke-width","20"),c(n,"stroke-linecap","round"),c(e,"class","svelte-v2qlxf")},m(l,s){k(l,e,s),$(e,t),$(e,n)},p:v,i:v,o:v,d(l){l&&b(e)}}}class cl extends z{constructor(e){super(),U(this,e,null,fl,V,{})}}function dl(r){let e,t,n,l,s,o;return{c(){e=P("g"),t=P("path"),n=H(),l=P("g"),s=P("path"),o=P("path"),c(t,"d","M180.831 175.831L170.626 150.087L168.344 144.331M92.8306 175.831L103.035 150.087L105.317 144.331M105.317 144.331L136.831 64.8306L168.344 144.331M105.317 144.331H168.344"),c(t,"stroke-width","20"),c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(e,"class","letter svelte-r8hzh9"),c(s,"d","M76.78 82.78L76.78 48L59.39 65.39L42 82.78H76.78Z"),c(s,"fill","currentColor"),c(o,"d","M59.39 65.39L42 82.78H76.78L76.78 48L59.39 65.39ZM59.39 65.39L23.5 29.5"),c(o,"stroke-width","20"),c(o,"stroke-linecap","round"),c(o,"stroke-linejoin","round"),c(l,"class","arrow svelte-r8hzh9")},m(i,u){k(i,e,u),$(e,t),k(i,n,u),k(i,l,u),$(l,s),$(l,o)},p:v,i:v,o:v,d(i){i&&b(e),i&&b(n),i&&b(l)}}}class pl extends z{constructor(e){super(),U(this,e,null,dl,V,{})}}function hl(r){let e,t,n;return{c(){e=P("path"),t=H(),n=P("path"),c(e,"fill-rule","evenodd"),c(e,"clip-rule","evenodd"),c(e,"d","M150 76.5C150 104.39 127.39 127 99.5 127C71.6096 127 49 104.39 49 76.5C49 48.6096 71.6096 26 99.5 26C127.39 26 150 48.6096 150 76.5ZM91 87.5C91 94.4036 85.4036 100 78.5 100C71.5964 100 66 94.4036 66 87.5C66 80.5964 71.5964 75 78.5 75C85.4036 75 91 80.5964 91 87.5ZM120.5 100C127.404 100 133 94.4036 133 87.5C133 80.5964 127.404 75 120.5 75C113.596 75 108 80.5964 108 87.5C108 94.4036 113.596 100 120.5 100Z"),c(e,"fill","currentColor"),c(e,"class","head svelte-1j3a471"),c(n,"d","M33 171C33 144.856 47.786 122.187 69.4016 111C69.4016 111 87.068 118.375 100 118.375C112.932 118.375 130.598 111 130.598 111C152.214 122.187 167 144.856 167 171"),c(n,"stroke-width","20"),c(n,"stroke-linecap","round")},m(l,s){k(l,e,s),k(l,t,s),k(l,n,s)},p:v,i:v,o:v,d(l){l&&b(e),l&&b(t),l&&b(n)}}}class ml extends z{constructor(e){super(),U(this,e,null,hl,V,{})}}function gl(r){let e,t,n,l,s,o,i,u,a,f,p;return{c(){e=P("path"),t=H(),n=P("line"),l=H(),s=P("line"),o=H(),i=P("line"),u=H(),a=P("line"),f=H(),p=P("path"),c(e,"d","M94.5139 8.86813C97.6008 7.09245 101.399 7.09245 104.486 8.86813L184.392 54.8318C193.268 59.9373 189.646 73.5 179.406 73.5H19.5938C9.3543 73.5 5.73181 59.9373 14.6077 54.8318L94.5139 8.86813Z"),c(e,"fill","currentColor"),c(e,"class","roof svelte-4lnx64"),c(n,"x1","45"),c(n,"y1","96"),c(n,"x2","45"),c(n,"y2","147"),c(n,"stroke-width","20"),c(n,"stroke-linecap","round"),c(s,"x1","82"),c(s,"y1","96"),c(s,"x2","82"),c(s,"y2","147"),c(s,"stroke-width","20"),c(s,"stroke-linecap","round"),c(i,"x1","118"),c(i,"y1","96"),c(i,"x2","118"),c(i,"y2","147"),c(i,"stroke-width","20"),c(i,"stroke-linecap","round"),c(a,"x1","155"),c(a,"y1","96"),c(a,"x2","155"),c(a,"y2","147"),c(a,"stroke-width","20"),c(a,"stroke-linecap","round"),c(p,"d","M175 179.5L25 179.5"),c(p,"stroke-width","20"),c(p,"stroke-linecap","round")},m(d,h){k(d,e,h),k(d,t,h),k(d,n,h),k(d,l,h),k(d,s,h),k(d,o,h),k(d,i,h),k(d,u,h),k(d,a,h),k(d,f,h),k(d,p,h)},p:v,i:v,o:v,d(d){d&&b(e),d&&b(t),d&&b(n),d&&b(l),d&&b(s),d&&b(o),d&&b(i),d&&b(u),d&&b(a),d&&b(f),d&&b(p)}}}class _l extends z{constructor(e){super(),U(this,e,null,gl,V,{})}}function $l(r){let e,t,n;return{c(){e=P("g"),t=P("path"),n=P("path"),c(t,"d","M149.995 149.995L50.9999 51"),c(t,"stroke-width","20"),c(t,"stroke-linecap","round"),c(n,"d","M51 149.995L149.995 51"),c(n,"stroke-width","20"),c(n,"stroke-linecap","round"),c(e,"class","svelte-ic3z83")},m(l,s){k(l,e,s),$(e,t),$(e,n)},p:v,i:v,o:v,d(l){l&&b(e)}}}class kl extends z{constructor(e){super(),U(this,e,null,$l,V,{})}}function bl(r){let e;return{c(){e=P("path"),c(e,"d","M174.492 50.4975C174.492 50.4975 117.721 107.269 79.0307 145.959C77.0781 147.912 73.9146 147.91 71.9619 145.957L26 99.995"),c(e,"stroke-width","20"),c(e,"stroke-linecap","round")},m(t,n){k(t,e,n)},p:v,i:v,o:v,d(t){t&&b(e)}}}class wl extends z{constructor(e){super(),U(this,e,null,bl,V,{})}}function vl(r){let e,t,n,l,s,o,i,u,a;return{c(){e=P("g"),t=P("path"),n=P("g"),l=P("circle"),s=P("circle"),o=P("path"),i=P("path"),u=P("path"),a=P("path"),c(t,"d","M23 123C23 89.8629 49.8629 63 83 63H99.5H116C149.137 63 176 89.8629 176 123V168C176 173.523 171.523 178 166 178H33C27.4772 178 23 173.523 23 168V123Z"),c(t,"stroke","currentColor"),c(t,"stroke-width","20"),c(l,"cx","70"),c(l,"cy","123"),c(l,"r","15"),c(l,"fill","currentColor"),c(s,"cx","130"),c(s,"cy","123"),c(s,"r","15"),c(s,"fill","currentColor"),c(n,"class","eyes svelte-9mkbq2"),c(o,"d","M55.2075 14L68.2367 63.4556"),c(o,"stroke","currentColor"),c(o,"stroke-width","20"),c(o,"stroke-linecap","round"),c(o,"class","antlerLeft svelte-9mkbq2"),c(i,"d","M144.237 14L131.208 63.4556"),c(i,"stroke","currentColor"),c(i,"stroke-width","20"),c(i,"stroke-linecap","round"),c(i,"class","antlerRight svelte-9mkbq2"),c(u,"d","M190 108C195.523 108 200 112.477 200 118L200 148C200 153.523 195.523 158 190 158L180 158L180 108L190 108Z"),c(u,"fill","currentColor"),c(a,"d","M10 111C4.47715 111 1.95703e-07 115.477 4.37114e-07 121L1.74846e-06 151C1.98987e-06 156.523 4.47716 161 10 161L20 161L20 111L10 111Z"),c(a,"fill","currentColor"),c(e,"class","svelte-9mkbq2")},m(f,p){k(f,e,p),$(e,t),$(e,n),$(n,l),$(n,s),$(e,o),$(e,i),$(e,u),$(e,a)},p:v,i:v,o:v,d(f){f&&b(e)}}}class Cl extends z{constructor(e){super(),U(this,e,null,vl,V,{})}}function yl(r){let e,t,n,l,s,o,i,u,a;return{c(){e=P("g"),t=P("path"),n=P("g"),l=P("path"),s=P("g"),o=P("path"),i=P("path"),u=P("path"),a=P("path"),c(t,"class","back svelte-9rkroy"),c(t,"d","M180 160C180 171.046 171.046 180 160 180H100H40C28.9543 180 20 171.046 20 160V40C20 28.9543 28.9543 20 40 20H160C171.046 20 180 28.9543 180 40V160Z"),c(t,"stroke","currentColor"),c(t,"stroke-width","20"),c(l,"d","M133 101.5C133 119.449 118.449 134 100.5 134V134V134C82.5507 134 68 119.449 68 101.5V101.5C68 83.5508 82.5507 69 100.5 69V69C118.449 69 133 83.5507 133 101.5V101.5Z"),c(l,"stroke","currentColor"),c(l,"stroke-width","20"),c(o,"d","M153.355 62.2132C157.261 58.308 157.261 51.9763 153.355 48.0711V48.0711C149.45 44.1658 143.119 44.1658 139.213 48.0711L118 69.2843L132.142 83.4264L153.355 62.2132Z"),c(o,"fill","currentColor"),c(i,"d","M47.0711 140.213C43.1658 144.118 43.1658 150.45 47.0711 154.355V154.355C50.9763 158.261 57.308 158.261 61.2132 154.355L82.4264 133.142L68.2843 119L47.0711 140.213Z"),c(i,"fill","currentColor"),c(u,"d","M139.213 154.355C143.118 158.261 149.45 158.261 153.355 154.355V154.355C157.26 150.45 157.26 144.118 153.355 140.213L132.142 119L118 133.142L139.213 154.355Z"),c(u,"fill","currentColor"),c(a,"d","M61.2132 48.0711C57.3079 44.1658 50.9763 44.1658 47.071 48.0711V48.0711C43.1658 51.9763 43.1658 58.308 47.071 62.2132L68.2842 83.4264L82.4264 69.2843L61.2132 48.0711Z"),c(a,"fill","currentColor"),c(s,"class","teeth svelte-9rkroy"),c(n,"class","wheel svelte-9rkroy"),c(e,"class","svelte-9rkroy")},m(f,p){k(f,e,p),$(e,t),$(e,n),$(n,l),$(n,s),$(s,o),$(s,i),$(s,u),$(s,a)},p:v,i:v,o:v,d(f){f&&b(e)}}}class Ll extends z{constructor(e){super(),U(this,e,null,yl,V,{})}}function Il(r){let e,t,n,l,s;return{c(){e=P("g"),t=P("path"),n=P("g"),l=P("path"),s=P("path"),c(t,"class","box svelte-dg01c8"),c(t,"d","M100 180H135H165C176.046 180 185 171.046 185 160V40C185 28.9543 176.046 20 165 20H100"),c(t,"stroke","currentColor"),c(t,"stroke-width","20"),c(t,"stroke-linecap","round"),c(l,"d","M61.8932 136.694L25 99.8008L61.8932 62.9076L61.8932 99.8008V136.694Z"),c(l,"fill","currentColor"),c(s,"d","M25 99.8008L61.8932 136.694L61.8932 62.9076L25 99.8008ZM25 99.8008L134.602 99.8008"),c(s,"stroke","currentColor"),c(s,"stroke-width","20"),c(s,"stroke-linecap","round"),c(s,"stroke-linejoin","round"),c(n,"class","arrow svelte-dg01c8"),c(e,"class","top svelte-dg01c8")},m(o,i){k(o,e,i),$(e,t),$(e,n),$(n,l),$(n,s)},p:v,i:v,o:v,d(o){o&&b(e)}}}class Ml extends z{constructor(e){super(),U(this,e,null,Il,V,{})}}function Pl(r){let e,t,n,l,s;return{c(){e=P("g"),t=P("path"),n=P("g"),l=P("path"),s=P("path"),c(t,"class","box svelte-lqs0kb"),c(t,"d","M20 95L20 130L20 160C20 171.046 28.9543 180 40 180L160 180C171.046 180 180 171.046 180 160L180 95"),c(t,"stroke","currentColor"),c(t,"stroke-width","20"),c(t,"stroke-linecap","round"),c(l,"d","M137.092 56.8932L100.199 20L63.306 56.8932L100.199 56.8932L137.092 56.8932Z"),c(l,"fill","currentColor"),c(s,"d","M100.199 20L137.092 56.8932L63.306 56.8932L100.199 20ZM100.199 20L100.199 129.602"),c(s,"stroke","currentColor"),c(s,"stroke-width","20"),c(s,"stroke-linecap","round"),c(s,"stroke-linejoin","round"),c(n,"class","arrow svelte-lqs0kb"),c(e,"class","top svelte-lqs0kb")},m(o,i){k(o,e,i),$(e,t),$(e,n),$(n,l),$(n,s)},p:v,i:v,o:v,d(o){o&&b(e)}}}class El extends z{constructor(e){super(),U(this,e,null,Pl,V,{})}}function Ol(r){let e,t,n,l,s;return{c(){e=P("g"),t=P("g"),n=P("path"),l=P("g"),s=P("path"),c(n,"d","M146 83L146 56.5C146 31.371 125.629 11 100.5 11V11C75.371 11 55 31.371 55 56.5L55 83"),c(n,"stroke","currentColor"),c(n,"stroke-width","20"),c(n,"stroke-linecap","round"),c(t,"class","horseshoe svelte-ym1ll2"),c(s,"fill-rule","evenodd"),c(s,"clip-rule","evenodd"),c(s,"d","M39 83C27.9543 83 19 91.9543 19 103V170C19 181.046 27.9543 190 39 190H161C172.046 190 181 181.046 181 170V103C181 91.9543 172.046 83 161 83H100H39ZM120 124C120 131.403 115.978 137.866 110 141.324V159C110 164.523 105.523 169 100 169C94.4771 169 90 164.523 90 159V141.324C84.022 137.866 80 131.403 80 124C80 112.954 88.9543 104 100 104C111.046 104 120 112.954 120 124Z"),c(s,"fill","currentColor"),c(l,"class","box svelte-ym1ll2"),c(e,"class","svelte-ym1ll2")},m(o,i){k(o,e,i),$(e,t),$(t,n),$(e,l),$(l,s)},p:v,i:v,o:v,d(o){o&&b(e)}}}class Tl extends z{constructor(e){super(),U(this,e,null,Ol,V,{})}}function Dl(r){let e,t,n;var l=r[1][r[0]];function s(o){return{}}return l&&(t=Ze(l,s())),{c(){e=P("svg"),t&&L(t.$$.fragment),c(e,"width","200"),c(e,"height","200"),c(e,"viewBox","0 0 200 200"),c(e,"fill","none"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"class","svelte-t62kgi")},m(o,i){k(o,e,i),t&&I(t,e,null),n=!0},p(o,[i]){if(i&1&&l!==(l=o[1][o[0]])){if(t){Y();const u=t;_(u.$$.fragment,1,0,()=>{M(u,1)}),G()}l?(t=Ze(l,s()),L(t.$$.fragment),m(t.$$.fragment,1),I(t,e,null)):t=null}},i(o){n||(t&&m(t.$$.fragment,o),n=!0)},o(o){t&&_(t.$$.fragment,o),n=!1},d(o){o&&b(e),t&&M(t)}}}function Al(r,e,t){let n={copy:Qn,popout:xn,cursor:tl,highlight:ll,underline:sl,eraser:il,merge:al,reload:cl,shrink:pl,person:ml,organization:_l,delete:kl,check:wl,robot:Cl,vault:Ll,login:Ml,upload:El,lock:Tl},{name:l}=e;return r.$$set=s=>{"name"in s&&t(0,l=s.name)},[l,n]}class J extends z{constructor(e){super(),U(this,e,Al,Dl,V,{name:0})}}function Hl(r){let e;return{c(){e=B("Login")},m(t,n){k(t,e,n)},d(t){t&&b(e)}}}function Rl(r){let e,t,n,l;return n=new J({props:{name:"popout"}}),{c(){e=O("span"),e.textContent="Register",t=H(),L(n.$$.fragment)},m(s,o){k(s,e,o),k(s,t,o),I(n,s,o),l=!0},p:v,i(s){l||(m(n.$$.fragment,s),l=!0)},o(s){_(n.$$.fragment,s),l=!1},d(s){s&&b(e),s&&b(t),M(n,s)}}}function Sl(r){let e,t,n,l,s,o,i,u,a,f,p,d,h,g,D,y;return a=new be({props:{$$slots:{default:[Hl]},$$scope:{ctx:r}}}),a.$on("click",r[14]),h=new be({props:{$$slots:{default:[Rl]},$$scope:{ctx:r}}}),h.$on("click",r[15]),{c(){e=O("h1"),e.textContent="Login to Arguflow",t=H(),n=O("div"),l=O("input"),s=H(),o=O("input"),i=H(),u=O("div"),L(a.$$.fragment),f=H(),p=O("span"),p.textContent="or",d=H(),L(h.$$.fragment),c(e,"class","svelte-1xevmsn"),c(l,"type","text"),c(l,"placeholder","email"),c(l,"class","svelte-1xevmsn"),S(l,"invalid",r[4]),c(o,"type","password"),c(o,"placeholder","password"),c(o,"class","svelte-1xevmsn"),S(o,"invalid",r[5]),c(u,"class","buttons svelte-1xevmsn"),c(n,"class","content svelte-1xevmsn")},m(w,R){k(w,e,R),k(w,t,R),k(w,n,R),$(n,l),r[8](l),ue(l,r[2]),$(n,s),$(n,o),r[11](o),ue(o,r[3]),$(n,i),$(n,u),I(a,u,null),$(u,f),$(u,p),$(u,d),I(h,u,null),g=!0,D||(y=[Z(l,"input",r[9]),Z(l,"keydown",r[10]),Z(o,"input",r[12]),Z(o,"keydown",r[13])],D=!0)},p(w,[R]){R&4&&l.value!==w[2]&&ue(l,w[2]),(!g||R&16)&&S(l,"invalid",w[4]),R&8&&o.value!==w[3]&&ue(o,w[3]),(!g||R&32)&&S(o,"invalid",w[5]);const T={};R&65536&&(T.$$scope={dirty:R,ctx:w}),a.$set(T);const q={};R&65536&&(q.$$scope={dirty:R,ctx:w}),h.$set(q)},i(w){g||(m(a.$$.fragment,w),m(h.$$.fragment,w),g=!0)},o(w){_(a.$$.fragment,w),_(h.$$.fragment,w),g=!1},d(w){w&&b(e),w&&b(t),w&&b(n),r[8](null),r[11](null),M(a),M(h),D=!1,fe(y)}}}function Nl(r,e,t){let{closePopup:n}=e,l,s,o="",i="";we(function(){l.focus(),chrome.storage.local.get("arguflowLogin",T=>{T.arguflowLogin&&(t(2,o=T.arguflowLogin.email),t(3,i=T.arguflowLogin.password),s.focus())})});let u=!1,a=!1;function f(T,q){t(4,u=!1),t(5,a=!1),T.length==0&&(t(4,u=!0),W.addErrorMessage("Email is required")),q.length==0&&(t(5,a=!0),W.addErrorMessage("Password is required")),!(u||a)&&Vn(T,q).then(()=>{W.addMessage("Logged in"),n()}).catch(F=>{t(4,u=!0),t(5,a=!0),W.addError("login",F)})}function p(T){x[T?"unshift":"push"](()=>{l=T,t(0,l)})}function d(){o=this.value,t(2,o)}const h=T=>{T.key=="Enter"&&s.focus()};function g(T){x[T?"unshift":"push"](()=>{s=T,t(1,s)})}function D(){i=this.value,t(3,i)}const y=T=>{T.key=="Enter"&&f(o,i)},w=()=>{f(o,i)},R=()=>{window.open("https://vault.arguflow.ai/auth/register","_blank")};return r.$$set=T=>{"closePopup"in T&&t(7,n=T.closePopup)},[l,s,o,i,u,a,f,n,p,d,h,g,D,y,w,R]}class zl extends z{constructor(e){super(),U(this,e,Nl,Sl,V,{closePopup:7})}}function zt(r){const e=t=>{r.contains(t.target)||r.dispatchEvent(new CustomEvent("outclick",{detail:{target:t.target}}))};return document.addEventListener("click",e,!0),{destroy(){document.removeEventListener("click",e,!0)}}}let Ul={backInOut:jt,backIn:Kt,backOut:Wt,bounceOut:Bt,bounceInOut:Ft,bounceIn:Yt,circInOut:Gt,circIn:Jt,circOut:Qt,cubicInOut:Xt,cubicIn:xt,cubicOut:en,elasticInOut:tn,elasticIn:nn,elasticOut:ln,expoInOut:rn,expoIn:sn,expoOut:on,quadInOut:un,quadIn:an,quadOut:fn,quartInOut:cn,quartIn:dn,quartOut:pn,quintInOut:hn,quintIn:mn,quintOut:gn,sineInOut:_n,sineIn:$n,sineOut:kn},Je=200;function de(r,e=null,t={}){return t=Object.assign({durationMultiplier:1,preRun:null,delay:0},t),function(l,{delay:s=t.delay,duration:o=Je*t.durationMultiplier}={}){let i=null;t.preRun!=null&&(i=t.preRun(l));let u=null;return e!=null&&(u=Ul[e]),{delay:s,duration:o,css:a=>{let f=null;return u!=null&&(f=u(a)),r(a,f,i)}}}}function Vl(r){let e;const t=r[15].default,n=De(t,r,r[14],null);return{c(){n&&n.c()},m(l,s){n&&n.m(l,s),e=!0},p(l,s){n&&n.p&&(!e||s&16384)&&Ae(n,t,l,l[14],e?Re(t,l[14],s,null):He(l[14]),null)},i(l){e||(m(n,l),e=!0)},o(l){_(n,l),e=!1},d(l){n&&n.d(l)}}}function Zl(r){let e,t,n,l,s,o;const i=r[15].default,u=De(i,r,r[14],null);let a=r[4]&&ut(r);return{c(){e=O("div"),u&&u.c(),t=H(),a&&a.c(),n=Pe(),c(e,"class","element svelte-15bwfk4")},m(f,p){k(f,e,p),u&&u.m(e,null),r[16](e),k(f,t,p),a&&a.m(f,p),k(f,n,p),l=!0,s||(o=[Z(e,"mouseover",r[10]),Z(e,"focus",r[10]),Z(e,"mouseleave",r[12]),Z(e,"blur",r[12]),Z(e,"mousemove",r[11])],s=!0)},p(f,p){u&&u.p&&(!l||p&16384)&&Ae(u,i,f,f[14],l?Re(i,f[14],p,null):He(f[14]),null),f[4]?a?(a.p(f,p),p&16&&m(a,1)):(a=ut(f),a.c(),m(a,1),a.m(n.parentNode,n)):a&&(Y(),_(a,1,1,()=>{a=null}),G())},i(f){l||(m(u,f),m(a),l=!0)},o(f){_(u,f),_(a),l=!1},d(f){f&&b(e),u&&u.d(f),r[16](null),f&&b(t),a&&a.d(f),f&&b(n),s=!1,fe(o)}}}function ut(r){let e,t,n,l,s,o;return{c(){e=O("div"),t=O("div"),n=B(r[1]),c(t,"class","content"),ze(e,"top",r[6]+"px"),ze(e,"left",r[5]+"px"),c(e,"class","tooltip svelte-15bwfk4"),S(e,"disabled",r[2])},m(i,u){k(i,e,u),$(e,t),$(t,n),r[17](e),o=!0},p(i,u){(!o||u&2)&&ve(n,i[1]),(!o||u&64)&&ze(e,"top",i[6]+"px"),(!o||u&32)&&ze(e,"left",i[5]+"px"),(!o||u&4)&&S(e,"disabled",i[2])},i(i){o||(pe(()=>{o&&(s&&s.end(1),l=bn(e,r[8],{}),l.start())}),o=!0)},o(i){l&&l.invalidate(),s=wn(e,r[9],{}),o=!1},d(i){i&&b(e),r[17](null),i&&s&&s.end()}}}function ql(r){let e,t,n,l;const s=[Zl,Vl],o=[];function i(u,a){return u[1]&&u[0]?0:1}return e=i(r),t=o[e]=s[e](r),{c(){t.c(),n=Pe()},m(u,a){o[e].m(u,a),k(u,n,a),l=!0},p(u,[a]){let f=e;e=i(u),e===f?o[e].p(u,a):(Y(),_(o[f],1,1,()=>{o[f]=null}),G(),t=o[e],t?t.p(u,a):(t=o[e]=s[e](u),t.c()),m(t,1),t.m(n.parentNode,n))},i(u){l||(m(t),l=!0)},o(u){_(t),l=!1},d(u){o[e].d(u),u&&b(n)}}}function jl(r,e,t){let n;X(r,Te,E=>t(19,n=E));let{$$slots:l={},$$scope:s}=e,{exist:o=!0}=e,{content:i=""}=e,{disabled:u=!1}=e,{layout:a="bottom"}=e,f=!1,p=0,d=0,h,g,D=de((E,K)=>`
      transform: scale(${K});
    `,"sineOut"),y=de((E,K)=>`
      transform: scale(${K});
      z-index: -1;
    `,"sineOut"),w=null;async function R(){t(4,f=!0),q(),await rt(),se(Te,n.open=!0,n)}function T(){f||(se(Te,n.claimed=!0,n),n.open?R():w==null&&(w=setTimeout(R,1e3)))}function q(){if(g){let E=h.getBoundingClientRect();a=="bottom"||a=="top"?(t(5,p=E.left-g.offsetWidth/2+E.width/2),p<4?t(5,p=4):p+g.offsetWidth>window.innerWidth-4&&t(5,p=window.innerWidth-g.offsetWidth-4),a=="bottom"?t(6,d=E.bottom+4):a=="top"&&t(6,d=E.top-g.offsetHeight-4)):(a=="left"||a=="right")&&(t(6,d=E.top-g.offsetHeight/2+E.height/2),d<4?t(6,d=4):d+g.offsetHeight>window.innerHeight-4&&t(6,d=window.innerHeight-g.offsetHeight-4),a=="left"?t(5,p=E.left-g.offsetWidth-4):a=="right"&&t(5,p=E.right+4))}}async function F(){await rt(),q()}function j(){w!=null&&(clearTimeout(w),w=null),se(Te,n.claimed=!1,n),t(4,f=!1),setTimeout(function(){n.claimed||se(Te,n.open=!1,n)},200)}function re(E){x[E?"unshift":"push"](()=>{h=E,t(7,h)})}function ie(E){x[E?"unshift":"push"](()=>{g=E,t(3,g)})}return r.$$set=E=>{"exist"in E&&t(0,o=E.exist),"content"in E&&t(1,i=E.content),"disabled"in E&&t(2,u=E.disabled),"layout"in E&&t(13,a=E.layout),"$$scope"in E&&t(14,s=E.$$scope)},r.$$.update=()=>{r.$$.dirty&14&&F()},[o,i,u,g,f,p,d,h,D,y,T,q,j,a,s,l,re,ie]}class Kl extends z{constructor(e){super(),U(this,e,jl,ql,V,{exist:0,content:1,disabled:2,layout:13})}}function Wl(r){let e,t,n,l;const s=r[8].default,o=De(s,r,r[11],null);return{c(){e=O("button"),o&&o.c(),e.disabled=r[2],c(e,"class","svelte-114b3tl"),S(e,"selected",r[0]),S(e,"selectedColor",r[1])},m(i,u){k(i,e,u),o&&o.m(e,null),r[10](e),t=!0,n||(l=[Z(e,"click",r[9]),Z(e,"click",r[5]),Z(e,"mouseenter",r[6])],n=!0)},p(i,u){o&&o.p&&(!t||u&2048)&&Ae(o,s,i,i[11],t?Re(s,i[11],u,null):He(i[11]),null),(!t||u&4)&&(e.disabled=i[2]),(!t||u&1)&&S(e,"selected",i[0]),(!t||u&2)&&S(e,"selectedColor",i[1])},i(i){t||(m(o,i),t=!0)},o(i){_(o,i),t=!1},d(i){i&&b(e),o&&o.d(i),r[10](null),n=!1,fe(l)}}}function Bl(r){let e,t;const n=[r[3]];let l={$$slots:{default:[Wl]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)l=Pt(l,n[s]);return e=new Kl({props:l}),{c(){L(e.$$.fragment)},m(s,o){I(e,s,o),t=!0},p(s,[o]){const i=o&8?Et(n,[Ot(s[3])]):{};o&2071&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){M(e,s)}}}function Fl(r,e,t){let{$$slots:n={},$$scope:l}=e,{selected:s=!1}=e,{selectedColor:o=!0}=e,{disabled:i=!1}=e,{tooltip:u=null}=e,a;function f(){u==null?t(3,a={exist:!1}):typeof u=="string"?t(3,a={content:u}):t(3,a=u),i&&!a.hasOwnProperty("disabled")&&t(3,a.disabled=!0,a)}let p;function d(){p.classList.remove("clicked"),p.offsetWidth,p.classList.add("clicked")}async function h(){d()}function g(){p.classList.remove("hovered"),p.offsetWidth,p.classList.add("hovered")}function D(w){Mt.call(this,r,w)}function y(w){x[w?"unshift":"push"](()=>{p=w,t(4,p)})}return r.$$set=w=>{"selected"in w&&t(0,s=w.selected),"selectedColor"in w&&t(1,o=w.selectedColor),"disabled"in w&&t(2,i=w.disabled),"tooltip"in w&&t(7,u=w.tooltip),"$$scope"in w&&t(11,l=w.$$scope)},r.$$.update=()=>{r.$$.dirty&132&&f()},[s,o,i,a,p,h,g,u,n,D,y,l]}class te extends z{constructor(e){super(),U(this,e,Fl,Bl,V,{selected:0,selectedColor:1,disabled:2,tooltip:7})}}function at(r,e,t){const n=r.slice();return n[17]=e[t],n[18]=e,n[19]=t,n}function ft(r){let e,t,n,l={ctx:r,current:null,token:null,hasCatch:!0,pending:Xl,then:Gl,catch:Yl,value:16,error:20,blocks:[,,,]};return st(t=it(r[3]),l),{c(){e=O("div"),l.block.c(),c(e,"class","bookmark")},m(s,o){k(s,e,o),l.block.m(e,l.anchor=null),l.mount=()=>e,l.anchor=null,n=!0},p(s,o){r=s,l.ctx=r,o&8&&t!==(t=it(r[3]))&&st(t,l)||vn(l,r,o)},i(s){n||(m(l.block),n=!0)},o(s){for(let o=0;o<3;o+=1){const i=l.blocks[o];_(i)}n=!1},d(s){s&&b(e),l.block.d(),l.token=null,l=null}}}function Yl(r){let e,t,n=r[20]+"",l;return{c(){e=O("div"),t=B("Failed to load collections: "),l=B(n),c(e,"class","loader error svelte-1ufzgkh")},m(s,o){k(s,e,o),$(e,t),$(e,l)},p(s,o){o&8&&n!==(n=s[20]+"")&&ve(l,n)},i:v,o:v,d(s){s&&b(e)}}}function Gl(r){let e,t,n,l,s,o,i=r[16].collections,u=[];for(let d=0;d<i.length;d+=1)u[d]=dt(at(r,i,d));const a=d=>_(u[d],1,1,()=>{u[d]=null});let f=r[3]!=1&&pt(r),p=r[3]!=r[16].total_pages&&ht(r);return{c(){e=O("div"),t=O("div");for(let d=0;d<u.length;d+=1)u[d].c();n=H(),l=O("div"),f&&f.c(),s=H(),p&&p.c(),c(l,"class","buttons svelte-1ufzgkh"),c(t,"class","collections svelte-1ufzgkh"),c(e,"class","collectionsScroll svelte-1ufzgkh")},m(d,h){k(d,e,h),$(e,t);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(t,null);$(t,n),$(t,l),f&&f.m(l,null),$(l,s),p&&p.m(l,null),o=!0},p(d,h){if(h&12){i=d[16].collections;let g;for(g=0;g<i.length;g+=1){const D=at(d,i,g);u[g]?(u[g].p(D,h),m(u[g],1)):(u[g]=dt(D),u[g].c(),m(u[g],1),u[g].m(t,n))}for(Y(),g=i.length;g<u.length;g+=1)a(g);G()}d[3]!=1?f?(f.p(d,h),h&8&&m(f,1)):(f=pt(d),f.c(),m(f,1),f.m(l,s)):f&&(Y(),_(f,1,1,()=>{f=null}),G()),d[3]!=d[16].total_pages?p?(p.p(d,h),h&8&&m(p,1)):(p=ht(d),p.c(),m(p,1),p.m(l,null)):p&&(Y(),_(p,1,1,()=>{p=null}),G())},i(d){if(!o){for(let h=0;h<i.length;h+=1)m(u[h]);m(f),m(p),o=!0}},o(d){u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)_(u[h]);_(f),_(p),o=!1},d(d){d&&b(e),Ye(u,d),f&&f.d(),p&&p.d()}}}function ct(r){let e,t;return e=new J({props:{name:"check"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function dt(r){let e,t,n=r[17].name+"",l,s,o,i,u,a,f,p,d,h=r[2][r[17].id]&&ct();function g(){r[8].call(u,r[17])}function D(){return r[9](r[17])}return{c(){e=O("button"),t=O("label"),l=B(n),o=H(),h&&h.c(),i=H(),u=O("input"),c(t,"for",s=r[17].name),c(t,"class","svelte-1ufzgkh"),c(u,"type","checkbox"),c(u,"name",a=r[17].name),u.hidden=!0,c(e,"class","collection svelte-1ufzgkh")},m(y,w){k(y,e,w),$(e,t),$(t,l),$(e,o),h&&h.m(e,null),$(e,i),$(e,u),u.checked=r[2][r[17].id],f=!0,p||(d=[Z(u,"change",g),Z(e,"click",D)],p=!0)},p(y,w){r=y,(!f||w&8)&&n!==(n=r[17].name+"")&&ve(l,n),(!f||w&8&&s!==(s=r[17].name))&&c(t,"for",s),r[2][r[17].id]?h?w&12&&m(h,1):(h=ct(),h.c(),m(h,1),h.m(e,i)):h&&(Y(),_(h,1,1,()=>{h=null}),G()),(!f||w&8&&a!==(a=r[17].name))&&c(u,"name",a),w&12&&(u.checked=r[2][r[17].id])},i(y){f||(m(h),f=!0)},o(y){_(h),f=!1},d(y){y&&b(e),h&&h.d(),p=!1,fe(d)}}}function pt(r){let e,t;return e=new be({props:{expand:!0,$$slots:{default:[Jl]},$$scope:{ctx:r}}}),e.$on("click",r[10]),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p(n,l){const s={};l&2097152&&(s.$$scope={dirty:l,ctx:n}),e.$set(s)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Jl(r){let e;return{c(){e=B("Previous")},m(t,n){k(t,e,n)},d(t){t&&b(e)}}}function ht(r){let e,t;return e=new be({props:{expand:!0,$$slots:{default:[Ql]},$$scope:{ctx:r}}}),e.$on("click",r[11]),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p(n,l){const s={};l&2097152&&(s.$$scope={dirty:l,ctx:n}),e.$set(s)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Ql(r){let e;return{c(){e=B("Next")},m(t,n){k(t,e,n)},d(t){t&&b(e)}}}function Xl(r){let e;return{c(){e=O("div"),e.textContent="Loading...",c(e,"class","loader svelte-1ufzgkh")},m(t,n){k(t,e,n)},p:v,i:v,o:v,d(t){t&&b(e)}}}function xl(r){let e,t;return e=new J({props:{name:"lock"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function er(r){let e;return{c(){e=B("Select Collections")},m(t,n){k(t,e,n)},d(t){t&&b(e)}}}function tr(r){let e,t,n;return t=new J({props:{name:"upload"}}),{c(){e=B(`Upload\r
      `),L(t.$$.fragment)},m(l,s){k(l,e,s),I(t,l,s),n=!0},p:v,i(l){n||(m(t.$$.fragment,l),n=!0)},o(l){_(t.$$.fragment,l),n=!1},d(l){l&&b(e),M(t,l)}}}function nr(r){let e,t,n,l,s,o,i,u,a,f,p,d=r[0]&&ft(r);return o=new te({props:{tooltip:{content:r[1]?"Private":"Public",layout:"top"},selected:r[1],$$slots:{default:[xl]},$$scope:{ctx:r}}}),o.$on("click",r[12]),u=new be({props:{expand:!0,$$slots:{default:[er]},$$scope:{ctx:r}}}),u.$on("click",r[13]),f=new be({props:{expand:!0,$$slots:{default:[tr]},$$scope:{ctx:r}}}),f.$on("click",r[6]),{c(){e=O("h1"),e.textContent="Upload to Arguflow",t=H(),n=O("div"),d&&d.c(),l=H(),s=O("div"),L(o.$$.fragment),i=H(),L(u.$$.fragment),a=H(),L(f.$$.fragment),c(e,"class","svelte-1ufzgkh"),c(s,"class","buttons svelte-1ufzgkh"),c(n,"class","content svelte-1ufzgkh"),S(n,"bookmark",r[0])},m(h,g){k(h,e,g),k(h,t,g),k(h,n,g),d&&d.m(n,null),$(n,l),$(n,s),I(o,s,null),$(s,i),I(u,s,null),$(s,a),I(f,s,null),p=!0},p(h,[g]){h[0]?d?(d.p(h,g),g&1&&m(d,1)):(d=ft(h),d.c(),m(d,1),d.m(n,l)):d&&(Y(),_(d,1,1,()=>{d=null}),G());const D={};g&2&&(D.tooltip={content:h[1]?"Private":"Public",layout:"top"}),g&2&&(D.selected=h[1]),g&2097152&&(D.$$scope={dirty:g,ctx:h}),o.$set(D);const y={};g&2097152&&(y.$$scope={dirty:g,ctx:h}),u.$set(y);const w={};g&2097152&&(w.$$scope={dirty:g,ctx:h}),f.$set(w),(!p||g&1)&&S(n,"bookmark",h[0])},i(h){p||(m(d),m(o.$$.fragment,h),m(u.$$.fragment,h),m(f.$$.fragment,h),p=!0)},o(h){_(d),_(o.$$.fragment,h),_(u.$$.fragment,h),_(f.$$.fragment,h),p=!1},d(h){h&&b(e),h&&b(t),h&&b(n),d&&d.d(),M(o),M(u),M(f)}}}function lr(r,e,t){let n,l;const s=ee("card");X(r,s,T=>t(14,n=T));const o=ee("shrunk");X(r,o,T=>t(15,l=T));let{closePopup:i}=e,u=!1,a=!1;async function f(){let T=Ht(n,l,!1,!1);W.addMessage("Uploading...");try{let q=await Bn(T.innerHTML,n.url,a),F=[];for(let j of Object.keys(p))p[j]&&F.push(j);if(F.length>0){W.addMessage("Adding to collections...");for(let j of F)console.log(j,q.card_metadata.id),await Fn(q.card_metadata.id,j)}q.duplicate?W.addMessage("Done, card is a duplicate"):W.addMessage("Done!"),i()}catch(q){W.addError("upload",q)}}let p={},d=1;function h(T){p[T.id]=this.checked,t(2,p)}const g=T=>t(2,p[T.id]=!p[T.id],p),D=()=>{t(3,d--,d)},y=()=>{t(3,d++,d)},w=()=>t(1,a=!a),R=()=>t(0,u=!u);return r.$$set=T=>{"closePopup"in T&&t(7,i=T.closePopup)},[u,a,p,d,s,o,f,i,h,g,D,y,w,R]}class rr extends z{constructor(e){super(),U(this,e,lr,nr,V,{closePopup:7})}}function sr(r){let e,t;return e=new rr({props:{closePopup:r[1]}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p(n,l){const s={};l&2&&(s.closePopup=n[1]),e.$set(s)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function or(r){let e,t;return e=new zl({props:{closePopup:r[1]}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p(n,l){const s={};l&2&&(s.closePopup=n[1]),e.$set(s)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function ir(r){let e,t,n,l,s,o,i,u;const a=[or,sr],f=[];function p(d,h){return d[0]=="login"?0:d[0]=="upload"?1:-1}return~(n=p(r))&&(l=f[n]=a[n](r)),{c(){e=O("div"),t=O("div"),l&&l.c(),c(t,"class","top svelte-1t0ikaw"),c(e,"class","center levelOne svelte-1t0ikaw")},m(d,h){k(d,e,h),$(e,t),~n&&f[n].m(t,null),o=!0,i||(u=[Tt(zt.call(null,t)),Z(t,"outclick",r[3])],i=!0)},p(d,[h]){let g=n;n=p(d),n===g?~n&&f[n].p(d,h):(l&&(Y(),_(f[g],1,1,()=>{f[g]=null}),G()),~n?(l=f[n],l?l.p(d,h):(l=f[n]=a[n](d),l.c()),m(l,1),l.m(t,null)):l=null)},i(d){o||(m(l),pe(()=>{o&&(s||(s=le(t,r[2],{},!0)),s.run(1))}),o=!0)},o(d){_(l),s||(s=le(t,r[2],{},!1)),s.run(0),o=!1},d(d){d&&b(e),~n&&f[n].d(),d&&s&&s.end(),i=!1,fe(u)}}}function ur(r,e,t){let{name:n}=e,{closePopup:l}=e,s=de((i,u)=>`
      transform: translateY(${(1-u)*100}%) scale(${u});
    `,"sineOut",{durationMultiplier:2});function o(){l()}return r.$$set=i=>{"name"in i&&t(0,n=i.name),"closePopup"in i&&t(1,l=i.closePopup)},[n,l,s,o]}class ar extends z{constructor(e){super(),U(this,e,ur,ir,V,{name:0,closePopup:1})}}let Fe={tag:"Tag",title:"Title",siteName:"Site Name",url:"URL",accessDate:"Access Date",date:"Date",authors:"Authors"};function fr(r){let e,t=(r[1]??`Missing ${r[4]}`)+"",n,l,s;return{c(){e=O("span"),n=B(t),c(e,"class","svelte-1kx6gin"),S(e,"editorIsOpen",r[0]),S(e,"invalid",r[1]==null)},m(o,i){k(o,e,i),$(e,n),l||(s=Z(e,"click",r[5]),l=!0)},p(o,[i]){i&2&&t!==(t=(o[1]??`Missing ${o[4]}`)+"")&&ve(n,t),i&1&&S(e,"editorIsOpen",o[0]),i&2&&S(e,"invalid",o[1]==null)},i:v,o:v,d(o){o&&b(e),l=!1,s()}}}function cr(r,e,t){let n,l,s;const o=ee("card");X(r,o,h=>t(7,l=h));let i=ee("currentEditor");X(r,i,h=>t(8,s=h));let{formatter:u}=e,a=Fe[u.key],f=!1;function p(){f||se(i,s=u.key,s)}async function d(){setTimeout(()=>{t(0,f=s==u.key)})}return i.subscribe(d),r.$$set=h=>{"formatter"in h&&t(6,u=h.formatter)},r.$$.update=()=>{r.$$.dirty&192&&t(1,n=u.format(l))},[f,n,o,i,a,p,u,l]}class _e extends z{constructor(e){super(),U(this,e,cr,fr,V,{formatter:6})}}function dr(r){let e,t,n,l;return{c(){e=O("textarea"),c(e,"placeholder","Type text here"),e.value=t=r[1][r[0]],c(e,"class","svelte-1kv1l1c"),S(e,"invalid",!r[3])},m(s,o){k(s,e,o),r[7](e),n||(l=[Z(e,"input",r[6]),Z(e,"blur",r[8])],n=!0)},p(s,[o]){o&3&&t!==(t=s[1][s[0]])&&(e.value=t),o&8&&S(e,"invalid",!s[3])},i:v,o:v,d(s){s&&b(e),r[7](null),n=!1,fe(l)}}}function pr(r,e,t){let n,{key:l}=e;const s=ee("card");X(r,s,h=>t(1,n=h));const o=ee("history");let i;we(function(){i.focus()});let u;function a(){t(3,u=Ve(n[l]))}function f(){o.action("text",{text:i.value,key:l})}function p(h){x[h?"unshift":"push"](()=>{i=h,t(2,i)})}const d=()=>o.preventExtension();return r.$$set=h=>{"key"in h&&t(0,l=h.key)},r.$$.update=()=>{r.$$.dirty&3&&(n[l],a())},[l,n,i,u,s,o,f,p,d]}class hr extends z{constructor(e){super(),U(this,e,pr,dr,V,{key:0})}}function mr(r){let e,t,n,l,s,o,i,u;return{c(){e=O("div"),t=O("input"),n=H(),l=O("input"),s=H(),o=O("input"),c(t,"type","text"),c(t,"placeholder","Month"),c(t,"class","svelte-fg214s"),S(t,"invalid",!r[3]),c(l,"type","text"),c(l,"placeholder","Date"),c(l,"class","svelte-fg214s"),S(l,"invalid",!r[4]),c(o,"type","text"),c(o,"placeholder","Year"),c(o,"class","svelte-fg214s"),S(o,"invalid",!r[5]),c(e,"class","top svelte-fg214s")},m(a,f){k(a,e,f),$(e,t),ue(t,r[0]),r[16](t),$(e,n),$(e,l),ue(l,r[1]),r[19](l),$(e,s),$(e,o),ue(o,r[2]),r[22](o),i||(u=[Z(t,"input",r[15]),Z(t,"keydown",r[11]),Z(t,"blur",r[17]),Z(l,"input",r[18]),Z(l,"keydown",r[12]),Z(l,"blur",r[20]),Z(o,"input",r[21]),Z(o,"blur",r[23])],i=!0)},p(a,[f]){f&1&&t.value!==a[0]&&ue(t,a[0]),f&8&&S(t,"invalid",!a[3]),f&2&&l.value!==a[1]&&ue(l,a[1]),f&16&&S(l,"invalid",!a[4]),f&4&&o.value!==a[2]&&ue(o,a[2]),f&32&&S(o,"invalid",!a[5])},i:v,o:v,d(a){a&&b(e),r[16](null),r[19](null),r[22](null),i=!1,fe(u)}}}function Ke(r){return r==null?r:r.replace(/\D/g,"")}function gr(r,e,t){let n,{key:l}=e;const s=ee("card");X(r,s,N=>t(14,n=N));const o=ee("history");let i,u,a,f=n[l].month,p=n[l].day,d=n[l].year;function h(){o.action("editDate",{key:l,date:{month:f,day:p,year:d}})}function g(){t(0,f=Ke(f)),h()}function D(){t(1,p=Ke(p)),h()}function y(){t(2,d=Ke(d)),h()}function w(){let N=Ue(n[l]);t(3,i=N.month),t(4,u=N.day),t(5,a=N.year),t(0,f=n[l].month),t(1,p=n[l].day),t(2,d=n[l].year)}let R,T,q;we(function(){R.focus()});function F(N){(N.key==="ArrowRight"||N.key==="Enter"||N.key==="/")&&(N.preventDefault(),T.focus())}function j(N){(N.key==="ArrowRight"||N.key==="Enter"||N.key==="/")&&(N.preventDefault(),q.focus())}function re(){f=this.value,t(0,f)}function ie(N){x[N?"unshift":"push"](()=>{R=N,t(6,R)})}const E=()=>o.preventExtension();function K(){p=this.value,t(1,p)}function ce(N){x[N?"unshift":"push"](()=>{T=N,t(7,T)})}const ye=()=>o.preventExtension();function ae(){d=this.value,t(2,d)}function ke(N){x[N?"unshift":"push"](()=>{q=N,t(8,q)})}const Q=()=>o.preventExtension();return r.$$set=N=>{"key"in N&&t(13,l=N.key)},r.$$.update=()=>{r.$$.dirty&1&&g(),r.$$.dirty&2&&D(),r.$$.dirty&4&&y(),r.$$.dirty&24576&&(n[l],w())},[f,p,d,i,u,a,R,T,q,s,o,F,j,l,n,re,ie,E,K,ce,ye,ae,ke,Q]}class _r extends z{constructor(e){super(),U(this,e,gr,mr,V,{key:13})}}function $r(r){let e,t;return e=new J({props:{name:"organization"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function kr(r){let e,t;return e=new J({props:{name:"person"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function br(r){let e,t,n,l;const s=[kr,$r],o=[];function i(u,a){return u[0].isPerson?0:1}return e=i(r),t=o[e]=s[e](r),{c(){t.c(),n=Pe()},m(u,a){o[e].m(u,a),k(u,n,a),l=!0},p(u,a){let f=e;e=i(u),e!==f&&(Y(),_(o[f],1,1,()=>{o[f]=null}),G(),t=o[e],t||(t=o[e]=s[e](u),t.c()),m(t,1),t.m(n.parentNode,n))},i(u){l||(m(t),l=!0)},o(u){_(t),l=!1},d(u){o[e].d(u),u&&b(n)}}}function wr(r){let e,t;return e=new J({props:{name:"delete"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function vr(r){let e,t,n,l,s,o,i,u,a,f,p,d,h,g,D;return a=new te({props:{tooltip:r[0].isPerson?"Person":"Organization",$$slots:{default:[br]},$$scope:{ctx:r}}}),a.$on("click",r[11]),p=new te({props:{$$slots:{default:[wr]},$$scope:{ctx:r}}}),p.$on("click",r[4]),{c(){e=O("div"),t=O("input"),l=H(),s=O("div"),o=O("input"),u=H(),L(a.$$.fragment),f=H(),L(p.$$.fragment),c(t,"type","text"),t.value=n=r[0].name,c(t,"placeholder","name"),c(t,"class","svelte-1de26at"),c(o,"type","checkbox"),o.hidden=!0,o.value=i=r[0].isPerson,c(s,"class","right svelte-1de26at"),c(e,"class","top svelte-1de26at")},m(y,w){k(y,e,w),$(e,t),r[8](t),$(e,l),$(e,s),$(s,o),r[10](o),$(s,u),I(a,s,null),$(s,f),I(p,s,null),h=!0,g||(D=[Z(t,"input",r[5]),Z(t,"blur",r[9]),Z(o,"input",r[5])],g=!0)},p(y,[w]){(!h||w&1&&n!==(n=y[0].name)&&t.value!==n)&&(t.value=n),(!h||w&1&&i!==(i=y[0].isPerson))&&(o.value=i);const R={};w&1&&(R.tooltip=y[0].isPerson?"Person":"Organization"),w&4097&&(R.$$scope={dirty:w,ctx:y}),a.$set(R);const T={};w&4096&&(T.$$scope={dirty:w,ctx:y}),p.$set(T)},i(y){h||(m(a.$$.fragment,y),m(p.$$.fragment,y),y&&pe(()=>{h&&(d||(d=le(e,r[6],{},!0)),d.run(1))}),h=!0)},o(y){_(a.$$.fragment,y),_(p.$$.fragment,y),y&&(d||(d=le(e,r[6],{},!1)),d.run(0)),h=!1},d(y){y&&b(e),r[8](null),r[10](null),M(a),M(p),y&&d&&d.end(),g=!1,fe(D)}}}function Cr(r,e,t){let{author:n}=e,{index:l}=e;const s=ee("history");let o,i;we(function(){n.name==""&&o.focus()});function u(){s.action("deleteAuthor",{index:l})}function a(){s.action("editAuthor",{index:l,author:{name:o.value,isPerson:i.value,description:null,id:n.id}})}let f=de((D,y,w)=>`
      transform: scale(${y*100}%);
      height: ${y*w}px; 
    `,"sineOut",{preRun:D=>D.offsetHeight});function p(D){x[D?"unshift":"push"](()=>{o=D,t(1,o)})}const d=()=>s.preventExtension();function h(D){x[D?"unshift":"push"](()=>{i=D,t(2,i)})}const g=()=>t(0,n.isPerson=!n.isPerson,n);return r.$$set=D=>{"author"in D&&t(0,n=D.author),"index"in D&&t(7,l=D.index)},[n,o,i,s,u,a,f,l,p,d,h,g]}class yr extends z{constructor(e){super(),U(this,e,Cr,vr,V,{author:0,index:7})}}function mt(r,e,t){const n=r.slice();return n[10]=e[t],n[11]=e,n[12]=t,n}function gt(r,e){let t,n,l,s;function o(u){e[6](u,e[10],e[11],e[12])}let i={index:e[12]};return e[10]!==void 0&&(i.author=e[10]),n=new yr({props:i}),x.push(()=>We(n,"author",o)),{key:r,first:null,c(){t=O("li"),L(n.$$.fragment),this.first=t},m(u,a){k(u,t,a),I(n,t,null),s=!0},p(u,a){e=u;const f={};a&3&&(f.index=e[12]),!l&&a&3&&(l=!0,f.author=e[10],Be(()=>l=!1)),n.$set(f)},i(u){s||(m(n.$$.fragment,u),s=!0)},o(u){_(n.$$.fragment,u),s=!1},d(u){u&&b(t),M(n)}}}function Lr(r){let e;return{c(){e=B("Add author")},m(t,n){k(t,e,n)},d(t){t&&b(e)}}}function Ir(r){let e,t,n=[],l=new Map,s,o,i,u=r[1][r[0]];const a=f=>f[10].id;for(let f=0;f<u.length;f+=1){let p=mt(r,u,f),d=a(p);l.set(d,n[f]=gt(d,p))}return o=new be({props:{$$slots:{default:[Lr]},$$scope:{ctx:r}}}),o.$on("click",r[5]),{c(){e=O("div"),t=O("ul");for(let f=0;f<n.length;f+=1)n[f].c();s=H(),L(o.$$.fragment),c(t,"class","svelte-btldlk"),c(e,"class","top levelOne svelte-btldlk"),S(e,"invalid",!r[2])},m(f,p){k(f,e,p),$(e,t);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(t,null);$(t,s),I(o,t,null),r[7](e),i=!0},p(f,[p]){p&3&&(u=f[1][f[0]],Y(),n=Dt(n,p,a,1,f,u,l,t,At,gt,s,mt),G());const d={};p&8192&&(d.$$scope={dirty:p,ctx:f}),o.$set(d),(!i||p&4)&&S(e,"invalid",!f[2])},i(f){if(!i){for(let p=0;p<u.length;p+=1)m(n[p]);m(o.$$.fragment,f),i=!0}},o(f){for(let p=0;p<n.length;p+=1)_(n[p]);_(o.$$.fragment,f),i=!1},d(f){f&&b(e);for(let p=0;p<n.length;p+=1)n[p].d();M(o),r[7](null)}}}function Mr(r,e,t){let n,{key:l}=e;const s=ee("card");X(r,s,h=>t(1,n=h));const o=ee("history");function i(){o.action("addAuthor",{}),setTimeout(function(){f.parentNode.scrollBy({top:f.parentNode.scrollHeight,behavior:"smooth"})},Je)}let u;function a(){t(2,u=yn(n[l]))}let f;function p(h,g,D,y){D[y]=h,s.set(n)}function d(h){x[h?"unshift":"push"](()=>{f=h,t(3,f)})}return r.$$set=h=>{"key"in h&&t(0,l=h.key)},r.$$.update=()=>{r.$$.dirty&3&&(n[l],a())},[l,n,u,f,s,i,p,d]}class Pr extends z{constructor(e){super(),U(this,e,Mr,Ir,V,{key:0})}}function Er(r){let e,t,n,l,s=Fe[r[0]]+"",o,i,u,a,f,p,d,h;var g=r[1];function D(y){return{props:{key:y[0]}}}return g&&(a=Ze(g,D(r))),{c(){e=O("div"),t=O("div"),n=O("h1"),l=B("Edit "),o=B(s),i=H(),u=O("div"),a&&L(a.$$.fragment),c(n,"class","svelte-b0d6z9"),c(u,"class","content svelte-b0d6z9"),c(t,"class","top svelte-b0d6z9"),c(e,"class","center svelte-b0d6z9")},m(y,w){k(y,e,w),$(e,t),$(t,n),$(n,l),$(n,o),$(t,i),$(t,u),a&&I(a,u,null),p=!0,d||(h=[Tt(zt.call(null,t)),Z(t,"outclick",r[4])],d=!0)},p(y,[w]){(!p||w&1)&&s!==(s=Fe[y[0]]+"")&&ve(o,s);const R={};if(w&1&&(R.key=y[0]),w&2&&g!==(g=y[1])){if(a){Y();const T=a;_(T.$$.fragment,1,0,()=>{M(T,1)}),G()}g?(a=Ze(g,D(y)),L(a.$$.fragment),m(a.$$.fragment,1),I(a,u,null)):a=null}else g&&a.$set(R)},i(y){p||(a&&m(a.$$.fragment,y),pe(()=>{p&&(f||(f=le(t,r[3],{},!0)),f.run(1))}),p=!0)},o(y){a&&_(a.$$.fragment,y),f||(f=le(t,r[3],{},!1)),f.run(0),p=!1},d(y){y&&b(e),a&&M(a),y&&f&&f.end(),d=!1,fe(h)}}}function Or(r,e,t){let n,{key:l}=e,s=ee("currentEditor");X(r,s,a=>t(5,n=a));let o=de((a,f)=>`
      transform: translateY(${(1-f)*100}%) scale(${f});
    `,"sineOut",{durationMultiplier:2}),i;function u(){se(s,n=null,n)}return r.$$set=a=>{"key"in a&&t(0,l=a.key)},r.$$.update=()=>{r.$$.dirty&1&&(l=="authors"?t(1,i=Pr):l=="date"||l=="accessDate"?t(1,i=_r):t(1,i=hr))},[l,i,s,o,u]}class Tr extends z{constructor(e){super(),U(this,e,Or,Er,V,{key:0})}}function Dr(r){let e,t=r[0].text+"",n;return{c(){e=O("span"),n=B(t),c(e,"class","svelte-10oszq4"),S(e,"underline",r[0].underline),S(e,"highlight",r[0].highlight),S(e,"highlight-underline",r[0].underline&&r[0].highlight)},m(l,s){k(l,e,s),$(e,n)},p(l,[s]){s&1&&t!==(t=l[0].text+"")&&ve(n,t),s&1&&S(e,"underline",l[0].underline),s&1&&S(e,"highlight",l[0].highlight),s&1&&S(e,"highlight-underline",l[0].underline&&l[0].highlight)},i:v,o:v,d(l){l&&b(e)}}}function Ar(r,e,t){ee("currentTool");let{run:n}=e;return r.$$set=l=>{"run"in l&&t(0,n=l.run)},[n]}class Hr extends z{constructor(e){super(),U(this,e,Ar,Dr,V,{run:0})}}function _t(r,e,t){const n=r.slice();return n[1]=e[t],n}function $t(r){let e,t;return e=new Hr({props:{run:r[1]}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p(n,l){const s={};l&1&&(s.run=n[1]),e.$set(s)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Rr(r){let e,t,n=r[0],l=[];for(let o=0;o<n.length;o+=1)l[o]=$t(_t(r,n,o));const s=o=>_(l[o],1,1,()=>{l[o]=null});return{c(){e=O("p");for(let o=0;o<l.length;o+=1)l[o].c();c(e,"class","svelte-k4fhe6")},m(o,i){k(o,e,i);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);t=!0},p(o,[i]){if(i&1){n=o[0];let u;for(u=0;u<n.length;u+=1){const a=_t(o,n,u);l[u]?(l[u].p(a,i),m(l[u],1)):(l[u]=$t(a),l[u].c(),m(l[u],1),l[u].m(e,null))}for(Y(),u=n.length;u<l.length;u+=1)s(u);G()}},i(o){if(!t){for(let i=0;i<n.length;i+=1)m(l[i]);t=!0}},o(o){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)_(l[i]);t=!1},d(o){o&&b(e),Ye(l,o)}}}function Sr(r,e,t){let{runs:n}=e;return r.$$set=l=>{"runs"in l&&t(0,n=l.runs)},[n]}class Nr extends z{constructor(e){super(),U(this,e,Sr,Rr,V,{runs:0})}}function kt(r,e,t){const n=r.slice();return n[9]=e[t],n}function bt(r){let e,t;return e=new Nr({props:{runs:r[9]}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p(n,l){const s={};l&4&&(s.runs=n[9]),e.$set(s)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function zr(r){let e,t,n=r[2].paras,l=[];for(let o=0;o<n.length;o+=1)l[o]=bt(kt(r,n,o));const s=o=>_(l[o],1,1,()=>{l[o]=null});return{c(){e=O("article");for(let o=0;o<l.length;o+=1)l[o].c();S(e,"shrunk",r[0])},m(o,i){k(o,e,i);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);r[5](e),t=!0},p(o,[i]){if(i&4){n=o[2].paras;let u;for(u=0;u<n.length;u+=1){const a=kt(o,n,u);l[u]?(l[u].p(a,i),m(l[u],1)):(l[u]=bt(a),l[u].c(),m(l[u],1),l[u].m(e,null))}for(Y(),u=n.length;u<l.length;u+=1)s(u);G()}(!t||i&1)&&S(e,"shrunk",o[0])},i(o){if(!t){for(let i=0;i<n.length;i+=1)m(l[i]);t=!0}},o(o){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)_(l[i]);t=!1},d(o){o&&b(e),Ye(l,o),r[5](null)}}}function qe(r){if(r.nodeName==="SPAN")return r;if(r.nodeName==="P")return qe(r.firstChild);if(r.nodeName==="#text")return qe(r.parentNode);throw new Error("Unexpected node type")}function Ur(r,e,t){let n,l,{shrunk:s}=e,o=ee("currentTool");X(r,o,d=>t(6,n=d));const i=ee("card");X(r,i,d=>t(2,l=d));const u=ee("history");let a;function f(){if(n==null)return;const d=window.getSelection();if(d.rangeCount==0)return;const h=d.getRangeAt(0),g=h.startContainer,D=h.endContainer,y=h.startOffset,w=h.endOffset;if(!(a.contains(g)&&a.contains(D)))return;let R=qe(g),T=qe(D),q=R.parentElement,F=T.parentElement,j=Array.from(q.parentElement.children).indexOf(q),re=Array.from(F.parentElement.children).indexOf(F),ie=Array.from(q.children).indexOf(R),E=Array.from(F.children).indexOf(T);j==re&&ie==E&&y==w||(u.action("editPara",{tool:n,index:{startP:j,endP:re,startSpan:ie,endSpan:E,startOffset:y,endOffset:w}}),d.empty())}we(function(){document.addEventListener("mouseup",f)});function p(d){x[d?"unshift":"push"](()=>{a=d,t(1,a)})}return r.$$set=d=>{"shrunk"in d&&t(0,s=d.shrunk)},[s,a,l,o,i,p]}class Vr extends z{constructor(e){super(),U(this,e,Ur,zr,V,{shrunk:0})}}function Zr(r){let e,t;const n=r[3].default,l=De(n,r,r[2],null);return{c(){e=O("div"),l&&l.c(),c(e,"class","svelte-15ohuee"),S(e,"column",r[0]=="column"),S(e,"floating",r[1])},m(s,o){k(s,e,o),l&&l.m(e,null),t=!0},p(s,[o]){l&&l.p&&(!t||o&4)&&Ae(l,n,s,s[2],t?Re(n,s[2],o,null):He(s[2]),null),(!t||o&1)&&S(e,"column",s[0]=="column"),(!t||o&2)&&S(e,"floating",s[1])},i(s){t||(m(l,s),t=!0)},o(s){_(l,s),t=!1},d(s){s&&b(e),l&&l.d(s)}}}function qr(r,e,t){let{$$slots:n={},$$scope:l}=e,{direction:s="row"}=e,{floating:o=!1}=e;return r.$$set=i=>{"direction"in i&&t(0,s=i.direction),"floating"in i&&t(1,o=i.floating),"$$scope"in i&&t(2,l=i.$$scope)},[s,o,l,n]}class Me extends z{constructor(e){super(),U(this,e,qr,Zr,V,{direction:0,floating:1})}}function jr(r){let e,t;return e=new J({props:{name:"vault"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Kr(r){let e,t;return e=new te({props:{tooltip:r[3]?"Hide vault controls":"Show vault controls",selected:r[3],$$slots:{default:[jr]},$$scope:{ctx:r}}}),e.$on("click",r[11]),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p(n,l){const s={};l&8&&(s.tooltip=n[3]?"Hide vault controls":"Show vault controls"),l&8&&(s.selected=n[3]),l&4194304&&(s.$$scope={dirty:l,ctx:n}),e.$set(s)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Wr(r){let e,t,n,l,s,o;return t=new Me({props:{floating:r[1],$$slots:{default:[Qr]},$$scope:{ctx:r}}}),l=new Me({props:{floating:r[1],$$slots:{default:[es]},$$scope:{ctx:r}}}),{c(){e=O("div"),L(t.$$.fragment),n=H(),L(l.$$.fragment),c(e,"class","subbar svelte-mdpw2b")},m(i,u){k(i,e,u),I(t,e,null),$(e,n),I(l,e,null),o=!0},p(i,u){const a={};u&2&&(a.floating=i[1]),u&4194368&&(a.$$scope={dirty:u,ctx:i}),t.$set(a);const f={};u&2&&(f.floating=i[1]),u&4194309&&(f.$$scope={dirty:u,ctx:i}),l.$set(f)},i(i){o||(m(t.$$.fragment,i),m(l.$$.fragment,i),i&&pe(()=>{o&&(s||(s=le(e,r[9],{},!0)),s.run(1))}),o=!0)},o(i){_(t.$$.fragment,i),_(l.$$.fragment,i),i&&(s||(s=le(e,r[9],{},!1)),s.run(0)),o=!1},d(i){i&&b(e),M(t),M(l),i&&s&&s.end()}}}function Br(r){let e,t,n,l,s,o;return t=new Me({props:{floating:r[1],$$slots:{default:[ls]},$$scope:{ctx:r}}}),l=new Me({props:{$$slots:{default:[os]},$$scope:{ctx:r}}}),{c(){e=O("div"),L(t.$$.fragment),n=H(),L(l.$$.fragment),c(e,"class","subbar svelte-mdpw2b")},m(i,u){k(i,e,u),I(t,e,null),$(e,n),I(l,e,null),o=!0},p(i,u){const a={};u&2&&(a.floating=i[1]),u&4194352&&(a.$$scope={dirty:u,ctx:i}),t.$set(a);const f={};u&4194352&&(f.$$scope={dirty:u,ctx:i}),l.$set(f)},i(i){o||(m(t.$$.fragment,i),m(l.$$.fragment,i),i&&pe(()=>{o&&(s||(s=le(e,r[9],{},!0)),s.run(1))}),o=!0)},o(i){_(t.$$.fragment,i),_(l.$$.fragment,i),i&&(s||(s=le(e,r[9],{},!1)),s.run(0)),o=!1},d(i){i&&b(e),M(t),M(l),i&&s&&s.end()}}}function Fr(r){let e,t;return e=new J({props:{name:"cursor"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Yr(r){let e,t;return e=new J({props:{name:"highlight"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Gr(r){let e,t;return e=new J({props:{name:"underline"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Jr(r){let e,t;return e=new J({props:{name:"eraser"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Qr(r){let e,t,n,l,s,o,i,u;return e=new te({props:{selected:r[6]==null,tooltip:"Mouse",$$slots:{default:[Fr]},$$scope:{ctx:r}}}),e.$on("click",r[16]),n=new te({props:{selected:r[6]=="highlight",tooltip:"Highlight",$$slots:{default:[Yr]},$$scope:{ctx:r}}}),n.$on("click",r[17]),s=new te({props:{selected:r[6]=="underline",tooltip:"Underline",$$slots:{default:[Gr]},$$scope:{ctx:r}}}),s.$on("click",r[18]),i=new te({props:{selected:r[6]=="eraser",tooltip:"Eraser",$$slots:{default:[Jr]},$$scope:{ctx:r}}}),i.$on("click",r[19]),{c(){L(e.$$.fragment),t=H(),L(n.$$.fragment),l=H(),L(s.$$.fragment),o=H(),L(i.$$.fragment)},m(a,f){I(e,a,f),k(a,t,f),I(n,a,f),k(a,l,f),I(s,a,f),k(a,o,f),I(i,a,f),u=!0},p(a,f){const p={};f&64&&(p.selected=a[6]==null),f&4194304&&(p.$$scope={dirty:f,ctx:a}),e.$set(p);const d={};f&64&&(d.selected=a[6]=="highlight"),f&4194304&&(d.$$scope={dirty:f,ctx:a}),n.$set(d);const h={};f&64&&(h.selected=a[6]=="underline"),f&4194304&&(h.$$scope={dirty:f,ctx:a}),s.$set(h);const g={};f&64&&(g.selected=a[6]=="eraser"),f&4194304&&(g.$$scope={dirty:f,ctx:a}),i.$set(g)},i(a){u||(m(e.$$.fragment,a),m(n.$$.fragment,a),m(s.$$.fragment,a),m(i.$$.fragment,a),u=!0)},o(a){_(e.$$.fragment,a),_(n.$$.fragment,a),_(s.$$.fragment,a),_(i.$$.fragment,a),u=!1},d(a){M(e,a),a&&b(t),M(n,a),a&&b(l),M(s,a),a&&b(o),M(i,a)}}}function Xr(r){let e,t;return e=new J({props:{name:"merge"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function xr(r){let e,t;return e=new J({props:{name:"shrink"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function es(r){let e,t,n,l;return e=new te({props:{disabled:r[2].length<=1,tooltip:r[2].length<=1?"Paragraphs merged":"Merge paragraphs",$$slots:{default:[Xr]},$$scope:{ctx:r}}}),e.$on("click",r[10]),n=new te({props:{selected:r[0],tooltip:r[0]?"Expand text":"Shrink text",$$slots:{default:[xr]},$$scope:{ctx:r}}}),n.$on("click",r[20]),{c(){L(e.$$.fragment),t=H(),L(n.$$.fragment)},m(s,o){I(e,s,o),k(s,t,o),I(n,s,o),l=!0},p(s,o){const i={};o&4&&(i.disabled=s[2].length<=1),o&4&&(i.tooltip=s[2].length<=1?"Paragraphs merged":"Merge paragraphs"),o&4194304&&(i.$$scope={dirty:o,ctx:s}),e.$set(i);const u={};o&1&&(u.selected=s[0]),o&1&&(u.tooltip=s[0]?"Expand text":"Shrink text"),o&4194304&&(u.$$scope={dirty:o,ctx:s}),n.$set(u)},i(s){l||(m(e.$$.fragment,s),m(n.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(n.$$.fragment,s),l=!1},d(s){M(e,s),s&&b(t),M(n,s)}}}function ts(r){let e,t;return e=new J({props:{name:"login"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function ns(r){let e,t;return e=new J({props:{name:"person"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function ls(r){let e,t,n,l;return e=new te({props:{tooltip:r[4].loggedIn?"Log out":"Log in",selected:!r[4].loggedIn,selectedColor:!1,$$slots:{default:[ts]},$$scope:{ctx:r}}}),e.$on("click",r[12]),n=new te({props:{tooltip:"Account",disabled:!r[4].loggedIn,$$slots:{default:[ns]},$$scope:{ctx:r}}}),n.$on("click",r[13]),{c(){L(e.$$.fragment),t=H(),L(n.$$.fragment)},m(s,o){I(e,s,o),k(s,t,o),I(n,s,o),l=!0},p(s,o){const i={};o&16&&(i.tooltip=s[4].loggedIn?"Log out":"Log in"),o&16&&(i.selected=!s[4].loggedIn),o&4194304&&(i.$$scope={dirty:o,ctx:s}),e.$set(i);const u={};o&16&&(u.disabled=!s[4].loggedIn),o&4194304&&(u.$$scope={dirty:o,ctx:s}),n.$set(u)},i(s){l||(m(e.$$.fragment,s),m(n.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(n.$$.fragment,s),l=!1},d(s){M(e,s),s&&b(t),M(n,s)}}}function rs(r){let e,t;return e=new J({props:{name:"upload"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function ss(r){let e,t;return e=new J({props:{name:"robot"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function os(r){let e,t,n,l;return e=new te({props:{tooltip:"Upload to arguflow",disabled:!r[4].loggedIn,$$slots:{default:[rs]},$$scope:{ctx:r}}}),e.$on("click",r[14]),n=new te({props:{tooltip:"Auto cut",disabled:!r[4].loggedIn,$$slots:{default:[ss]},$$scope:{ctx:r}}}),n.$on("click",r[15]),{c(){L(e.$$.fragment),t=H(),L(n.$$.fragment)},m(s,o){I(e,s,o),k(s,t,o),I(n,s,o),l=!0},p(s,o){const i={};o&16&&(i.disabled=!s[4].loggedIn),o&4194304&&(i.$$scope={dirty:o,ctx:s}),e.$set(i);const u={};o&16&&(u.disabled=!s[4].loggedIn),o&4194304&&(u.$$scope={dirty:o,ctx:s}),n.$set(u)},i(s){l||(m(e.$$.fragment,s),m(n.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(n.$$.fragment,s),l=!1},d(s){M(e,s),s&&b(t),M(n,s)}}}function is(r){let e,t,n,l,s,o;t=new Me({props:{floating:r[1],$$slots:{default:[Kr]},$$scope:{ctx:r}}});const i=[Br,Wr],u=[];function a(f,p){return f[3]?0:1}return l=a(r),s=u[l]=i[l](r),{c(){e=O("div"),L(t.$$.fragment),n=H(),s.c(),c(e,"class","toolbar levelOne svelte-mdpw2b")},m(f,p){k(f,e,p),I(t,e,null),$(e,n),u[l].m(e,null),o=!0},p(f,[p]){const d={};p&2&&(d.floating=f[1]),p&4194312&&(d.$$scope={dirty:p,ctx:f}),t.$set(d);let h=l;l=a(f),l===h?u[l].p(f,p):(Y(),_(u[h],1,1,()=>{u[h]=null}),G(),s=u[l],s?s.p(f,p):(s=u[l]=i[l](f),s.c()),m(s,1),s.m(e,null))},i(f){o||(m(t.$$.fragment,f),m(s),o=!0)},o(f){_(t.$$.fragment,f),_(s),o=!1},d(f){f&&b(e),M(t),u[l].d()}}}function us(r,e,t){let n,l,s;X(r,Ee,E=>t(4,n=E)),X(r,Ie,E=>t(5,l=E));let o=ee("currentTool");X(r,o,E=>t(6,s=E));const i=ee("history");let{floating:u}=e,{shrunk:a}=e;function f(){let E="";for(let K of d)for(let ce of K)E+=ce.text;if(E.length==0){W.addErrorMessage("No text");return}if(E.length>=4300){W.addErrorMessage(`Too much text, ${E.length}/4300 characters`);return}if(E.length<=200){W.addErrorMessage(`Too little text ${E.length}/200 characters`);return}W.addMessage("Auto cutting..."),qn(E).then(K=>{W.addMessage("Done!"),i.action("autoCutParas",Kn(K.completion))}).catch(K=>{W.addError("auto cut",K)})}let p=de((E,K)=>`
      transform: scale(${K});
      transform-origin: 0% 50%;
    `,"sineOut",{durationMultiplier:2}),{paras:d}=e;function h(){i.action("condenseParas",{})}let g=!1;const D=()=>t(3,g=!g),y=()=>{n.loggedIn?Zn().then(()=>{W.addMessage("Logged out")}).catch(E=>{W.addError("logout",E)}):(l.push("login"),Ie.set(l))},w=()=>{jn().then(E=>{window.open(Rn+E,"_blank")}).catch(E=>{W.addError("user info",E)})},R=()=>{l.push("upload"),Ie.set(l)},T=()=>{f()},q=()=>se(o,s=null,s),F=()=>se(o,s="highlight",s),j=()=>se(o,s="underline",s),re=()=>se(o,s="eraser",s),ie=()=>t(0,a=!a);return r.$$set=E=>{"floating"in E&&t(1,u=E.floating),"shrunk"in E&&t(0,a=E.shrunk),"paras"in E&&t(2,d=E.paras)},[a,u,d,g,n,l,s,o,f,p,h,D,y,w,R,T,q,F,j,re,ie]}class as extends z{constructor(e){super(),U(this,e,us,is,V,{floating:1,shrunk:0,paras:2})}}function fs(r){let e,t,n,l;return{c(){e=O("div"),t=B(r[0]),c(e,"class","message svelte-1ivoti1"),S(e,"error",r[1])},m(s,o){k(s,e,o),$(e,t),l=!0},p(s,[o]){(!l||o&1)&&ve(t,s[0]),(!l||o&2)&&S(e,"error",s[1])},i(s){l||(s&&pe(()=>{l&&(n||(n=le(e,r[2],{},!0)),n.run(1))}),l=!0)},o(s){s&&(n||(n=le(e,r[2],{},!1)),n.run(0)),l=!1},d(s){s&&b(e),s&&n&&n.end()}}}function cs(r,e,t){let{text:n}=e,{error:l}=e,s=de((o,i,u)=>`
        transform: scale(${i});
        height: ${i*u}px;
        padding: calc(var(--padding-small) * ${i}) calc(var(--padding) * ${i}); 
      `,"sineOut",{preRun:o=>o.getBoundingClientRect().height});return r.$$set=o=>{"text"in o&&t(0,n=o.text),"error"in o&&t(1,l=o.error)},[n,l,s]}class ds extends z{constructor(e){super(),U(this,e,cs,fs,V,{text:0,error:1})}}function wt(r,e,t){const n=r.slice();return n[5]=e[t],n}function vt(r){let e,t,n,l;const s=[hs,ps],o=[];function i(u,a){return u[0]?1:0}return e=i(r),t=o[e]=s[e](r),{c(){t.c(),n=Pe()},m(u,a){o[e].m(u,a),k(u,n,a),l=!0},p(u,a){let f=e;e=i(u),e===f?o[e].p(u,a):(Y(),_(o[f],1,1,()=>{o[f]=null}),G(),t=o[e],t?t.p(u,a):(t=o[e]=s[e](u),t.c()),m(t,1),t.m(n.parentNode,n))},i(u){l||(m(t),l=!0)},o(u){_(t),l=!1},d(u){o[e].d(u),u&&b(n)}}}function ps(r){let e,t,n;return{c(){e=O("div"),c(e,"class","mini svelte-rb0mdd")},m(l,s){k(l,e,s),n=!0},p:v,i(l){n||(pe(()=>{n&&(t||(t=le(e,r[3],{},!0)),t.run(1))}),n=!0)},o(l){t||(t=le(e,r[3],{},!1)),t.run(0),n=!1},d(l){l&&b(e),l&&t&&t.end()}}}function hs(r){let e,t=[],n=new Map,l,s,o=r[1];const i=u=>u[5].id;for(let u=0;u<o.length;u+=1){let a=wt(r,o,u),f=i(a);n.set(f,t[u]=Ct(f,a))}return{c(){e=O("ul");for(let u=0;u<t.length;u+=1)t[u].c();c(e,"class","svelte-rb0mdd")},m(u,a){k(u,e,a);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);s=!0},p(u,a){a&2&&(o=u[1],Y(),t=Dt(t,a,i,1,u,o,n,e,At,Ct,null,wt),G())},i(u){if(!s){for(let a=0;a<o.length;a+=1)m(t[a]);pe(()=>{s&&(l||(l=le(e,r[2],{},!0)),l.run(1))}),s=!0}},o(u){for(let a=0;a<t.length;a+=1)_(t[a]);l||(l=le(e,r[2],{},!1)),l.run(0),s=!1},d(u){u&&b(e);for(let a=0;a<t.length;a+=1)t[a].d();u&&l&&l.end()}}}function Ct(r,e){let t,n,l;const s=[e[5]];let o={};for(let i=0;i<s.length;i+=1)o=Pt(o,s[i]);return n=new ds({props:o}),{key:r,first:null,c(){t=Pe(),L(n.$$.fragment),this.first=t},m(i,u){k(i,t,u),I(n,i,u),l=!0},p(i,u){e=i;const a=u&2?Et(s,[Ot(e[5])]):{};n.$set(a)},i(i){l||(m(n.$$.fragment,i),l=!0)},o(i){_(n.$$.fragment,i),l=!1},d(i){i&&b(t),M(n,i)}}}function ms(r){let e,t,n,l,s=r[1].length>0&&vt(r);return{c(){e=O("div"),s&&s.c(),c(e,"class","top svelte-rb0mdd"),S(e,"minimized",r[0])},m(o,i){k(o,e,i),s&&s.m(e,null),t=!0,n||(l=Z(e,"click",r[4]),n=!0)},p(o,[i]){o[1].length>0?s?(s.p(o,i),i&2&&m(s,1)):(s=vt(o),s.c(),m(s,1),s.m(e,null)):s&&(Y(),_(s,1,1,()=>{s=null}),G()),(!t||i&1)&&S(e,"minimized",o[0])},i(o){t||(m(s),t=!0)},o(o){_(s),t=!1},d(o){o&&b(e),s&&s.d(),n=!1,l()}}}function gs(r,e,t){let n;X(r,Pn,u=>t(1,n=u));let l=!1,s=de((u,a)=>`
      transform: scale(${a});
    `,"sineIn"),o=de((u,a)=>`
      transform: scale(${a});
    `,"sineOut");return[l,n,s,o,()=>t(0,l=!l)]}class _s extends z{constructor(e){super(),U(this,e,gs,ms,V,{})}}const{window:$s}=Cn;function yt(r){let e,t;return e=new te({props:{tooltip:"Popout",$$slots:{default:[ks]},$$scope:{ctx:r}}}),e.$on("click",Is),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p(n,l){const s={};l&1073741824&&(s.$$scope={dirty:l,ctx:n}),e.$set(s)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function ks(r){let e,t;return e=new J({props:{name:"popout"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function bs(r){let e,t;return e=new J({props:{name:"copy"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function ws(r){let e,t;return e=new J({props:{name:"reload"}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function vs(r){let e,t,n,l,s,o=r[0]=="popup"&&yt(r);return t=new te({props:{tooltip:"Copy card",$$slots:{default:[bs]},$$scope:{ctx:r}}}),t.$on("click",r[17]),l=new te({props:{tooltip:"Reset card",$$slots:{default:[ws]},$$scope:{ctx:r}}}),l.$on("click",r[16]),{c(){o&&o.c(),e=H(),L(t.$$.fragment),n=H(),L(l.$$.fragment)},m(i,u){o&&o.m(i,u),k(i,e,u),I(t,i,u),k(i,n,u),I(l,i,u),s=!0},p(i,u){i[0]=="popup"?o?(o.p(i,u),u&1&&m(o,1)):(o=yt(i),o.c(),m(o,1),o.m(e.parentNode,e)):o&&(Y(),_(o,1,1,()=>{o=null}),G());const a={};u&1073741824&&(a.$$scope={dirty:u,ctx:i}),t.$set(a);const f={};u&1073741824&&(f.$$scope={dirty:u,ctx:i}),l.$set(f)},i(i){s||(m(o),m(t.$$.fragment,i),m(l.$$.fragment,i),s=!0)},o(i){_(o),_(t.$$.fragment,i),_(l.$$.fragment,i),s=!1},d(i){o&&o.d(i),i&&b(e),M(t,i),i&&b(n),M(l,i)}}}function Lt(r){let e,t,n,l,s,o,i,u,a,f,p,d,h,g,D,y,w,R,T,q,F,j,re,ie,E,K,ce,ye,ae,ke,Q,N,C,he,Le,Qe;function Ut(A){r[19](A)}let Xe={placeholder:"Type tag here..."};r[7].tag!==void 0&&(Xe.text=r[7].tag),n=new An({props:Xe}),r[18](n),x.push(()=>We(n,"text",Ut)),u=new _e({props:{formatter:ne.bigAuthors}}),f=new _e({props:{formatter:ne.bigDate}}),d=new _e({props:{formatter:ne.authors}}),g=new _e({props:{formatter:ne.date}}),y=new _e({props:{formatter:ne.title}}),R=new _e({props:{formatter:ne.siteName}}),q=new _e({props:{formatter:ne.url}}),j=new _e({props:{formatter:ne.accessDate}});function Vt(A){r[21](A)}let xe={paras:r[7].paras,floating:r[4]};r[6]!==void 0&&(xe.shrunk=r[6]),K=new as({props:xe}),x.push(()=>We(K,"shrunk",Vt)),ae=new Vr({props:{shrunk:r[6]}});const et=[ys,Cs],me=[];function tt(A,oe){return A[8].length>0?0:A[9]!=null?1:-1}return~(Q=tt(r))&&(N=me[Q]=et[Q](r)),{c(){e=O("div"),t=O("div"),L(n.$$.fragment),s=H(),o=O("div"),i=O("span"),L(u.$$.fragment),a=B(", "),L(f.$$.fragment),p=B(`\r
        [`),L(d.$$.fragment),h=B(". "),L(g.$$.fragment),D=B('. "'),L(y.$$.fragment),w=B('". '),L(R.$$.fragment),T=B(". "),L(q.$$.fragment),F=B(". "),L(j.$$.fragment),re=B(".]"),ie=H(),E=O("div"),L(K.$$.fragment),ye=H(),L(ae.$$.fragment),ke=H(),N&&N.c(),C=Pe(),c(t,"class","tag svelte-1hsdvli"),S(t,"moreWidth",r[0]!="popup"),c(i,"class","bigCite svelte-1hsdvli"),c(o,"class","cite svelte-1hsdvli"),c(E,"class","paras svelte-1hsdvli"),c(e,"class","card svelte-1hsdvli")},m(A,oe){k(A,e,oe),$(e,t),I(n,t,null),$(e,s),$(e,o),$(o,i),I(u,i,null),$(i,a),I(f,i,null),$(o,p),I(d,o,null),$(o,h),I(g,o,null),$(o,D),I(y,o,null),$(o,w),I(R,o,null),$(o,T),I(q,o,null),$(o,F),I(j,o,null),$(o,re),r[20](o),$(e,ie),$(e,E),I(K,E,null),$(E,ye),I(ae,E,null),r[22](e),k(A,ke,oe),~Q&&me[Q].m(A,oe),k(A,C,oe),he=!0,Le||(Qe=Z(e,"scroll",r[14]),Le=!0)},p(A,oe){const nt={};!l&&oe&128&&(l=!0,nt.text=A[7].tag,Be(()=>l=!1)),n.$set(nt),(!he||oe&1)&&S(t,"moreWidth",A[0]!="popup");const Ne={};oe&128&&(Ne.paras=A[7].paras),oe&16&&(Ne.floating=A[4]),!ce&&oe&64&&(ce=!0,Ne.shrunk=A[6],Be(()=>ce=!1)),K.$set(Ne);const lt={};oe&64&&(lt.shrunk=A[6]),ae.$set(lt);let je=Q;Q=tt(A),Q===je?~Q&&me[Q].p(A,oe):(N&&(Y(),_(me[je],1,1,()=>{me[je]=null}),G()),~Q?(N=me[Q],N?N.p(A,oe):(N=me[Q]=et[Q](A),N.c()),m(N,1),N.m(C.parentNode,C)):N=null)},i(A){he||(m(n.$$.fragment,A),m(u.$$.fragment,A),m(f.$$.fragment,A),m(d.$$.fragment,A),m(g.$$.fragment,A),m(y.$$.fragment,A),m(R.$$.fragment,A),m(q.$$.fragment,A),m(j.$$.fragment,A),m(K.$$.fragment,A),m(ae.$$.fragment,A),m(N),he=!0)},o(A){_(n.$$.fragment,A),_(u.$$.fragment,A),_(f.$$.fragment,A),_(d.$$.fragment,A),_(g.$$.fragment,A),_(y.$$.fragment,A),_(R.$$.fragment,A),_(q.$$.fragment,A),_(j.$$.fragment,A),_(K.$$.fragment,A),_(ae.$$.fragment,A),_(N),he=!1},d(A){A&&b(e),r[18](null),M(n),M(u),M(f),M(d),M(g),M(y),M(R),M(q),M(j),r[20](null),M(K),M(ae),r[22](null),A&&b(ke),~Q&&me[Q].d(A),A&&b(C),Le=!1,Qe()}}}function Cs(r){let e,t;return e=new Tr({props:{key:r[9]}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p(n,l){const s={};l&512&&(s.key=n[9]),e.$set(s)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function ys(r){let e,t;return e=new ar({props:{name:r[8][0],closePopup:r[23]}}),{c(){L(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p(n,l){const s={};l&256&&(s.name=n[8][0]),l&256&&(s.closePopup=n[23]),e.$set(s)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Ls(r){let e,t,n,l,s,o,i,u,a;t=new _s({}),s=new Me({props:{floating:r[3],$$slots:{default:[vs]},$$scope:{ctx:r}}});let f=r[7]&&Lt(r);return{c(){e=O("div"),L(t.$$.fragment),n=H(),l=O("div"),L(s.$$.fragment),o=H(),f&&f.c(),c(l,"class","buttons levelOne svelte-1hsdvli"),c(e,"class","container svelte-1hsdvli"),S(e,"fixedWidth",r[0]=="popup")},m(p,d){k(p,e,d),I(t,e,null),$(e,n),$(e,l),I(s,l,null),$(e,o),f&&f.m(e,null),i=!0,u||(a=Z($s,"keydown",r[15]),u=!0)},p(p,[d]){const h={};d&8&&(h.floating=p[3]),d&1073741825&&(h.$$scope={dirty:d,ctx:p}),s.$set(h),p[7]?f?(f.p(p,d),d&128&&m(f,1)):(f=Lt(p),f.c(),m(f,1),f.m(e,null)):f&&(Y(),_(f,1,1,()=>{f=null}),G()),(!i||d&1)&&S(e,"fixedWidth",p[0]=="popup")},i(p){i||(m(t.$$.fragment,p),m(s.$$.fragment,p),m(f),i=!0)},o(p){_(t.$$.fragment,p),_(s.$$.fragment,p),_(f),i=!1},d(p){p&&b(e),M(t),M(s),f&&f.d(),u=!1,a()}}}function It(){return new Promise((r,e)=>{chrome.runtime.sendMessage({message:"getCardData"},function(t){r(t.card)})})}async function Is(){let e=(await chrome.system.display.getInfo())[0].bounds.width;chrome.windows.create({url:chrome.runtime.getURL("src/pages/options/index.html"),type:"popup",width:600,height:800,left:e-600,top:0}),window.close()}function Ms(r,e,t){let n,l,s,o,i;X(r,Ie,C=>t(8,o=C));let{context:u}=e,a=$e(null);X(r,a,C=>t(24,s=C)),Oe("currentTool",a);let f=$e(null);X(r,f,C=>t(9,i=C)),Oe("currentEditor",f);let p=$e(!1);X(r,p,C=>t(6,n=C)),Oe("shrunk",p);let d=$e(null);X(r,d,C=>t(7,l=C)),Oe("card",d);let h=new On(d);Oe("history",h);let g,D=!1,y=!1;function w(){t(3,D=g.scrollTop>0)}let R,T=new IntersectionObserver(C=>{C[0].intersectionRatio==0?t(4,y=!0):t(4,y=!1)},{threshold:[0],root:g});function q(){T.disconnect(),R!=null&&T.observe(R)}let F=window.matchMedia("(prefers-color-scheme: dark)"),j=function(){document.body.classList.toggle("dark",F.matches)};j(),F.addEventListener("change",j);let re;we(function(){It().then(C=>{d.set(C)})});function ie(C){C.key=="z"&&(C.metaKey||C.ctrlKey)&&C.shiftKey?(C.preventDefault(),C.stopPropagation(),h.redo()):C.key=="z"&&(C.metaKey||C.ctrlKey)&&(C.preventDefault(),C.stopPropagation(),h.undo()),!(C.target instanceof HTMLTextAreaElement||C.target instanceof HTMLInputElement)&&(C.key=="c"&&(C.metaKey||C.ctrlKey)&&(C.preventDefault(),C.stopPropagation(),chrome.tabs.create({url:chrome.runtime.getURL("src/pages/sidepanel/index.html")})),C.key=="p"&&!(C.metaKey||C.ctrlKey||C.shiftKey)&&(C.preventDefault(),C.stopPropagation(),se(a,s=null,s)),C.key=="h"&&!(C.metaKey||C.ctrlKey||C.shiftKey)?(C.preventDefault(),C.stopPropagation(),se(a,s="highlight",s)):C.key=="u"&&!(C.metaKey||C.ctrlKey||C.shiftKey)?(C.preventDefault(),C.stopPropagation(),se(a,s="underline",s)):C.key=="e"&&!(C.metaKey||C.ctrlKey||C.shiftKey)&&(C.preventDefault(),C.stopPropagation(),se(a,s="eraser",s)))}async function E(){let C=new Promise((he,Le)=>{setTimeout(he,Je*2)});g.classList.remove("animateEndReload"),g.classList.add("animateStartReload"),g.offsetWidth,Promise.all([C,It()]).then(([he,Le])=>{W.addMessage("Card reset!"),d.set(Le),t(2,g.scrollTop=0,g),g.classList.remove("animateStartReload"),g.classList.add("animateEndReload"),g.offsetWidth})}function K(){Ln(l,n),W.addMessage("Copied to clipboard!")}function ce(C){x[C?"unshift":"push"](()=>{re=C,t(5,re)})}function ye(C){r.$$.not_equal(l.tag,C)&&(l.tag=C,d.set(l))}function ae(C){x[C?"unshift":"push"](()=>{R=C,t(1,R)})}function ke(C){n=C,p.set(n)}function Q(C){x[C?"unshift":"push"](()=>{g=C,t(2,g)})}const N=()=>{se(Ie,o=o.slice(1),o),Ie.set(o)};return r.$$set=C=>{"context"in C&&t(0,u=C.context)},r.$$.update=()=>{r.$$.dirty&2&&q()},[u,R,g,D,y,re,n,l,o,i,a,f,p,d,w,ie,E,K,ce,ye,ae,ke,Q,N]}class Ts extends z{constructor(e){super(),U(this,e,Ms,Ls,V,{context:0})}}export{Ts as M};
