import{S as ae,f as fe,s as le,I as Ve,g as T,h as Y,j as w,m as H,J as De,K as Ee,L as Qe,C as p,A as b,r as S,D as re,a1 as Ae,E as $t,G as He,w as ze,H as W,F as ce,b as Ke,y as Le,z as ie,n as oe,B as ue,a9 as ne,k as M,P as Fe,Z as Dt,v as ke,x as lt,t as ge,p as ye,R as P,T as V,U as D,u as xt,M as x,aj as Ye,N as je,V as Et,o as q,ak as en,$ as de,a0 as he,a7 as ot,a5 as tn,a3 as nn,a4 as ln,a8 as st,W as at,Q as Re,ae as on,Y as Xe,X as Qt,al as sn,am as rn,ad as un,aa as Te,ah as an}from"./index-Cqd5pjsu.js";import{f as ft}from"./index-CpIVvtS8.js";async function Oe(l){throw console.error()}function fn(l){let e,t,n,o,s,i,u,r,a,f,d;const c=l[27].default,h=Ve(c,l,l[26],null);return{c(){var g;e=T("div"),n=Y(),o=T("div"),h&&h.c(),s=Y(),i=T("div"),r=Y(),a=T("div"),w(e,"class","loader top svelte-1dv6zp6"),w(e,"style",t=`height:${l[1]}px`),w(o,"class","items"),w(i,"class","loader bottom svelte-1dv6zp6"),w(i,"style",u=`height:${l[1]}px`),w(a,"class","spacefiller"),w(a,"style",f=`height:${(g=l[0])==null?void 0:g.clientHeight}px`)},m(g,m){H(g,e,m),l[28](e),H(g,n,m),H(g,o,m),h&&h.m(o,null),l[29](o),H(g,s,m),H(g,i,m),l[30](i),H(g,r,m),H(g,a,m),d=!0},p(g,m){var C;(!d||m[0]&2&&t!==(t=`height:${g[1]}px`))&&w(e,"style",t),h&&h.p&&(!d||m[0]&67108864)&&De(h,c,g,g[26],d?Qe(c,g[26],m,null):Ee(g[26]),null),(!d||m[0]&2&&u!==(u=`height:${g[1]}px`))&&w(i,"style",u),(!d||m[0]&1&&f!==(f=`height:${(C=g[0])==null?void 0:C.clientHeight}px`))&&w(a,"style",f)},i(g){d||(p(h,g),d=!0)},o(g){b(h,g),d=!1},d(g){g&&(S(e),S(n),S(o),S(s),S(i),S(r),S(a)),l[28](null),h&&h.d(g),l[29](null),l[30](null)}}}let Ge=40;async function ct(l){}function cn(l,e,t){let n,{$$slots:o={},$$scope:s}=e,{items:i}=e,{serverCommand:u}=e,{canRemoveItem:r=(v,F)=>!0}=e,{fetchAmount:a=10}=e,{loaderHeight:f=500}=e,{shouldTrackFocus:d=!1}=e,{state:c=null}=e,{verbose:h=!1}=e,{viewerElement:g=null}=e,m,C,k,L=0,R=0,J=!1;function X(){t(6,i=[]),L=0,R=0}function z(){return k}function B(){var v,F;L=(v=i[0])==null?void 0:v.index,R=((F=i[i.length-1])==null?void 0:F.index)+1}let U=[],O={},y={};function _(v,F,G){U[v]={start:F,end:G},O.hasOwnProperty(F)?O[F].push(v):O[F]=[v],y.hasOwnProperty(G)?y[G].push(v):y[G]=[v],O=Object.keys(O).sort().reduce(($,se)=>($[se]=O[se],$),{}),y=Object.keys(y).sort().reduce(($,se)=>($[se]=y[se],$),{})}function j(v){let F=U[v];O[F.start]=O[F.start].filter(G=>G!==v),O[F.start].length==0&&delete O[F.start],y[F.end]=y[F.end].filter(G=>G!==v),y[F.end].length==0&&delete y[F.end],delete U[v]}new IntersectionObserver(v=>{if(h&&console.log("observer muted: ",J),J)return;let F=!1,G=!1;for(let $ of v)$.isIntersecting&&(F=$.target==C,G=$.target==m);F?(h&&console.log("bottom loader in view"),Ie()):G&&(h&&console.log("top loader in view"),Be())},{root:g,rootMargin:"0px",threshold:0});function A(v){let F=k.children[v];return F&&F.offsetTop-g.scrollTop+F.offsetHeight>Ge&&F.offsetTop-g.scrollTop<Ge}let N=0,E=ze(null);re(l,E,v=>t(41,n=v));function K(){h&&console.log("currentFocus",N),ce(E,n=i[N],n)}function Z(){return E}function Se(){return n}let Me=function(){if(A(N))return;let v=0;for(;N+v<k.children.length||N-v>0;){if(v+=1,A(N+v)){N+=v,K();return}if(A(N-v)){N-=v,K();return}}g.scrollTop>g.scrollHeight-g.scrollTop?N=0:N=k.children.length-1};Ae(async function(){});function Ce(){t(7,c={startIndex:L,endIndex:R,scrollTop:g.scrollTop})}function Q(v){J=v}$t(function(){Me&&g.removeEventListener("scroll",Me)});async function ee(v){let F=[{start:L-v,end:L}];h&&console.log("original range",F[0]);let G=F[0],$=Object.keys(y).map(Number);$.reverse();for(let we of $){let qe=y[we];if(we>G.start&&we<G.end){let be=U[qe[0]];for(let xe=1;xe<qe.length;xe++){let et=U[qe[xe]];be.end-be.start<et.end-et.start&&(be=et)}h&&console.log("removing range: ",be);let Jt=G.end-G.start-(G.end-(be.end+1));G.start=be.end+1,F.push({start:be.start-Jt,end:be.start}),G=F[F.length-1],h&&console.log("loadRanges: ",F)}}F.reverse();let se=[];h&&F.length!=1&&console.log("loading ranges: ",F);for(let we of F){let qe=Math.max(0,we.start),be=Math.max(0,we.end);h&&console.log("loading: ",qe,be),se=se.concat(await u(qe,be))}return L-=F[F.length-1].end-F[0].start,h&&console.log("newItems: ",se),se}async function I(){if(C.offsetTop-g.scrollTop<g.clientHeight){let v=await ct();if(v.length==0)return;t(6,i=[...i,...v]),await He(),I()}}async function me(){if(m.offsetTop-g.scrollTop+m.clientHeight>0){let v=await ee(a);if(v.length==0)return;let F=k.clientHeight;t(6,i=[...i,...v]),await He(),t(0,g.scrollTop+=k.clientHeight-F,g),me()}}async function Be(){var $;h&&console.log("loading top");let v=await ee(a);if(v.length==0)return;let F=0;for(let se=k.children.length-1;se>=0;se--){let we=k.children[se];if(we.offsetTop-g.scrollTop>g.clientHeight&&r(i[se],we))i.pop(),F-=we.clientHeight;else break}let G=k.clientHeight;t(6,i=[...v,...i]),R=(($=i[i.length-1])==null?void 0:$.index)+1,await He(),F+=G-k.clientHeight,t(0,g.scrollTop-=F,g),await me(),h&&console.log(i)}async function Ie(){var G;h&&console.log("loading bottom");let v=await ct();if(v.length==0)return;let F=0;for(let $=0;$<k.children.length;$++){let se=k.children[$];if(se.offsetTop-g.scrollTop+se.clientHeight<0&&r(i[$],se))i.shift(),F-=se.clientHeight;else break}t(6,i=[...i,...v]),L=(G=i[0])==null?void 0:G.index,await He(),t(0,g.scrollTop+=F,g),await I(),h&&console.log("loaded items: ",i)}let _e=[];function Gt(v,F){let G={index:v,force:F};_e.push(G),h&&console.log("teleport queue increased to: ",_e.length),_e.length==1&&it(G.index,G.force)}let $e=[];function Zt(v){_e.length==0?v():$e.push(v)}async function it(v,F){if(await ut(v,F),_e.shift(),h&&console.log("teleport queue decreased to: ",_e.length),_e.length>0){let G=_e[0];it(G.index,G.force)}else{for(let G of $e)G();$e=[]}}async function ut(v,F){var G;if(h&&console.log("teleporting to: ",v),!F&&i.length>0&&v>=L&&v<R){let $=k.children[v-L];if($&&!($.offsetTop<f)&&!($.offsetTop+g.clientHeight>C.offsetTop))return h&&console.log("doing fake teleport"),h&&console.trace(),t(0,g.scrollTop=$.offsetTop-Ge+1,g),d&&(N=0,K()),!0}return h&&console.log("doing real teleport"),J=!0,h&&console.log("muting obvservers"),X(),L=v,R=v,await Ie(),t(0,g.scrollTop=Math.max((G=k.children[0])==null?void 0:G.offsetTop,f)-Ge+1,g),h&&console.log("set viewer scrollTop: ",g.scrollTop),J=!1,h&&console.log("unmuting obvservers"),d&&(N=0,K()),!0}function Xt(v){W[v?"unshift":"push"](()=>{m=v,t(2,m)})}function Wt(v){W[v?"unshift":"push"](()=>{k=v,t(4,k)})}function Yt(v){W[v?"unshift":"push"](()=>{C=v,t(3,C)})}return l.$$set=v=>{"items"in v&&t(6,i=v.items),"serverCommand"in v&&t(8,u=v.serverCommand),"canRemoveItem"in v&&t(9,r=v.canRemoveItem),"fetchAmount"in v&&t(10,a=v.fetchAmount),"loaderHeight"in v&&t(1,f=v.loaderHeight),"shouldTrackFocus"in v&&t(11,d=v.shouldTrackFocus),"state"in v&&t(7,c=v.state),"verbose"in v&&t(12,h=v.verbose),"viewerElement"in v&&t(0,g=v.viewerElement),"$$scope"in v&&t(26,s=v.$$scope)},[g,f,m,C,k,E,i,c,u,r,a,d,h,X,z,B,_,j,Z,Se,Ce,Q,Ie,Gt,Zt,ut,s,o,Xt,Wt,Yt]}class rt extends ae{constructor(e){super(),fe(this,e,cn,fn,le,{items:6,serverCommand:8,canRemoveItem:9,fetchAmount:10,loaderHeight:1,shouldTrackFocus:11,state:7,verbose:12,viewerElement:0,reset:13,getItemsElement:14,updateIndex:15,addSkipRange:16,removeSkipRange:17,getFocusStore:18,getFocus:19,saveState:20,setMuteObservers:21,loadBottom:22,teleport:23,onTeleportDone:24,pureTeleport:25},null,[-1,-1])}get reset(){return this.$$.ctx[13]}get getItemsElement(){return this.$$.ctx[14]}get updateIndex(){return this.$$.ctx[15]}get addSkipRange(){return this.$$.ctx[16]}get removeSkipRange(){return this.$$.ctx[17]}get getFocusStore(){return this.$$.ctx[18]}get getFocus(){return this.$$.ctx[19]}get saveState(){return this.$$.ctx[20]}get setMuteObservers(){return this.$$.ctx[21]}get loadBottom(){return this.$$.ctx[22]}get teleport(){return this.$$.ctx[23]}get onTeleportDone(){return this.$$.ctx[24]}get pureTeleport(){return this.$$.ctx[25]}}var te=(l=>(l[l.Top=0]="Top",l[l.Bottom=1]="Bottom",l[l.Left=2]="Left",l[l.Right=3]="Right",l[l.TopLeft=4]="TopLeft",l[l.TopRight=5]="TopRight",l[l.BottomLeft=6]="BottomLeft",l[l.BottomRight=7]="BottomRight",l))(te||{});let Ue=200;function dn(l,{delay:e=0,duration:t=500}){return{delay:e,duration:t,css:function(n){return`
        display: block;
        opacity: ${Math.cos(n*Math.PI*4)+1};
        transform: scale(${n*2});
      `}}}function dt(l,{delay:e=0,duration:t=Ue}){return{delay:e,duration:t,css:function(n){const o=Ke(n);return l.classList.contains("showSearchResults")?`
        transform: translateX(${(1-o)*100}%);
      `:""}}}function ht(l,{delay:e=0,duration:t=Ue}){return{delay:e,duration:t,css:function(n){return`
        transform: translateX(${(1-Ke(n))*-100}%);
      `}}}function gt(l,{delay:e=0,duration:t=Ue,align:n=te.TopRight}){let o="1rem",s="1rem";return(n==te.Right||n===te.TopRight||n==te.BottomRight)&&(o="calc(100% - 1rem)"),(n==te.Bottom||n===te.BottomRight||n==te.BottomLeft)&&(s="calc(100% - 1rem)"),{delay:e,duration:t,css:function(i){return`
        clip-path: circle(calc(1rem + ${Ke(i)*150}%) at ${o} ${s});
      `}}}function hn(l,{delay:e=0,duration:t=Ue}){return{delay:e,duration:t,css:function(n){return`
        clip-path: circle(calc(${Ke(n)*150}%) at 50% 50%);
      `}}}function mt(l,{delay:e=0,duration:t=Ue}){let n=l.offsetHeight;return{delay:e,duration:t,css:function(o){return`
        overflow: hidden;
        height: ${Ke(o)*n}px;`}}}function gn(l){let e,t;const n=l[4].default,o=Ve(n,l,l[3],null);return{c(){e=T("mark"),o&&o.c(),w(e,"class","svelte-1wdy0hm")},m(s,i){H(s,e,i),o&&o.m(e,null),t=!0},p(s,i){o&&o.p&&(!t||i&8)&&De(o,n,s,s[3],t?Qe(n,s[3],i,null):Ee(s[3]),null)},i(s){t||(p(o,s),t=!0)},o(s){b(o,s),t=!1},d(s){s&&S(e),o&&o.d(s)}}}function mn(l){let e,t,n;const o=l[4].default,s=Ve(o,l,l[3],null);return{c(){e=T("mark"),s&&s.c(),w(e,"class","svelte-1wdy0hm"),M(e,"selected",l[0])},m(i,u){H(i,e,u),s&&s.m(e,null),l[5](e),n=!0},p(i,u){s&&s.p&&(!n||u&8)&&De(s,o,i,i[3],n?Qe(o,i[3],u,null):Ee(i[3]),null),(!n||u&1)&&M(e,"selected",i[0])},i(i){n||(p(s,i),i&&(t||Fe(()=>{t=Dt(e,dn,{}),t.start()})),n=!0)},o(i){b(s,i),n=!1},d(i){i&&S(e),s&&s.d(i),l[5](null)}}}function _t(l){let e,t,n,o;const s=[mn,gn],i=[];function u(r,a){return r[0]?0:1}return e=u(l),t=i[e]=s[e](l),{c(){t.c(),n=Le()},m(r,a){i[e].m(r,a),H(r,n,a),o=!0},p(r,a){let f=e;e=u(r),e===f?i[e].p(r,a):(ie(),b(i[f],1,1,()=>{i[f]=null}),ue(),t=i[e],t?t.p(r,a):(t=i[e]=s[e](r),t.c()),p(t,1),t.m(n.parentNode,n))},i(r){o||(p(t),o=!0)},o(r){b(t),o=!1},d(r){r&&S(n),i[e].d(r)}}}function _n(l){let e=l[2],t,n,o=_t(l);return{c(){o.c(),t=Le()},m(s,i){o.m(s,i),H(s,t,i),n=!0},p(s,[i]){i&4&&le(e,e=s[2])?(ie(),b(o,1,1,oe),ue(),o=_t(s),o.c(),p(o,1),o.m(t.parentNode,t)):o.p(s,i)},i(s){n||(p(o),n=!0)},o(s){b(o),n=!1},d(s){s&&S(t),o.d(s)}}}function pn(l,e,t){let{$$slots:n={},$$scope:o}=e,{selected:s=!1}=e,i,u=ne("getDocLoader"),r=!1;function a(){s&&(console.log("pls teleport"),u().onTeleportDone(function(){i.scrollIntoView({block:"start",inline:"nearest"}),t(2,r=!r)}))}Ae(a);function f(d){W[d?"unshift":"push"](()=>{i=d,t(1,i)})}return l.$$set=d=>{"selected"in d&&t(0,s=d.selected),"$$scope"in d&&t(3,o=d.$$scope)},l.$$.update=()=>{l.$$.dirty&1},[s,i,r,o,n,f]}class Nt extends ae{constructor(e){super(),fe(this,e,pn,_n,le,{selected:0})}}function pt(l,e,t){const n=l.slice();return n[9]=e[t],n[11]=t,n}function kn(l){let e=l[9]+"",t;return{c(){t=ge(e)},m(n,o){H(n,t,o)},p(n,o){o&2&&e!==(e=n[9]+"")&&ye(t,e)},i:oe,o:oe,d(n){n&&S(t)}}}function wn(l){let e,t;return e=new Nt({props:{$$slots:{default:[yn]},$$scope:{ctx:l}}}),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},p(n,o){const s={};o&4098&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function bn(l){let e,t;return e=new Nt({props:{selected:!0,$$slots:{default:[vn]},$$scope:{ctx:l}}}),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},p(n,o){const s={};o&4098&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function yn(l){let e=l[9]+"",t;return{c(){t=ge(e)},m(n,o){H(n,t,o)},p(n,o){o&2&&e!==(e=n[9]+"")&&ye(t,e)},d(n){n&&S(t)}}}function vn(l){let e=l[9]+"",t;return{c(){t=ge(e)},m(n,o){H(n,t,o)},p(n,o){o&2&&e!==(e=n[9]+"")&&ye(t,e)},d(n){n&&S(t)}}}function kt(l){let e,t,n,o;const s=[bn,wn,kn],i=[];function u(r,a){return r[2][r[11]]==2?0:r[2][r[11]]==1?1:2}return e=u(l),t=i[e]=s[e](l),{c(){t.c(),n=Le()},m(r,a){i[e].m(r,a),H(r,n,a),o=!0},p(r,a){let f=e;e=u(r),e===f?i[e].p(r,a):(ie(),b(i[f],1,1,()=>{i[f]=null}),ue(),t=i[e],t?t.p(r,a):(t=i[e]=s[e](r),t.c()),p(t,1),t.m(n.parentNode,n))},i(r){o||(p(t),o=!0)},o(r){b(t),o=!1},d(r){r&&S(n),i[e].d(r)}}}function Cn(l){let e,t,n,o=ke(l[1]),s=[];for(let u=0;u<o.length;u+=1)s[u]=kt(pt(l,o,u));const i=u=>b(s[u],1,1,()=>{s[u]=null});return{c(){e=T("span");for(let u=0;u<s.length;u+=1)s[u].c();w(e,"style",t=`font-size: ${l[0].size?l[0].size*.05:1}em;`),w(e,"class","svelte-4b112d"),M(e,"bold",l[0].bold),M(e,"underline",l[0].underline),M(e,"highlight",l[0].highlight)},m(u,r){H(u,e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);n=!0},p(u,[r]){if(r&6){o=ke(u[1]);let a;for(a=0;a<o.length;a+=1){const f=pt(u,o,a);s[a]?(s[a].p(f,r),p(s[a],1)):(s[a]=kt(f),s[a].c(),p(s[a],1),s[a].m(e,null))}for(ie(),a=o.length;a<s.length;a+=1)i(a);ue()}(!n||r&1&&t!==(t=`font-size: ${u[0].size?u[0].size*.05:1}em;`))&&w(e,"style",t),(!n||r&1)&&M(e,"bold",u[0].bold),(!n||r&1)&&M(e,"underline",u[0].underline),(!n||r&1)&&M(e,"highlight",u[0].highlight)},i(u){if(!n){for(let r=0;r<o.length;r+=1)p(s[r]);n=!0}},o(u){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)b(s[r]);n=!1},d(u){u&&S(e),lt(s,u)}}}function Rn(l,e,t){let n,o=ne("query");re(l,o,c=>t(7,n=c));let{text:s}=e,{style:i}=e,{queryMatches:u}=e,{selectedQueryMatch:r}=e,a=[],f=[];function d(){if(u==null){t(1,a=[s]),t(2,f=[0]);return}t(1,a=[]),t(2,f=[]);let c=0;u.forEach(function(h,g){h-c>0&&(a.push(s.substring(c,h)),f.push(0)),a.push(s.substring(h,h+n.text.length)),g===r?f.push(2):f.push(1),c=h+n.text.length}),s.length-c>0&&(a.push(s.substring(c)),f.push(0)),t(1,a),t(2,f)}return l.$$set=c=>{"text"in c&&t(4,s=c.text),"style"in c&&t(0,i=c.style),"queryMatches"in c&&t(5,u=c.queryMatches),"selectedQueryMatch"in c&&t(6,r=c.selectedQueryMatch)},l.$$.update=()=>{l.$$.dirty&96&&d()},[i,a,f,o,s,u,r]}class Ln extends ae{constructor(e){super(),fe(this,e,Rn,Cn,le,{text:4,style:0,queryMatches:5,selectedQueryMatch:6})}}function Mn(l){let e,t=l[1].svg+"",n;return{c(){e=xt("svg"),w(e,"style",n=`width:${l[0]};height:${l[0]};`),w(e,"viewBox","0 0 100 100"),w(e,"fill","none"),w(e,"stroke","var(--text)"),w(e,"class","svelte-1ab3fjp")},m(o,s){H(o,e,s),e.innerHTML=t},p(o,[s]){s&2&&t!==(t=o[1].svg+"")&&(e.innerHTML=t),s&1&&n!==(n=`width:${o[0]};height:${o[0]};`)&&w(e,"style",n)},i:oe,o:oe,d(o){o&&S(e)}}}function Tn(l,e,t){let{name:n}=e,{size:o="1em"}=e,s=[{name:"arrowRight",svg:'<path d="M27 7L74 50L27 93" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"arrowLeft",svg:'<path d="M74 93L27 50L74 7" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"arrowUp",svg:'<path d="M7.5 73.5L50.5 26.5L93.5 73.5" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"arrowDown",svg:'<path d="M93.5 26.5L50.5 73.5L7.5 26.5" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"delete",svg:`<path d="M78.5685 22L22 78.5685" stroke-width="10" stroke-linecap="round"/>
<path d="M22 22L78.5685 78.5685" stroke-width="10" stroke-linecap="round"/>`},{name:"add",svg:`<path d="M50 15L50 85" stroke-width="10" stroke-linecap="round"/>
<path d="M15 50H85" stroke-width="10" stroke-linecap="round"/>`},{name:"download",svg:`<path d="M71 45L50 68L29 45" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M20 85L80 85" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M50 66L50 14" stroke-width="10" stroke-linecap="round"/>`},{name:"upload",svg:`<path d="M29 37L50 14L71 37" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M20 85L80 85" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M50 16L50 68" stroke-width="10" stroke-linecap="round"/>`},{name:"addUp",svg:`<path d="M85 25V25C87.7614 25 90 27.2386 90 30V70C90 75.5228 85.5228 80 80 80H20C14.4772 80 10 75.5228 10 70L10 30C10 27.2386 12.2386 25 15 25V25" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M35 25H65" stroke-width="10" stroke-linecap="round"/>
<path d="M50 40V10" stroke-width="10" stroke-linecap="round"/>`},{name:"addDown",svg:`<path d="M15 75V75C12.2386 75 10 72.7614 10 70L10 30C10 24.4772 14.4772 20 20 20L80 20C85.5228 20 90 24.4772 90 30L90 70C90 72.7614 87.7614 75 85 75V75" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M65 75H35" stroke-width="10" stroke-linecap="round"/>
<path d="M50 60L50 90" stroke-width="10" stroke-linecap="round"/>`},{name:"addRight",svg:`<path d="M75 85V85C75 87.7614 72.7614 90 70 90H30C24.4772 90 20 85.5228 20 80V20C20 14.4772 24.4772 10 30 10H70C72.7614 10 75 12.2386 75 15V15" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M75 35V65" stroke-width="10" stroke-linecap="round"/>
<path d="M60 50H90" stroke-width="10" stroke-linecap="round"/>`},{name:"undo",svg:`<path d="M10 47H70C81.0457 47 90 55.9543 90 67V77" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M36 70L10 47L36 24" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>`},{name:"redo",svg:`<path d="M90 47H30C18.9543 47 10 55.9543 10 67V77" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M64 70L90 47L64 24" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>`},{name:"settings",svg:`<line x1="10" y1="50" x2="90" y2="50" stroke-width="10" stroke-linecap="round"/>
<line x1="10" y1="80" x2="90" y2="80" stroke-width="10" stroke-linecap="round"/>
<line x1="10" y1="20" x2="90" y2="20" stroke-width="10" stroke-linecap="round"/>
<circle cx="26.25" cy="50.25" r="6.25" stroke-width="10"/>
<circle cx="71.25" cy="80.25" r="6.25" stroke-width="10"/>
<circle cx="71.25" cy="20.25" r="6.25" stroke-width="10"/>`},{name:"check",svg:'<path d="M88.7817 29.2843L39.2842 78.7817L11 50.4975" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"dots",svg:`<circle cx="26.25" cy="50.25" r="5.625" stroke-width="11.25"/>
<circle cx="71.25" cy="80.25" r="5.625" stroke-width="11.25"/>
<circle cx="71.25" cy="20.25" r="5.625" stroke-width="11.25"/>`},{name:"copy",svg:`<path d="M20 73V73C17.2386 73 15 70.7614 15 68L15 19C15 13.4772 19.4772 9 25 9H60C62.7614 9 65 11.2386 65 14V14" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M35 38V82C35 87.5228 39.4772 92 45 92H75C80.5228 92 85 87.5228 85 82V38C85 32.4772 80.5228 28 75 28H45C39.4772 28 35 32.4772 35 38Z" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>`},{name:"magnifyGlass",svg:`<rect width="100" height="100" fill="black"/>
<circle cx="46.5" cy="46.5" r="35.5" stroke-width="10"/>
<path d="M72 73L80.5 81.5L89 90" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>`},{name:"magnifyGlassMinus",svg:`<circle cx="46.5" cy="46.5" r="35.5" stroke-width="10"/>
<path d="M72 73L80.5 81.5L89 90" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M32 46H62" stroke-width="10" stroke-linecap="round"/>`},{name:"magnifyGlassPlus",svg:`<circle cx="46.5" cy="46.5" r="35.5" stroke-width="10"/>
<path d="M72 73L80.5 81.5L89 90" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M42 61C42 63.7614 44.2386 66 47 66C49.7614 66 52 63.7614 52 61V51H62C64.7614 51 67 48.7614 67 46C67 43.2386 64.7614 41 62 41H52V31C52 28.2386 49.7614 26 47 26C44.2386 26 42 28.2386 42 31V41H32C29.2386 41 27 43.2386 27 46C27 48.7614 29.2386 51 32 51H42V61Z" fill="currentColor"/>`},{name:"link",svg:`<path d="M42.929 71.2132L53.5356 81.8198C61.3461 89.6303 74.0094 89.6303 81.8199 81.8198V81.8198C89.6304 74.0093 89.6304 61.346 81.8199 53.5355L71.2133 42.9289" stroke-width="10" stroke-linecap="round"/>
<path d="M28.7868 57.0711L18.1802 46.4645C10.3697 38.654 10.3697 25.9907 18.1802 18.1802V18.1802C25.9907 10.3697 38.654 10.3697 46.4645 18.1802L57.0711 28.7868" stroke-width="10" stroke-linecap="round"/>
<path d="M37.272 37.2721L63.0814 63.0815" stroke-width="10" stroke-linecap="round"/>`},{name:"ellipses",svg:`<circle cx="19.25" cy="50.25" r="5.625" stroke-width="11.25"/>
<circle cx="50.25" cy="50.25" r="5.625" stroke-width="11.25"/>
<circle cx="81.25" cy="50.25" r="5.625" stroke-width="11.25"/>`},{name:"funnel",svg:`<line x1="25" y1="50" x2="75" y2="50" stroke-width="10" stroke-linecap="round"/>
<line x1="40" y1="79" x2="60" y2="79" stroke-width="10" stroke-linecap="round"/>
<line x1="10" y1="20" x2="90" y2="20" stroke-width="10" stroke-linecap="round"/>`},{name:"copyBelow",svg:`<path d="M20 73V73C17.2386 73 15 70.7614 15 68V62M65 14V14C65 11.2386 62.7614 9 60 9H25C19.4772 9 15 13.4772 15 19L15 31" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M35 33V33C35 30.2386 37.2386 28 40 28H75C80.5228 28 85 32.4772 85 38V82C85 87.5228 80.5228 92 75 92H45C39.4772 92 35 87.5228 35 82V82" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M73 47L49.5 73L26 47" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>`},{name:"copyAbove",svg:`<path d="M20 73V73C17.2386 73 15 70.7614 15 68V62M65 14V14C65 11.2386 62.7614 9 60 9H25C19.4772 9 15 13.4772 15 19L15 31" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M35 33V33C35 30.2386 37.2386 28 40 28H75C80.5228 28 85 32.4772 85 38V82C85 87.5228 80.5228 92 75 92H45C39.4772 92 35 87.5228 35 82V82" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M73 47L49.5 73L26 47" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M73 73L49.5 81.5L26 73" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>`},{name:"rainbow",svg:`<path d="M28 68C28 36 70 36 70 68" stroke-width="10" stroke-linecap="round"/>
<path d="M8 68C8 9.33333 92 9.33333 92 68" stroke-width="10" stroke-linecap="round"/>`}],i;function u(){t(1,i=s.find(r=>r.name===n))}return u(),l.$$set=r=>{"name"in r&&t(2,n=r.name),"size"in r&&t(0,o=r.size)},l.$$.update=()=>{l.$$.dirty&4&&u()},[o,i,n]}class ve extends ae{constructor(e){super(),fe(this,e,Tn,Mn,le,{name:2,size:0})}}function On(l){let e,t,n,o;const s=l[5].default,i=Ve(s,l,l[4],null);return{c(){e=T("button"),i&&i.c(),e.disabled=l[1],w(e,"class","svelte-kupzx"),M(e,"background",l[0]),M(e,"small",l[2]),M(e,"hoverShadow",l[3])},m(u,r){H(u,e,r),i&&i.m(e,null),t=!0,n||(o=[x(e,"click",l[6]),x(e,"mousedown",Ye(Hn))],n=!0)},p(u,[r]){i&&i.p&&(!t||r&16)&&De(i,s,u,u[4],t?Qe(s,u[4],r,null):Ee(u[4]),null),(!t||r&2)&&(e.disabled=u[1]),(!t||r&1)&&M(e,"background",u[0]),(!t||r&4)&&M(e,"small",u[2]),(!t||r&8)&&M(e,"hoverShadow",u[3])},i(u){t||(p(i,u),t=!0)},o(u){b(i,u),t=!1},d(u){u&&S(e),i&&i.d(u),n=!1,je(o)}}}const Hn=()=>{};function Sn(l,e,t){let{$$slots:n={},$$scope:o}=e,{background:s=!0}=e,{disabled:i=!1}=e,{small:u=!1}=e,{hoverShadow:r=!1}=e;function a(f){Et.call(this,l,f)}return l.$$set=f=>{"background"in f&&t(0,s=f.background),"disabled"in f&&t(1,i=f.disabled),"small"in f&&t(2,u=f.small),"hoverShadow"in f&&t(3,r=f.hoverShadow),"$$scope"in f&&t(4,o=f.$$scope)},[s,i,u,r,o,n,a]}class pe extends ae{constructor(e){super(),fe(this,e,Sn,On,le,{background:0,disabled:1,small:2,hoverShadow:3})}}function wt(l,e,t){const n=l.slice();return n[23]=e[t],n}function In(l){let e,t;return e=new ve({props:{name:"copy"}}),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},p:oe,i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function qn(l){let e,t;return e=new ve({props:{name:"copyBelow"}}),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},p:oe,i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function bt(l){let e,t;return e=new Ln({props:{text:l[23].text,style:l[23].style,queryMatches:l[23].queryMatches,selectedQueryMatch:l[23].selectedQueryMatch}}),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},p(n,o){const s={};o&8&&(s.text=n[23].text),o&8&&(s.style=n[23].style),o&8&&(s.queryMatches=n[23].queryMatches),o&8&&(s.selectedQueryMatch=n[23].selectedQueryMatch),e.$set(s)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function tt(l){let e,t,n,o,s=ke(l[3]),i=[];for(let r=0;r<s.length;r+=1)i[r]=bt(wt(l,s,r));const u=r=>b(i[r],1,1,()=>{i[r]=null});return{c(){e=T(l[2]);for(let r=0;r<i.length;r+=1)i[r].c();en(l[2])(e,{class:"para svelte-1imszax"})},m(r,a){H(r,e,a);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null);t=!0,n||(o=x(e,"click",l[17]),n=!0)},p(r,a){if(a&8){s=ke(r[3]);let f;for(f=0;f<s.length;f+=1){const d=wt(r,s,f);i[f]?(i[f].p(d,a),p(i[f],1)):(i[f]=bt(d),i[f].c(),p(i[f],1),i[f].m(e,null))}for(ie(),f=s.length;f<i.length;f+=1)u(f);ue()}},i(r){if(!t){for(let a=0;a<s.length;a+=1)p(i[a]);t=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)b(i[a]);t=!1},d(r){r&&S(e),lt(i,r),n=!1,o()}}}function zn(l){let e,t,n,o,s,i,u,r=l[2],a,f,d;o=new pe({props:{$$slots:{default:[In]},$$scope:{ctx:l}}}),o.$on("click",l[13]),i=new pe({props:{disabled:l[4],$$slots:{default:[qn]},$$scope:{ctx:l}}}),i.$on("click",l[14]);let c=l[2]&&tt(l);return{c(){e=T("div"),t=T("div"),n=T("div"),P(o.$$.fragment),s=Y(),P(i.$$.fragment),u=Y(),c&&c.c(),w(n,"class","buttons svelte-1imszax"),M(n,"loading",l[4]),w(t,"class","buttonsContainer svelte-1imszax"),M(t,"showButtons",l[5]),w(e,"class","top svelte-1imszax")},m(h,g){H(h,e,g),q(e,t),q(t,n),V(o,n,null),q(n,s),V(i,n,null),q(e,u),c&&c.m(e,null),a=!0,f||(d=[x(t,"mouseenter",l[15]),x(t,"mouseleave",l[16]),x(e,"click",l[18])],f=!0)},p(h,[g]){const m={};g&67108864&&(m.$$scope={dirty:g,ctx:h}),o.$set(m);const C={};g&16&&(C.disabled=h[4]),g&67108864&&(C.$$scope={dirty:g,ctx:h}),i.$set(C),(!a||g&16)&&M(n,"loading",h[4]),(!a||g&32)&&M(t,"showButtons",h[5]),h[2]?r?le(r,h[2])?(c.d(1),c=tt(h),r=h[2],c.c(),c.m(e,null)):c.p(h,g):(c=tt(h),r=h[2],c.c(),c.m(e,null)):r&&(c.d(1),c=null,r=h[2])},i(h){a||(p(o.$$.fragment,h),p(i.$$.fragment,h),a=!0)},o(h){b(o.$$.fragment,h),b(i.$$.fragment,h),b(c,h),a=!1},d(h){h&&S(e),D(o),D(i),c&&c.d(h),f=!1,je(d)}}}function Fn(l,e,t){let n,o,{copySelfAndChildren:s}=e,{runs:i=[]}=e,{outline_level:u}=e,{index:r}=e,a="p";u===0?a="h1":u===1?a="h2":u===2?a="h3":u===3?a="h4":u===4?a="h5":u===5&&(a="h6");let f=ne("query");re(l,f,y=>t(12,o=y));let d=ne("selectedQuery");re(l,d,y=>t(11,n=y));let c=[],h=i.reduce((y,_)=>y+_.text,"");function g(){if(o.onlyOutline&&u==null){t(3,c=i);return}t(3,c=[]);let y=[];if(o.text.length>0){let j=o.text,A=h;o.matchCase||(j=j.toLowerCase(),A=A.toLowerCase()),y=[];let N=A.indexOf(j);for(;N<A.length&&N!=-1;)y.push(N),N=A.indexOf(j,N+1)}let _=0;for(let j of i){let A=[],N;for(let E of y)E+o.text.length>=_&&E<_+j.text.length&&(A.push(E-_),r===n.paraIndex&&E===n.charIndex&&(N=A.length-1));c.push({...j,queryMatches:A,selectedQueryMatch:N}),_+=j.text.length}}function m(){let y=document.createElement(a);y.setAttribute("style",`
      font-family: Calibri;
      line-height: 1em;
    `);for(let _ of i){let j=document.createElement("span");j.setAttribute("style",`
        font-weight: ${_.style.bold?"bold":"normal"};
        text-decoration: ${_.style.underline?"underline":"none"};
        font-size: ${_.style.size?_.style.size/2:12}pt;
        background-color: ${_.style.highlight?"yellow":"none"};
      `),j.innerText=_.text.replaceAll(`
`,"").replaceAll("\r",""),y.appendChild(j)}return y}function C(){let y="";for(let _ of i)y+=_.text;return y}function k(){const y=new window.ClipboardItem({"text/html":new Blob([m().outerHTML],{type:"text/html"}),"text/plain":new Blob([C()],{type:"text/plain"})});navigator.clipboard.write([y])}let L=!1,R=!1;const J=()=>{k()},X=async()=>{t(4,L=!0),await s(),t(4,L=!1)},z=()=>t(5,R=!0),B=()=>t(5,R=!1),U=()=>console.log(r),O=()=>console.log(r);return l.$$set=y=>{"copySelfAndChildren"in y&&t(0,s=y.copySelfAndChildren),"runs"in y&&t(9,i=y.runs),"outline_level"in y&&t(10,u=y.outline_level),"index"in y&&t(1,r=y.index)},l.$$.update=()=>{l.$$.dirty&6144&&g()},[s,r,a,c,L,R,f,d,k,i,u,n,o,J,X,z,B,U,O]}class jn extends ae{constructor(e){super(),fe(this,e,Fn,zn,le,{copySelfAndChildren:0,runs:9,outline_level:10,index:1})}}function Bn(l,e){const t=window.getSelection(),n=l.querySelector(".items");if(!(t.rangeCount&&t.containsNode(l,!0)))return;const o=t.getRangeAt(0);let s={start:{para:void 0,run:void 0,offset:void 0},end:{para:void 0,run:void 0,offset:void 0}},i=0;for(let r of n.children){if(r.contains(o.startContainer)){let a=0;for(let f of r.querySelector(".para").children){if(f.contains(o.startContainer)){let d=0;for(let c of f.childNodes){if(c==o.startContainer||c.contains(o.startContainer)){s.start.para=i,s.start.run=a,s.start.offset=d+o.startOffset;break}d+=c.textContent.length}}a++}}if(r.contains(o.endContainer)){let a=0,f=!1;for(let d of r.querySelector(".para").children){if(d.contains(o.endContainer)){f=!0;let c=0;for(let h of d.childNodes){if(h==o.endContainer||h.contains(o.endContainer)){s.end.para=i,s.end.run=a,s.end.offset=c+o.endOffset;break}c+=h.textContent.length}}f||(s.end.para=i,s.end.run=0,s.end.offset=0),a++}}i++}s.end.para==null&&(s.end.para=e.length-1,s.end.run=e[s.end.para].runs.length-1,s.end.offset=e[s.end.para].runs[s.end.run].text.length),console.log(s);let u=document.createElement("div");for(let r=s.start.para;r<s.end.para+1;r++){let a=e[r],f;r==s.start.para&&r==s.end.para?f=Pe(a,s.start.run,s.end.run,s.start.offset,s.end.offset):r==s.start.para?f=Pe(a,s.start.run,null,s.start.offset,null):r==s.end.para?f=Pe(a,null,s.end.run,null,s.end.offset):f=Pe(a),u.appendChild(f)}return u}function Pe(l,e,t,n,o){let s="p";l.outline_level===0?s="h1":l.outline_level===1?s="h2":l.outline_level===2?s="h3":l.outline_level===3?s="h4":l.outline_level===4?s="h5":l.outline_level===5&&(s="h6");let i=document.createElement(s);i.setAttribute("style",`
    font-family: Calibri;
    line-height: 1em;
  `);let u=l.runs;e=e??0,t=t??u.length-1;for(let r=e;r<t+1;r++)r==e&&r==t?i.appendChild(Ze(u[r],n,o)):r==e?i.appendChild(Ze(u[r],n,null)):r==t?i.appendChild(Ze(u[r],null,o)):i.appendChild(Ze(u[r]));return i}function Ze(l,e,t){let n=document.createElement("span");n.setAttribute("style",`
      font-weight: ${l.style.bold?"bold":"normal"};
      text-decoration: ${l.style.underline?"underline":"none"};
      font-size: ${l.style.size?l.style.size/2:12}pt;
      background-color: ${l.style.highlight?"yellow":"none"};
    `),e=e??0,t=t??l.text.length;let o=l.text.slice(e,t);return n.innerText=o.replace(/\n/g,"").replace(/\r/g,""),n}function yt(l){let e=new Blob([l.innerHTML],{type:"text/html"});for(let o of l.children)o.appendChild(document.createTextNode(`
`));let t=new Blob([l.textContent],{type:"text/plain"});const n=new window.ClipboardItem({"text/html":e,"text/plain":t});navigator.clipboard.write([n])}let nt={};function Ne(l,e){nt[l]=e}window.addEventListener("keydown",function(l){for(let e of Object.keys(nt)){let t=e.split("+"),n=!0;for(let o of t)if(o=="CommandOrControl"?n=l.metaKey||l.ctrlKey:o=="Control"?n=l.ctrlKey:o=="Command"?n=l.metaKey:o=="Shift"&&l.shiftKey?n=l.shiftKey:o=="Alt"&&l.altKey?n=l.altKey:n=o.toLowerCase()==l.key.toLowerCase(),!n)break;n&&(l.preventDefault(),l.stopPropagation(),nt[e]())}});function vt(l,e,t){const n=l.slice();return n[24]=e[t],n[26]=t,n}function Ct(l){let e,t,n,o;function s(r){l[18](r)}function i(r){l[19](r)}let u={viewerElement:l[3],serverCommand:At,canRemoveItem:Dn,shouldTrackFocus:!0,verbose:!0,$$slots:{default:[Pn]},$$scope:{ctx:l}};return l[6]!==void 0&&(u.items=l[6]),l[0].loader!==void 0&&(u.state=l[0].loader),e=new rt({props:u}),l[17](e),W.push(()=>de(e,"items",s)),W.push(()=>de(e,"state",i)),{c(){P(e.$$.fragment)},m(r,a){V(e,r,a),o=!0},p(r,a){const f={};a&8&&(f.viewerElement=r[3]),a&134217792&&(f.$$scope={dirty:a,ctx:r}),!t&&a&64&&(t=!0,f.items=r[6],he(()=>t=!1)),!n&&a&1&&(n=!0,f.state=r[0].loader,he(()=>n=!1)),e.$set(f)},i(r){o||(p(e.$$.fragment,r),o=!0)},o(r){b(e.$$.fragment,r),o=!1},d(r){l[17](null),D(e,r)}}}function Rt(l,e){let t,n,o;function s(){return e[16](e[26])}const i=[e[24],{copySelfAndChildren:s}];let u={};for(let r=0;r<i.length;r+=1)u=tn(u,i[r]);return n=new jn({props:u}),{key:l,first:null,c(){t=Le(),P(n.$$.fragment),this.first=t},m(r,a){H(r,t,a),V(n,r,a),o=!0},p(r,a){e=r;const f=a&16448?nn(i,[a&64&&ln(e[24]),{copySelfAndChildren:s}]):{};n.$set(f)},i(r){o||(p(n.$$.fragment,r),o=!0)},o(r){b(n.$$.fragment,r),o=!1},d(r){r&&S(t),D(n,r)}}}function Pn(l){let e=[],t=new Map,n,o,s=ke(l[6]);const i=u=>u[24].index;for(let u=0;u<s.length;u+=1){let r=vt(l,s,u),a=i(r);t.set(a,e[u]=Rt(a,r))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();n=Le()},m(u,r){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(u,r);H(u,n,r),o=!0},p(u,r){r&16448&&(s=ke(u[6]),ie(),e=ot(e,r,i,1,u,s,t,n.parentNode,st,Rt,n,vt),ue())},i(u){if(!o){for(let r=0;r<s.length;r+=1)p(e[r]);o=!0}},o(u){for(let r=0;r<e.length;r+=1)b(e[r]);o=!1},d(u){u&&S(n);for(let r=0;r<e.length;r+=1)e[r].d(u)}}}function Vn(l){let e,t,n,o,s,i,u,r,a=l[3]&&Ct(l);return{c(){e=T("div"),t=T("div"),n=T("div"),o=T("div"),a&&a.c(),w(o,"class","paras svelte-qaoydo"),w(n,"class","paras-container svelte-qaoydo"),w(t,"class","content svelte-qaoydo"),w(t,"style",s=`font-size: ${l[8]*16}px;`),w(e,"class","viewer svelte-qaoydo"),M(e,"showOutline",l[1]),M(e,"showSearchResults",l[2]&&l[4].text.length>0),M(e,"isResizing",l[9])},m(f,d){H(f,e,d),q(e,t),q(t,n),q(n,o),a&&a.m(o,null),l[20](o),l[21](e),i=!0,u||(r=x(e,"wheel",l[13]),u=!0)},p(f,[d]){f[3]?a?(a.p(f,d),d&8&&p(a,1)):(a=Ct(f),a.c(),p(a,1),a.m(o,null)):a&&(ie(),b(a,1,1,()=>{a=null}),ue()),(!i||d&256&&s!==(s=`font-size: ${f[8]*16}px;`))&&w(t,"style",s),(!i||d&2)&&M(e,"showOutline",f[1]),(!i||d&20)&&M(e,"showSearchResults",f[2]&&f[4].text.length>0),(!i||d&512)&&M(e,"isResizing",f[9])},i(f){i||(p(a),i=!0)},o(f){b(a),i=!1},d(f){f&&S(e),a&&a.d(),l[20](null),l[21](null),u=!1,r()}}}async function At(l,e){}function Dn(l,e){const t=window.getSelection();return!(t.rangeCount&&t.containsNode(e,!0))}function En(l,e,t){let n,o,s,i=ne("isResizing");re(l,i,_=>t(9,s=_));let u=ne("query");re(l,u,_=>t(4,n=_));let r=ne("zoom");re(l,r,_=>t(8,o=_));let{showOutline:a}=e,{showSearchResults:f}=e,{state:d}=e,c,h;function g(){return h}let m=[];async function C(_){if(_.ctrlKey){_.preventDefault(),ce(r,o-=_.deltaY*.01,o),ce(r,o=Math.max(Math.min(o,8),.3),o);let j=(c.scrollTop+c.clientHeight/2)/c.scrollHeight;await He(),t(3,c.scrollTop=c.scrollHeight*j-c.clientHeight/2,c)}}let k,L=[void 0,void 0];const R=new ResizeObserver(_=>{for(let j of _)if(j.target===k){let A=[j.contentRect.width,j.contentRect.height];if(L[0]!==A[0]){let N=L[1]-A[1],E=c.clientHeight,K=(c.scrollTop+c.clientHeight/2)/(c.scrollHeight+N);t(3,c.scrollTop=c.scrollHeight*K-E/2,c)}L=A}});Ne("CommandOrControl+=",function(){ce(r,o+=.1,o),ce(r,o=Math.max(Math.min(o,8),.3),o);let _=(c.scrollTop+c.clientHeight/2)/c.scrollHeight;t(3,c.scrollTop=c.scrollHeight*_-c.clientHeight/2,c)}),Ne("CommandOrControl+-",function(){ce(r,o-=.1,o),ce(r,o=Math.max(Math.min(o,8),.3),o);let _=(c.scrollTop+c.clientHeight/2)/c.scrollHeight;t(3,c.scrollTop=c.scrollHeight*_-c.clientHeight/2,c)}),Ne("CommandOrControl+c",function(){let _=Bn(k,m);_&&yt(_)}),Ae(()=>{R.observe(k)});async function J(_){let j=document.createElement("div"),A=m.slice(_),N=m[_];j.appendChild(Pe(N));let E=1;for(;E<A.length;){let K=A[E];if(N.outline_level!=null&&(K.outline_level==null||K.outline_level>N.outline_level))j.appendChild(Pe(K));else break;if(E+1>=A.length){A[A.length-1].index;let Z=await At();E=-1,A=Z}E++}yt(j)}const X=_=>J(_);function z(_){W[_?"unshift":"push"](()=>{h=_,t(5,h)})}function B(_){m=_,t(6,m)}function U(_){l.$$.not_equal(d.loader,_)&&(d.loader=_,t(0,d))}function O(_){W[_?"unshift":"push"](()=>{k=_,t(7,k)})}function y(_){W[_?"unshift":"push"](()=>{c=_,t(3,c),t(2,f),t(4,n),t(1,a)})}return l.$$set=_=>{"showOutline"in _&&t(1,a=_.showOutline),"showSearchResults"in _&&t(2,f=_.showSearchResults),"state"in _&&t(0,d=_.state)},l.$$.update=()=>{l.$$.dirty&30&&f&&n.text.length>0&&!a&&t(3,c.scrollLeft=c.scrollWidth,c)},[d,a,f,c,n,h,m,k,o,s,i,u,r,C,J,g,X,z,B,U,O,y]}class Qn extends ae{constructor(e){super(),fe(this,e,En,Vn,le,{showOutline:1,showSearchResults:2,state:0,getLoader:15})}get getLoader(){return this.$$.ctx[15]}}function Nn(l){let e,t,n,o;return t=new ve({props:{name:"arrowRight"}}),{c(){e=T("div"),P(t.$$.fragment),w(e,"class",n=at(`top ${l[0]}`)+" svelte-1smxxim")},m(s,i){H(s,e,i),V(t,e,null),o=!0},p(s,[i]){(!o||i&1&&n!==(n=at(`top ${s[0]}`)+" svelte-1smxxim"))&&w(e,"class",n)},i(s){o||(p(t.$$.fragment,s),o=!0)},o(s){b(t.$$.fragment,s),o=!1},d(s){s&&S(e),D(t)}}}function An(l,e,t){let{direction:n="right"}=e;return l.$$set=o=>{"direction"in o&&t(0,n=o.direction)},[n]}class Je extends ae{constructor(e){super(),fe(this,e,An,Nn,le,{direction:0})}}function Lt(l){let e,t,n,o,s;return t=new Je({props:{direction:l[4]?"left":"down"}}),{c(){e=T("button"),P(t.$$.fragment),w(e,"class","folder svelte-1ceo5kq")},m(i,u){H(i,e,u),V(t,e,null),n=!0,o||(s=x(e,"click",l[10]),o=!0)},p(i,u){const r={};u&16&&(r.direction=i[4]?"left":"down"),t.$set(r)},i(i){n||(p(t.$$.fragment,i),n=!0)},o(i){b(t.$$.fragment,i),n=!1},d(i){i&&S(e),D(t),o=!1,s()}}}function Kn(l){let e,t,n,o,s,i,u,r,a,f=l[0]<3&&Lt(l);return{c(){e=T("li"),f&&f.c(),t=Y(),n=T("div"),o=T("span"),s=ge(l[5]),w(o,"class","svelte-1ceo5kq"),w(n,"class","content svelte-1ceo5kq"),w(e,"style",i=`margin-left: ${l[6]}em`),w(e,"class","svelte-1ceo5kq"),M(e,"selected",l[3]),M(e,"foldedParent",l[4]),M(e,"hasButtons",l[0]<3),M(e,"bold",l[6]<3),M(e,"big",l[6]<2)},m(d,c){H(d,e,c),f&&f.m(e,null),q(e,t),q(e,n),q(n,o),q(o,s),u=!0,r||(a=x(e,"click",l[11]),r=!0)},p(d,[c]){d[0]<3?f?(f.p(d,c),c&1&&p(f,1)):(f=Lt(d),f.c(),p(f,1),f.m(e,t)):f&&(ie(),b(f,1,1,()=>{f=null}),ue()),(!u||c&32)&&ye(s,d[5]),(!u||c&64&&i!==(i=`margin-left: ${d[6]}em`))&&w(e,"style",i),(!u||c&8)&&M(e,"selected",d[3]),(!u||c&16)&&M(e,"foldedParent",d[4]),(!u||c&1)&&M(e,"hasButtons",d[0]<3),(!u||c&64)&&M(e,"bold",d[6]<3),(!u||c&64)&&M(e,"big",d[6]<2)},i(d){u||(p(f),u=!0)},o(d){b(f),u=!1},d(d){d&&S(e),f&&f.d(),r=!1,a()}}}function Un(l,e,t){let n,{outlineLevel:o=0}=e,{toggleFold:s}=e,{link:i}=e,{runs:u}=e,{index:r}=e,{selected:a=!1}=e,{foldedParent:f=!1}=e,d="",c=ne("getDocLoader");const h=m=>{m.stopPropagation(),s()},g=()=>{c().teleport(i)};return l.$$set=m=>{"outlineLevel"in m&&t(0,o=m.outlineLevel),"toggleFold"in m&&t(1,s=m.toggleFold),"link"in m&&t(2,i=m.link),"runs"in m&&t(8,u=m.runs),"index"in m&&t(9,r=m.index),"selected"in m&&t(3,a=m.selected),"foldedParent"in m&&t(4,f=m.foldedParent)},l.$$.update=()=>{if(l.$$.dirty&1&&t(6,n=Math.min(o,3)),l.$$.dirty&288){t(5,d="");for(let m of u)t(5,d+=m.text)}},[o,s,i,a,f,d,n,c,u,r,h,g]}class Gn extends ae{constructor(e){super(),fe(this,e,Un,Kn,le,{outlineLevel:0,toggleFold:1,link:2,runs:8,index:9,selected:3,foldedParent:4})}}function Mt(l,e,t){const n=l.slice();return n[21]=e[t],n[23]=t,n}function Tt(l){let e,t,n,o,s,i,u,r;function a(c){l[15](c)}function f(c){l[16](c)}let d={serverCommand:l[8],fetchAmount:30,$$slots:{default:[Zn]},$$scope:{ctx:l}};return l[2]!==void 0&&(d.items=l[2]),l[0].loader!==void 0&&(d.state=l[0].loader),o=new rt({props:d}),l[14](o),W.push(()=>de(o,"items",a)),W.push(()=>de(o,"state",f)),{c(){e=T("div"),t=T("div"),n=T("div"),P(o.$$.fragment),w(n,"class","content svelte-pilaz9"),w(t,"class","viewer svelte-pilaz9"),w(e,"class","top svelte-pilaz9")},m(c,h){H(c,e,h),q(e,t),q(t,n),V(o,n,null),l[17](t),r=!0},p(c,h){const g={};h&16777380&&(g.$$scope={dirty:h,ctx:c}),!s&&h&4&&(s=!0,g.items=c[2],he(()=>s=!1)),!i&&h&1&&(i=!0,g.state=c[0].loader,he(()=>i=!1)),o.$set(g)},i(c){r||(p(o.$$.fragment,c),c&&Fe(()=>{r&&(u||(u=Re(e,ht,{},!0)),u.run(1))}),r=!0)},o(c){b(o.$$.fragment,c),c&&(u||(u=Re(e,ht,{},!1)),u.run(0)),r=!1},d(c){c&&S(e),l[14](null),D(o),l[17](null),c&&u&&u.end()}}}function Ot(l,e){let t,n,o;function s(){return e[13](e[23])}return n=new Gn({props:{outlineLevel:e[21].outline_level,link:e[21].link,runs:e[21].runs,index:e[21].index,toggleFold:s,foldedParent:e[7].hasOwnProperty(e[21].index),selected:e[21].index===e[5]}}),{key:l,first:null,c(){t=Le(),P(n.$$.fragment),this.first=t},m(i,u){H(i,t,u),V(n,i,u),o=!0},p(i,u){e=i;const r={};u&4&&(r.outlineLevel=e[21].outline_level),u&4&&(r.link=e[21].link),u&4&&(r.runs=e[21].runs),u&4&&(r.index=e[21].index),u&4&&(r.toggleFold=s),u&132&&(r.foldedParent=e[7].hasOwnProperty(e[21].index)),u&36&&(r.selected=e[21].index===e[5]),n.$set(r)},i(i){o||(p(n.$$.fragment,i),o=!0)},o(i){b(n.$$.fragment,i),o=!1},d(i){i&&S(t),D(n,i)}}}function Zn(l){let e=[],t=new Map,n,o,s=ke(l[2]);const i=u=>u[21].index;for(let u=0;u<s.length;u+=1){let r=Mt(l,s,u),a=i(r);t.set(a,e[u]=Ot(a,r))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();n=Le()},m(u,r){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(u,r);H(u,n,r),o=!0},p(u,r){r&676&&(s=ke(u[2]),ie(),e=ot(e,r,i,1,u,s,t,n.parentNode,st,Ot,n,Mt),ue())},i(u){if(!o){for(let r=0;r<s.length;r+=1)p(e[r]);o=!0}},o(u){for(let r=0;r<e.length;r+=1)b(e[r]);o=!1},d(u){u&&S(n);for(let r=0;r<e.length;r+=1)e[r].d(u)}}}function Xn(l){let e,t,n=l[1]&&Tt(l);return{c(){n&&n.c(),e=Le()},m(o,s){n&&n.m(o,s),H(o,e,s),t=!0},p(o,[s]){o[1]?n?(n.p(o,s),s&2&&p(n,1)):(n=Tt(o),n.c(),p(n,1),n.m(e.parentNode,e)):n&&(ie(),b(n,1,1,()=>{n=null}),ue())},i(o){t||(p(n),t=!0)},o(o){b(n),t=!1},d(o){o&&S(e),n&&n.d(o)}}}function Wn(l,e,t){let n,o=oe,s=()=>(o(),o=on(u,y=>t(12,n=y)),u);l.$$.on_destroy.push(()=>o());let i=ne("getDocLoader"),u;Ae(async function(){await He(),s(t(4,u=i().getFocusStore()))});let r=[],a=null;function f(){for(let y=0;y<r.length;y++)if(r[y].link>n.index){t(5,a=r[y].index-1);return}else if(r[y].link==n.index){t(5,a=r[y].index);return}}let d,c,{showOutline:h}=e,{state:g}=e;function m(){return c}async function C(y,_){return await Oe()}let k={},L={};async function R(y){let _=r[y];if(L.hasOwnProperty(_.index)){for(let j of L[_.index])t(11,k[j]=k[j].filter(A=>A!==_.index),k),k[j].length==0&&delete k[j];delete L[_.index],t(7,L),t(11,k),c.removeSkipRange(_.index),c.setMuteObservers(!0),t(2,r=r.slice(0,y+1)),await He(),c.updateIndex(),await c.loadBottom(),c.setMuteObservers(!1)}else{let j=r.slice(y),A=[],N=1;for(;N<j.length;){let E=j[N];if(_.outline_level!=null&&(E.outline_level==null||E.outline_level>_.outline_level))A.push(E.index);else break;if(N+1>=j.length){j[j.length-1].index;let K=await C();N=-1,j=K}N++}t(7,L[_.index]=[],L);for(let E of A)L[_.index].push(E),k.hasOwnProperty(E)?k[E].push(_.index):t(11,k[E]=[_.index],k);c.addSkipRange(_.index,A[0],A[A.length-1]),t(7,L),t(11,k)}}function J(){let y=[];for(let _ of r)k.hasOwnProperty(_.index)||y.push(_);t(2,r=y)}const X=y=>R(y);function z(y){W[y?"unshift":"push"](()=>{c=y,t(3,c)})}function B(y){r=y,t(2,r)}function U(y){l.$$.not_equal(g.loader,y)&&(g.loader=y,t(0,g))}function O(y){W[y?"unshift":"push"](()=>{d=y,t(6,d)})}return l.$$set=y=>{"showOutline"in y&&t(1,h=y.showOutline),"state"in y&&t(0,g=y.state)},l.$$.update=()=>{l.$$.dirty&4096&&f(),l.$$.dirty&10&&(h||c==null||c.saveState()),l.$$.dirty&2052&&J()},[g,h,r,c,u,a,d,L,C,R,m,k,n,X,z,B,U,O]}class Yn extends ae{constructor(e){super(),fe(this,e,Wn,Xn,le,{showOutline:1,state:0,getLoader:10})}get getLoader(){return this.$$.ctx[10]}}function Jn(l){let e,t,n;return{c(){e=T("textarea"),w(e,"placeholder",l[0]),w(e,"spellcheck",!1),w(e,"class","svelte-34onry")},m(o,s){H(o,e,s),l[9](e),Xe(e,l[2]),t||(n=[x(e,"keydown",l[5]),x(e,"input",l[10])],t=!0)},p(o,[s]){s&1&&w(e,"placeholder",o[0]),s&4&&Xe(e,o[2])},i:oe,o:oe,d(o){o&&S(e),l[9](null),t=!1,je(n)}}}function $n(l,e,t){let n,o,{placeholder:s=""}=e,{matchCase:i}=e,{onlyOutline:u}=e,r=ne("query");re(l,r,R=>t(12,o=R));let a=ne("selectedQuery");re(l,a,R=>t(8,n=R));let f=ne("prevResult"),d=ne("nextResult");function c(R){R.key==="Enter"||R.key==="Tab"?(R.preventDefault(),R.stopPropagation(),R.shiftKey?f():d()):R.key=="ArrowUp"?(R.preventDefault(),R.stopPropagation(),f()):R.key=="ArrowDown"?(R.preventDefault(),R.stopPropagation(),d()):R.key==="Escape"&&(R.preventDefault(),R.stopPropagation(),h.blur(),ce(r,o.text="",o),t(2,g=""),ce(a,n.paraIndex=void 0,n),ce(a,n.charIndex=void 0,n))}let h;Ne("CommandOrControl+F",()=>{h.focus()});let g="",m;function C(){m&&clearTimeout(m),m=setTimeout(()=>{r.set({text:g.replace(/\u00A0/g," "),matchCase:i,onlyOutline:u})},200)}function k(R){W[R?"unshift":"push"](()=>{h=R,t(1,h)})}function L(){g=this.value,t(2,g)}return l.$$set=R=>{"placeholder"in R&&t(0,s=R.placeholder),"matchCase"in R&&t(6,i=R.matchCase),"onlyOutline"in R&&t(7,u=R.onlyOutline)},l.$$.update=()=>{l.$$.dirty&258&&n.paraIndex!=null&&h.focus(),l.$$.dirty&4&&C()},[s,h,g,r,a,c,i,u,n,k,L]}class xn extends ae{constructor(e){super(),fe(this,e,$n,Jn,le,{placeholder:0,matchCase:6,onlyOutline:7})}}function Ht(l){let e,t;return e=new pe({props:{background:!1,$$slots:{default:[el]},$$scope:{ctx:l}}}),e.$on("click",function(){Qt(l[3])&&l[3].apply(this,arguments)}),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},p(n,o){l=n;const s={};o&1048576&&(s.$$scope={dirty:o,ctx:l}),e.$set(s)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function el(l){let e,t;return e=new ve({props:{name:"link"}}),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},p:oe,i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function tl(l){let e,t;return e=new Je({props:{direction:l[0]?"left":"right"}}),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},p(n,o){const s={};o&1&&(s.direction=n[0]?"left":"right"),e.$set(s)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function nl(l){let e,t;return e=new ve({props:{name:"magnifyGlassPlus"}}),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},p:oe,i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function ll(l){let e,t;return e=new ve({props:{name:"magnifyGlassMinus"}}),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},p:oe,i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function ol(l){let e;return{c(){e=ge("No open file")},m(t,n){H(t,e,n)},p:oe,d(t){t&&S(e)}}}function sl(l){let e=l[8].name+"",t;return{c(){t=ge(e)},m(n,o){H(n,t,o)},p(n,o){o&256&&e!==(e=n[8].name+"")&&ye(t,e)},d(n){n&&S(t)}}}function rl(l){let e;return{c(){e=ge("Load Sample")},m(t,n){H(t,e,n)},d(t){t&&S(e)}}}function il(l){let e,t,n;return e=new ve({props:{name:"add"}}),{c(){P(e.$$.fragment),t=ge("Import Docx")},m(o,s){V(e,o,s),H(o,t,s),n=!0},p:oe,i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){b(e.$$.fragment,o),n=!1},d(o){o&&S(t),D(e,o)}}}function St(l){let e,t,n,o,s,i;return t=new pe({props:{background:!1,$$slots:{default:[ul]},$$scope:{ctx:l}}}),t.$on("click",l[19]),{c(){e=T("div"),P(t.$$.fragment),w(e,"class","search-buttons svelte-gsu3sp")},m(u,r){H(u,e,r),V(t,e,null),o=!0,s||(i=x(e,"mousedown",sn(Ye(cl))),s=!0)},p(u,r){const a={};r&1048578&&(a.$$scope={dirty:r,ctx:u}),t.$set(a)},i(u){o||(p(t.$$.fragment,u),u&&Fe(()=>{o&&(n||(n=Re(e,ft,{duration:300},!0)),n.run(1))}),o=!0)},o(u){b(t.$$.fragment,u),u&&(n||(n=Re(e,ft,{duration:300},!1)),n.run(0)),o=!1},d(u){u&&S(e),D(t),u&&n&&n.end(),s=!1,i()}}}function ul(l){let e,t;return e=new Je({props:{direction:l[1]?"right":"left"}}),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},p(n,o){const s={};o&2&&(s.direction=n[1]?"right":"left"),e.$set(s)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function al(l){let e,t,n,o,s,i,u,r,a,f,d,c,h,g,m,C,k,L,R,J,X,z,B,U,O,y,_=l[0]&&Ht(l);o=new pe({props:{background:!1,$$slots:{default:[tl]},$$scope:{ctx:l}}}),o.$on("click",l[16]),r=new pe({props:{background:!1,$$slots:{default:[nl]},$$scope:{ctx:l}}}),r.$on("click",l[17]),f=new pe({props:{background:!1,$$slots:{default:[ll]},$$scope:{ctx:l}}}),f.$on("click",l[18]);function j(K,Z){return K[8].open?sl:ol}let A=j(l),N=A(l);k=new pe({props:{hoverShadow:!0,$$slots:{default:[rl]},$$scope:{ctx:l}}}),k.$on("click",fl),R=new pe({props:{hoverShadow:!0,$$slots:{default:[il]},$$scope:{ctx:l}}}),R.$on("click",function(){Qt(l[2])&&l[2].apply(this,arguments)}),z=new xn({props:{placeholder:"Search",matchCase:l[4],onlyOutline:l[5]}});let E=l[10].text.length>0&&St(l);return{c(){e=T("div"),t=T("section"),_&&_.c(),n=Y(),P(o.$$.fragment),s=Y(),i=T("section"),u=T("div"),P(r.$$.fragment),a=Y(),P(f.$$.fragment),d=Y(),c=T("div"),h=T("h1"),N.c(),g=Y(),m=T("input"),C=Y(),P(k.$$.fragment),L=Y(),P(R.$$.fragment),J=Y(),X=T("section"),P(z.$$.fragment),B=Y(),E&&E.c(),w(t,"class","outline svelte-gsu3sp"),w(u,"class","start svelte-gsu3sp"),w(h,"class","svelte-gsu3sp"),w(m,"type","file"),w(m,"id","filePicker"),m.hidden=!0,w(c,"class","center svelte-gsu3sp"),w(i,"class","general svelte-gsu3sp"),M(i,"open",l[8].open),w(X,"class","search svelte-gsu3sp"),w(e,"class","top svelte-gsu3sp"),M(e,"showOutline",l[0]),M(e,"showSearchResults",l[1]),M(e,"isResizing",l[6]),M(e,"isFullscreen",l[7])},m(K,Z){H(K,e,Z),q(e,t),_&&_.m(t,null),q(t,n),V(o,t,null),q(e,s),q(e,i),q(i,u),V(r,u,null),q(u,a),V(f,u,null),q(i,d),q(i,c),q(c,h),N.m(h,null),q(c,g),q(c,m),q(c,C),V(k,c,null),q(c,L),V(R,c,null),q(e,J),q(e,X),V(z,X,null),q(X,B),E&&E.m(X,null),U=!0,O||(y=x(e,"select",dl),O=!0)},p(K,[Z]){l=K,l[0]?_?(_.p(l,Z),Z&1&&p(_,1)):(_=Ht(l),_.c(),p(_,1),_.m(t,n)):_&&(ie(),b(_,1,1,()=>{_=null}),ue());const Se={};Z&1048577&&(Se.$$scope={dirty:Z,ctx:l}),o.$set(Se);const Me={};Z&1048576&&(Me.$$scope={dirty:Z,ctx:l}),r.$set(Me);const Ce={};Z&1048576&&(Ce.$$scope={dirty:Z,ctx:l}),f.$set(Ce),A===(A=j(l))&&N?N.p(l,Z):(N.d(1),N=A(l),N&&(N.c(),N.m(h,null)));const Q={};Z&1048576&&(Q.$$scope={dirty:Z,ctx:l}),k.$set(Q);const ee={};Z&1048576&&(ee.$$scope={dirty:Z,ctx:l}),R.$set(ee),(!U||Z&256)&&M(i,"open",l[8].open);const I={};Z&16&&(I.matchCase=l[4]),Z&32&&(I.onlyOutline=l[5]),z.$set(I),l[10].text.length>0?E?(E.p(l,Z),Z&1024&&p(E,1)):(E=St(l),E.c(),p(E,1),E.m(X,null)):E&&(ie(),b(E,1,1,()=>{E=null}),ue()),(!U||Z&1)&&M(e,"showOutline",l[0]),(!U||Z&2)&&M(e,"showSearchResults",l[1]),(!U||Z&64)&&M(e,"isResizing",l[6]),(!U||Z&128)&&M(e,"isFullscreen",l[7])},i(K){U||(p(_),p(o.$$.fragment,K),p(r.$$.fragment,K),p(f.$$.fragment,K),p(k.$$.fragment,K),p(R.$$.fragment,K),p(z.$$.fragment,K),p(E),U=!0)},o(K){b(_),b(o.$$.fragment,K),b(r.$$.fragment,K),b(f.$$.fragment,K),b(k.$$.fragment,K),b(R.$$.fragment,K),b(z.$$.fragment,K),b(E),U=!1},d(K){K&&S(e),_&&_.d(),D(o),D(r),D(f),N.d(),D(k),D(R),D(z),E&&E.d(),O=!1,y()}}}function fl(){}const cl=()=>{},dl=()=>!1;function hl(l,e,t){let n,o,s,i,u,{showOutline:r}=e,{chooseFile:a}=e,{alignOutlineFocus:f}=e,{showSearchResults:d}=e,{matchCase:c}=e,{onlyOutline:h}=e,g=ne("query");re(l,g,B=>t(10,u=B));let m=ne("zoom");re(l,m,B=>t(9,i=B));let C=ne("isResizing");re(l,C,B=>t(6,n=B));let k=ne("fileInfo");re(l,k,B=>t(8,s=B));let L=ne("isFullscreen");re(l,L,B=>t(7,o=B));const R=()=>t(0,r=!r),J=()=>ce(m,i+=.1,i),X=()=>ce(m,i-=.1,i),z=()=>t(1,d=!d);return l.$$set=B=>{"showOutline"in B&&t(0,r=B.showOutline),"chooseFile"in B&&t(2,a=B.chooseFile),"alignOutlineFocus"in B&&t(3,f=B.alignOutlineFocus),"showSearchResults"in B&&t(1,d=B.showSearchResults),"matchCase"in B&&t(4,c=B.matchCase),"onlyOutline"in B&&t(5,h=B.onlyOutline)},[r,d,a,f,c,h,n,o,s,i,u,g,m,C,k,L,R,J,X,z]}class gl extends ae{constructor(e){super(),fe(this,e,hl,al,le,{showOutline:0,chooseFile:2,alignOutlineFocus:3,showSearchResults:1,matchCase:4,onlyOutline:5})}}function ml(l){let e,t;return e=new pe({props:{hoverShadow:!0,$$slots:{default:[pl]},$$scope:{ctx:l}}}),e.$on("click",l[6]),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},p(n,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function _l(l){let e,t;return e=new pe({props:{background:!1,$$slots:{default:[kl]},$$scope:{ctx:l}}}),e.$on("click",l[5]),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},p(n,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function pl(l){let e,t;return e=new ve({props:{name:l[1]}}),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},p(n,o){const s={};o&2&&(s.name=n[1]),e.$set(s)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function kl(l){let e,t;return e=new ve({props:{name:"delete"}}),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},p:oe,i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function It(l){let e,t,n,o,s,i;const u=l[4].default,r=Ve(u,l,l[7],null);return{c(){e=T("div"),t=T("h1"),n=ge(l[3]),o=Y(),r&&r.c(),w(t,"class","svelte-tm1pug"),w(e,"class","content svelte-tm1pug")},m(a,f){H(a,e,f),q(e,t),q(t,n),q(e,o),r&&r.m(e,null),i=!0},p(a,f){l=a,(!i||f&8)&&ye(n,l[3]),r&&r.p&&(!i||f&128)&&De(r,u,l,l[7],i?Qe(u,l[7],f,null):Ee(l[7]),null)},i(a){i||(p(r,a),a&&Fe(()=>{i&&(s||(s=Re(e,gt,{align:l[2]},!0)),s.run(1))}),i=!0)},o(a){b(r,a),a&&(s||(s=Re(e,gt,{align:l[2]},!1)),s.run(0)),i=!1},d(a){a&&S(e),r&&r.d(a),a&&s&&s.end()}}}function wl(l){let e,t,n,o,s,i;const u=[_l,ml],r=[];function a(d,c){return d[0]?0:1}n=a(l),o=r[n]=u[n](l);let f=l[0]&&It(l);return{c(){e=T("div"),t=T("div"),o.c(),s=Y(),f&&f.c(),w(t,"class","opener svelte-tm1pug"),M(t,"right",l[2]==te.Right||l[2]==te.TopRight||l[2]==te.BottomRight),M(t,"bottom",l[2]==te.Bottom||l[2]==te.BottomLeft||l[2]==te.BottomRight),w(e,"class","top svelte-tm1pug"),M(e,"open",l[0])},m(d,c){H(d,e,c),q(e,t),r[n].m(t,null),q(e,s),f&&f.m(e,null),i=!0},p(d,[c]){let h=n;n=a(d),n===h?r[n].p(d,c):(ie(),b(r[h],1,1,()=>{r[h]=null}),ue(),o=r[n],o?o.p(d,c):(o=r[n]=u[n](d),o.c()),p(o,1),o.m(t,null)),(!i||c&4)&&M(t,"right",d[2]==te.Right||d[2]==te.TopRight||d[2]==te.BottomRight),(!i||c&4)&&M(t,"bottom",d[2]==te.Bottom||d[2]==te.BottomLeft||d[2]==te.BottomRight),d[0]?f?(f.p(d,c),c&1&&p(f,1)):(f=It(d),f.c(),p(f,1),f.m(e,null)):f&&(ie(),b(f,1,1,()=>{f=null}),ue()),(!i||c&1)&&M(e,"open",d[0])},i(d){i||(p(o),p(f),i=!0)},o(d){b(o),b(f),i=!1},d(d){d&&S(e),r[n].d(),f&&f.d()}}}function bl(l,e,t){let{$$slots:n={},$$scope:o}=e,{icon:s="ellipses"}=e,{align:i=te.Left}=e,{title:u="Panel"}=e,{open:r=!1}=e;const a=()=>t(0,r=!r),f=()=>t(0,r=!r);return l.$$set=d=>{"icon"in d&&t(1,s=d.icon),"align"in d&&t(2,i=d.align),"title"in d&&t(3,u=d.title),"open"in d&&t(0,r=d.open),"$$scope"in d&&t(7,o=d.$$scope)},[r,s,i,u,n,a,f,o]}class Kt extends ae{constructor(e){super(),fe(this,e,bl,wl,le,{icon:1,align:2,title:3,open:0})}}function yl(l){let e,t;const n=l[1].default,o=Ve(n,l,l[0],null);return{c(){e=T("div"),o&&o.c(),w(e,"class","top svelte-1vxmb17")},m(s,i){H(s,e,i),o&&o.m(e,null),t=!0},p(s,[i]){o&&o.p&&(!t||i&1)&&De(o,n,s,s[0],t?Qe(n,s[0],i,null):Ee(s[0]),null)},i(s){t||(p(o,s),t=!0)},o(s){b(o,s),t=!1},d(s){s&&S(e),o&&o.d(s)}}}function vl(l,e,t){let{$$slots:n={},$$scope:o}=e;return l.$$set=s=>{"$$scope"in s&&t(0,o=s.$$scope)},[o,n]}class Ut extends ae{constructor(e){super(),fe(this,e,vl,yl,le,{})}}function Cl(l){let e,t;return e=new ve({props:{name:"delete"}}),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Rl(l){let e,t;return e=new ve({props:{name:"check"}}),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function qt(l){let e,t,n,o,s;const i=[Rl,Cl],u=[];function r(a,f){return a[0]?0:1}return t=r(l),n=u[t]=i[t](l),{c(){e=T("button"),n.c(),w(e,"class","svelte-kbjdat")},m(a,f){H(a,e,f),u[t].m(e,null),s=!0},p(a,f){let d=t;t=r(a),t!==d&&(ie(),b(u[d],1,1,()=>{u[d]=null}),ue(),n=u[t],n||(n=u[t]=i[t](a),n.c()),p(n,1),n.m(e,null))},i(a){s||(p(n),a&&(o||Fe(()=>{o=Dt(e,hn,{}),o.start()})),s=!0)},o(a){b(n),s=!1},d(a){a&&S(e),u[t].d()}}}function Ll(l){let e,t,n,o,s,i,u=l[0],r,a,f,d=qt(l);return{c(){e=T("label"),t=T("div"),n=ge(l[1]),o=Y(),s=T("input"),i=Y(),d.c(),w(t,"class","labelText"),w(s,"type","checkbox"),s.hidden=!0,w(s,"class","svelte-kbjdat"),w(e,"class","svelte-kbjdat"),M(e,"checked",l[0])},m(c,h){H(c,e,h),q(e,t),q(t,n),q(e,o),q(e,s),s.checked=l[0],q(e,i),d.m(e,null),r=!0,a||(f=[x(s,"change",l[3]),x(e,"click",Ye(l[2]))],a=!0)},p(c,[h]){(!r||h&2)&&ye(n,c[1]),h&1&&(s.checked=c[0]),h&1&&le(u,u=c[0])?(ie(),b(d,1,1,oe),ue(),d=qt(c),d.c(),p(d,1),d.m(e,null)):d.p(c,h),(!r||h&1)&&M(e,"checked",c[0])},i(c){r||(p(d),r=!0)},o(c){b(d),r=!1},d(c){c&&S(e),d.d(c),a=!1,je(f)}}}function Ml(l,e,t){let{value:n}=e,{labelText:o="checkbox"}=e;function s(){console.log("bruh"),t(0,n=!n)}function i(){n=this.checked,t(0,n)}return l.$$set=u=>{"value"in u&&t(0,n=u.value),"labelText"in u&&t(1,o=u.labelText)},[n,o,s,i]}class We extends ae{constructor(e){super(),fe(this,e,Ml,Ll,le,{value:0,labelText:1})}}function Tl(l){const e=t=>{l.contains(t.target)||l.dispatchEvent(new CustomEvent("outclick"))};return document.addEventListener("click",e,!0),{destroy(){document.removeEventListener("click",e,!0)}}}function Ol(l){let e,t;return e=new Je({props:{direction:l[2]?"up":"down"}}),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},p(n,o){const s={};o&4&&(s.direction=n[2]?"up":"down"),e.$set(s)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function zt(l){let e,t,n,o;return t=new Ut({props:{$$slots:{default:[Hl]},$$scope:{ctx:l}}}),{c(){e=T("div"),P(t.$$.fragment),w(e,"class","settings svelte-a5j25")},m(s,i){H(s,e,i),V(t,e,null),o=!0},i(s){o||(p(t.$$.fragment,s),s&&Fe(()=>{o&&(n||(n=Re(e,mt,{},!0)),n.run(1))}),o=!0)},o(s){b(t.$$.fragment,s),s&&(n||(n=Re(e,mt,{},!1)),n.run(0)),o=!1},d(s){s&&S(e),D(t),s&&n&&n.end()}}}function Hl(l){let e,t,n,o;return e=new We({props:{labelText:"Apply to this file",value:!0}}),n=new We({props:{labelText:"Apply to this folder",value:!0}}),{c(){P(e.$$.fragment),t=Y(),P(n.$$.fragment)},m(s,i){V(e,s,i),H(s,t,i),V(n,s,i),o=!0},p:oe,i(s){o||(p(e.$$.fragment,s),p(n.$$.fragment,s),o=!0)},o(s){b(e.$$.fragment,s),b(n.$$.fragment,s),o=!1},d(s){s&&S(t),D(e,s),D(n,s)}}}function Sl(l){let e,t,n,o,s,i,u,r,a,f,d,c,h,g,m;a=new pe({props:{background:!1,$$slots:{default:[Ol]},$$scope:{ctx:l}}}),a.$on("click",l[9]);let C=l[2]&&zt(l);return{c(){e=T("div"),t=T("div"),n=T("button"),o=Y(),s=T("div"),i=T("input"),u=Y(),r=T("div"),P(a.$$.fragment),f=Y(),C&&C.c(),d=Y(),c=T("div"),w(n,"class","noColor svelte-a5j25"),w(t,"class","selector svelte-a5j25"),M(t,"on",!l[0]),w(i,"class","colorRange svelte-a5j25"),w(i,"type","range"),w(i,"min","0"),w(i,"max","360"),w(i,"title","Choose window hue"),w(s,"class","selector svelte-a5j25"),M(s,"on",l[0]),w(e,"class","content svelte-a5j25"),w(r,"class","settingsShower svelte-a5j25"),w(c,"class","spacefiller svelte-a5j25")},m(k,L){H(k,e,L),q(e,t),q(t,n),q(e,o),q(e,s),q(s,i),Xe(i,l[1]),H(k,u,L),H(k,r,L),V(a,r,null),H(k,f,L),C&&C.m(k,L),H(k,d,L),H(k,c,L),h=!0,g||(m=[x(n,"mousedown",l[4]),x(t,"click",l[5]),x(i,"change",l[6]),x(i,"input",l[6]),x(i,"mousedown",l[7]),x(s,"click",l[8])],g=!0)},p(k,L){(!h||L&1)&&M(t,"on",!k[0]),L&2&&Xe(i,k[1]),(!h||L&1)&&M(s,"on",k[0]);const R={};L&4100&&(R.$$scope={dirty:L,ctx:k}),a.$set(R),k[2]?C?L&4&&p(C,1):(C=zt(k),C.c(),p(C,1),C.m(d.parentNode,d)):C&&(ie(),b(C,1,1,()=>{C=null}),ue())},i(k){h||(p(a.$$.fragment,k),p(C),h=!0)},o(k){b(a.$$.fragment,k),b(C),h=!1},d(k){k&&(S(e),S(u),S(r),S(f),S(d),S(c)),D(a),C&&C.d(k),g=!1,je(m)}}}function Il(l){let e,t,n,o,s,i,u;function r(f){l[10](f)}let a={title:"Change window color",align:te.BottomRight,icon:"rainbow",$$slots:{default:[Sl]},$$scope:{ctx:l}};return l[3]!==void 0&&(a.open=l[3]),t=new Kt({props:a}),W.push(()=>de(t,"open",r)),{c(){e=T("div"),P(t.$$.fragment),w(e,"class","top svelte-a5j25"),w(e,"style",o=`--hue:${l[1]}`),M(e,"usingHue",l[0])},m(f,d){H(f,e,d),V(t,e,null),s=!0,i||(u=[rn(Tl.call(null,e)),x(e,"outclick",l[11])],i=!0)},p(f,[d]){const c={};d&4103&&(c.$$scope={dirty:d,ctx:f}),!n&&d&8&&(n=!0,c.open=f[3],he(()=>n=!1)),t.$set(c),(!s||d&2&&o!==(o=`--hue:${f[1]}`))&&w(e,"style",o),(!s||d&1)&&M(e,"usingHue",f[0])},i(f){s||(p(t.$$.fragment,f),s=!0)},o(f){b(t.$$.fragment,f),s=!1},d(f){f&&S(e),D(t),i=!1,je(u)}}}function ql(l,e,t){let{usingHue:n}=e,{hue:o=0}=e,s=!1,i=!1;const u=()=>t(0,n=!1),r=()=>t(0,n=!1);function a(){o=un(this.value),t(1,o)}const f=()=>t(0,n=!0),d=()=>t(0,n=!0),c=()=>t(2,s=!s);function h(m){i=m,t(3,i)}const g=()=>t(3,i=!1);return l.$$set=m=>{"usingHue"in m&&t(0,n=m.usingHue),"hue"in m&&t(1,o=m.hue)},[n,o,s,i,u,r,a,f,d,c,h,g]}class zl extends ae{constructor(e){super(),fe(this,e,ql,Il,le,{usingHue:0,hue:1})}}function Fl(l){let e=l[0].slice(l[3])+"",t;return{c(){t=ge(e)},m(n,o){H(n,t,o)},p(n,o){o&9&&e!==(e=n[0].slice(n[3])+"")&&ye(t,e)},d(n){n&&S(t)}}}function jl(l){let e=l[0].slice(l[3],l[2])+"",t,n,o=l[0].slice(l[2],l[4].text.length+l[2])+"",s,i=l[0].slice(l[4].text.length+l[2])+"",u;return{c(){t=ge(e),n=T("mark"),s=ge(o),u=ge(i),w(n,"class","svelte-ct1rub")},m(r,a){H(r,t,a),H(r,n,a),q(n,s),H(r,u,a)},p(r,a){a&13&&e!==(e=r[0].slice(r[3],r[2])+"")&&ye(t,e),a&21&&o!==(o=r[0].slice(r[2],r[4].text.length+r[2])+"")&&ye(s,o),a&21&&i!==(i=r[0].slice(r[4].text.length+r[2])+"")&&ye(u,i)},d(r){r&&(S(t),S(n),S(u))}}}function Bl(l){let e;function t(s,i){return s[2]!=null?jl:Fl}let n=t(l),o=n(l);return{c(){e=T("span"),o.c(),w(e,"class","svelte-ct1rub"),M(e,"bold",l[1].bold),M(e,"underline",l[1].underline),M(e,"highlight",l[1].highlight)},m(s,i){H(s,e,i),o.m(e,null)},p(s,[i]){n===(n=t(s))&&o?o.p(s,i):(o.d(1),o=n(s),o&&(o.c(),o.m(e,null))),i&2&&M(e,"bold",s[1].bold),i&2&&M(e,"underline",s[1].underline),i&2&&M(e,"highlight",s[1].highlight)},i:oe,o:oe,d(s){s&&S(e),o.d()}}}function Pl(l,e,t){let n,o=ne("query");re(l,o,a=>t(4,n=a));let{text:s}=e,{style:i}=e,{queryMatch:u}=e,{startCutoff:r}=e;return l.$$set=a=>{"text"in a&&t(0,s=a.text),"style"in a&&t(1,i=a.style),"queryMatch"in a&&t(2,u=a.queryMatch),"startCutoff"in a&&t(3,r=a.startCutoff)},[s,i,u,r,n,o]}class Vl extends ae{constructor(e){super(),fe(this,e,Pl,Bl,le,{text:0,style:1,queryMatch:2,startCutoff:3})}}function Ft(l,e,t){const n=l.slice();return n[19]=e[t],n}function jt(l){let e,t;return e=new Vl({props:{text:l[19].text,style:l[19].style,queryMatch:l[19].queryMatch,startCutoff:l[19].startCutoff}}),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},p:oe,i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Dl(l){let e,t,n,o,s,i=ke(l[3]),u=[];for(let a=0;a<i.length;a+=1)u[a]=jt(Ft(l,i,a));const r=a=>b(u[a],1,1,()=>{u[a]=null});return{c(){e=T("li"),t=T("p");for(let a=0;a<u.length;a+=1)u[a].c();w(t,"class","svelte-1c5mfjs"),w(e,"class","svelte-1c5mfjs"),M(e,"selected",l[0])},m(a,f){H(a,e,f),q(e,t);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(t,null);l[14](e),n=!0,o||(s=[x(e,"click",l[4]),x(e,"mousedown",Ye(l[13]))],o=!0)},p(a,[f]){if(f&8){i=ke(a[3]);let d;for(d=0;d<i.length;d+=1){const c=Ft(a,i,d);u[d]?(u[d].p(c,f),p(u[d],1)):(u[d]=jt(c),u[d].c(),p(u[d],1),u[d].m(t,null))}for(ie(),d=i.length;d<u.length;d+=1)r(d);ue()}(!n||f&1)&&M(e,"selected",a[0])},i(a){if(!n){for(let f=0;f<i.length;f+=1)p(u[f]);n=!0}},o(a){u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)b(u[f]);n=!1},d(a){a&&S(e),lt(u,a),l[14](null),o=!1,je(s)}}}function El(l,e,t){let n,{link:o}=e,{index:s}=e,{para:i}=e,{queryIndex:u}=e,{selected:r}=e,a=ne("query");re(l,a,z=>t(12,n=z));let f=ne("selectedQuery"),d,c,h=i.runs.reduce((z,B)=>z+B.text,""),g=[],m;async function C(){R().teleport(i.index),r&&(f.set({paraIndex:null,charIndex:null}),await He()),f.set({paraIndex:i.index,charIndex:c})}let{selectSelf:k}=e;function L(){r?C():k()}let R=ne("getDocLoader");function J(z){Et.call(this,l,z)}function X(z){W[z?"unshift":"push"](()=>{m=z,t(1,m)})}return l.$$set=z=>{"link"in z&&t(5,o=z.link),"index"in z&&t(6,s=z.index),"para"in z&&t(7,i=z.para),"queryIndex"in z&&t(8,u=z.queryIndex),"selected"in z&&t(0,r=z.selected),"selectSelf"in z&&t(9,k=z.selectSelf)},l.$$.update=()=>{if(l.$$.dirty&7552){let z=h;n.matchCase||(z=h.toLowerCase()),t(11,c=-1);for(let U=0;U<u+1;U++){let O=n.text;n.matchCase||(O=n.text.toLowerCase()),t(11,c=z.indexOf(O,c+1))}for(t(10,d=Math.max(0,c-30));h[d-1]!==" ";){if(d>=c){t(10,d=Math.max(0,c-30));break}t(10,d++,d)}let B=0;for(let U of i.runs){if(B+U.text.length>d){let O=0;d>B&&(O=B-d);let y;c+n.text.length>=B&&c<B+U.text.length&&(y=c-B),g.push({...U,queryMatch:y,startCutoff:O})}B+=U.text.length}}l.$$.dirty&1&&r&&C()},[r,m,a,g,L,o,s,i,u,k,d,c,n,J,X]}class Ql extends ae{constructor(e){super(),fe(this,e,El,Dl,le,{link:5,index:6,para:7,queryIndex:8,selected:0,selectSelf:9})}}function Bt(l,e,t){const n=l.slice();return n[22]=e[t],n}function Pt(l){let e,t,n,o,s,i,u,r,a,f,d;n=new Kt({props:{icon:"funnel",align:te.TopRight,title:"Filter results",$$slots:{default:[Al]},$$scope:{ctx:l}}});function c(m){l[17](m)}function h(m){l[18](m)}let g={viewerElement:l[3],serverCommand:l[8],fetchAmount:30,$$slots:{default:[Kl]},$$scope:{ctx:l}};return l[6]!==void 0&&(g.items=l[6]),l[0].loader!==void 0&&(g.state=l[0].loader),u=new rt({props:g}),l[16](u),W.push(()=>de(u,"items",c)),W.push(()=>de(u,"state",h)),{c(){e=T("div"),t=T("div"),P(n.$$.fragment),o=Y(),s=T("div"),i=T("div"),P(u.$$.fragment),w(t,"class","options svelte-otay0e"),w(i,"class","content svelte-otay0e"),w(s,"class","viewer svelte-otay0e"),w(e,"class","top svelte-otay0e"),M(e,"showSearchResults",l[1])},m(m,C){H(m,e,C),q(e,t),V(n,t,null),q(e,o),q(e,s),q(s,i),V(u,i,null),l[19](s),d=!0},p(m,C){const k={};C&33554433&&(k.$$scope={dirty:C,ctx:m}),n.$set(k);const L={};C&8&&(L.viewerElement=m[3]),C&33554528&&(L.$$scope={dirty:C,ctx:m}),!r&&C&64&&(r=!0,L.items=m[6],he(()=>r=!1)),!a&&C&1&&(a=!0,L.state=m[0].loader,he(()=>a=!1)),u.$set(L),(!d||C&2)&&M(e,"showSearchResults",m[1])},i(m){d||(p(n.$$.fragment,m),p(u.$$.fragment,m),m&&Fe(()=>{d&&(f||(f=Re(e,dt,{},!0)),f.run(1))}),d=!0)},o(m){b(n.$$.fragment,m),b(u.$$.fragment,m),m&&(f||(f=Re(e,dt,{},!1)),f.run(0)),d=!1},d(m){m&&S(e),D(n),l[16](null),D(u),l[19](null),m&&f&&f.end()}}}function Nl(l){let e,t,n,o,s,i;function u(d){l[13](d)}let r={labelText:"Match case"};l[0].matchCase!==void 0&&(r.value=l[0].matchCase),e=new We({props:r}),W.push(()=>de(e,"value",u));function a(d){l[14](d)}let f={labelText:"Only incude headers"};return l[0].onlyOutline!==void 0&&(f.value=l[0].onlyOutline),o=new We({props:f}),W.push(()=>de(o,"value",a)),{c(){P(e.$$.fragment),n=Y(),P(o.$$.fragment)},m(d,c){V(e,d,c),H(d,n,c),V(o,d,c),i=!0},p(d,c){const h={};!t&&c&1&&(t=!0,h.value=d[0].matchCase,he(()=>t=!1)),e.$set(h);const g={};!s&&c&1&&(s=!0,g.value=d[0].onlyOutline,he(()=>s=!1)),o.$set(g)},i(d){i||(p(e.$$.fragment,d),p(o.$$.fragment,d),i=!0)},o(d){b(e.$$.fragment,d),b(o.$$.fragment,d),i=!1},d(d){d&&S(n),D(e,d),D(o,d)}}}function Al(l){let e,t;return e=new Ut({props:{$$slots:{default:[Nl]},$$scope:{ctx:l}}}),{c(){P(e.$$.fragment)},m(n,o){V(e,n,o),t=!0},p(n,o){const s={};o&33554433&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Vt(l,e){let t,n,o;function s(){return e[15](e[22])}return n=new Ql({props:{link:e[22].link,index:e[22].index,para:e[22].para,queryIndex:e[22].query_index,selected:e[22].index==e[5],selectSelf:s}}),{key:l,first:null,c(){t=Le(),P(n.$$.fragment),this.first=t},m(i,u){H(i,t,u),V(n,i,u),o=!0},p(i,u){e=i;const r={};u&64&&(r.link=e[22].link),u&64&&(r.index=e[22].index),u&64&&(r.para=e[22].para),u&64&&(r.queryIndex=e[22].query_index),u&96&&(r.selected=e[22].index==e[5]),u&64&&(r.selectSelf=s),n.$set(r)},i(i){o||(p(n.$$.fragment,i),o=!0)},o(i){b(n.$$.fragment,i),o=!1},d(i){i&&S(t),D(n,i)}}}function Kl(l){let e=[],t=new Map,n,o,s=ke(l[6]);const i=u=>u[22].index;for(let u=0;u<s.length;u+=1){let r=Bt(l,s,u),a=i(r);t.set(a,e[u]=Vt(a,r))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();n=Le()},m(u,r){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(u,r);H(u,n,r),o=!0},p(u,r){r&608&&(s=ke(u[6]),ie(),e=ot(e,r,i,1,u,s,t,n.parentNode,st,Vt,n,Bt),ue())},i(u){if(!o){for(let r=0;r<s.length;r+=1)p(e[r]);o=!0}},o(u){for(let r=0;r<e.length;r+=1)b(e[r]);o=!1},d(u){u&&S(n);for(let r=0;r<e.length;r+=1)e[r].d(u)}}}function Ul(l){let e,t,n=l[2].text.length>0&&Pt(l);return{c(){e=T("div"),n&&n.c(),w(e,"class","hider svelte-otay0e")},m(o,s){H(o,e,s),n&&n.m(e,null),t=!0},p(o,[s]){o[2].text.length>0?n?(n.p(o,s),s&4&&p(n,1)):(n=Pt(o),n.c(),p(n,1),n.m(e,null)):n&&(ie(),b(n,1,1,()=>{n=null}),ue())},i(o){t||(p(n),t=!0)},o(o){b(n),t=!1},d(o){o&&S(e),n&&n.d()}}}function Gl(l,e,t){let n,o,s,i=ne("query");re(l,i,O=>t(2,n=O));function u(){return s}let{state:r}=e;async function a(O,y){return n.text.length>0?await Oe("search",{query:{text:n.text,match_case:n.matchCase,only_outline:n.onlyOutline},i:O,j:y}):[]}let{showSearchResults:f}=e;async function d(){t(5,c=-1),n.text.length>0&&s&&s.teleport(0,!0)}let c=-1;function h(O){t(5,c=O)}let g=[];async function m(O){s.teleport(O),s.onTeleportDone(function(){h(O)})}function C(){c>0&&m(c-1)}function k(){m(c+1)}function L(O){l.$$.not_equal(r.matchCase,O)&&(r.matchCase=O,t(0,r))}function R(O){l.$$.not_equal(r.onlyOutline,O)&&(r.onlyOutline=O,t(0,r))}const J=O=>h(O.index);function X(O){W[O?"unshift":"push"](()=>{s=O,t(4,s)})}function z(O){g=O,t(6,g)}function B(O){l.$$.not_equal(r.loader,O)&&(r.loader=O,t(0,r))}function U(O){W[O?"unshift":"push"](()=>{o=O,t(3,o)})}return l.$$set=O=>{"state"in O&&t(0,r=O.state),"showSearchResults"in O&&t(1,f=O.showSearchResults)},l.$$.update=()=>{l.$$.dirty&1&&ce(i,n.matchCase=r.matchCase,n),l.$$.dirty&1&&ce(i,n.onlyOutline=r.onlyOutline,n),l.$$.dirty&4&&d()},[r,f,n,o,s,c,g,i,a,h,u,C,k,L,R,J,X,z,B,U]}class Zl extends ae{constructor(e){super(),fe(this,e,Gl,Ul,le,{getLoader:10,state:0,showSearchResults:1,prevResult:11,nextResult:12})}get getLoader(){return this.$$.ctx[10]}get prevResult(){return this.$$.ctx[11]}get nextResult(){return this.$$.ctx[12]}}const{window:Xl}=an;function Wl(l){let e,t,n,o,s,i,u,r,a,f,d,c,h,g,m,C,k,L,R,J,X,z,B,U;function O(Q){l[13](Q)}function y(Q){l[14](Q)}let _={matchCase:l[7].searchResults.matchCase,onlyOutline:l[7].searchResults.onlyOutline,chooseFile:Yl,alignOutlineFocus:l[12]};l[6]!==void 0&&(_.showOutline=l[6]),l[5]!==void 0&&(_.showSearchResults=l[5]),n=new gl({props:_}),W.push(()=>de(n,"showOutline",O)),W.push(()=>de(n,"showSearchResults",y));function j(Q){l[16](Q)}let A={showOutline:l[6],showSearchResults:l[5]};l[7].doc!==void 0&&(A.state=l[7].doc),r=new Qn({props:A}),l[15](r),W.push(()=>de(r,"state",j));function N(Q){l[18](Q)}let E={showOutline:l[6]};l[7].outline!==void 0&&(E.state=l[7].outline),c=new Yn({props:E}),l[17](c),W.push(()=>de(c,"state",N));function K(Q){l[20](Q)}let Z={showSearchResults:l[5]};l[7].searchResults!==void 0&&(Z.state=l[7].searchResults),C=new Zl({props:Z}),l[19](C),W.push(()=>de(C,"state",K));function Se(Q){l[21](Q)}function Me(Q){l[22](Q)}let Ce={};return l[0]!==void 0&&(Ce.usingHue=l[0]),l[1]!==void 0&&(Ce.hue=l[1]),R=new zl({props:Ce}),W.push(()=>de(R,"usingHue",Se)),W.push(()=>de(R,"hue",Me)),{c(){e=T("main"),t=T("div"),P(n.$$.fragment),i=Y(),u=T("div"),P(r.$$.fragment),f=Y(),d=T("aside"),P(c.$$.fragment),g=Y(),m=T("aside"),P(C.$$.fragment),L=Y(),P(R.$$.fragment),w(t,"class","topbar svelte-1cerce7"),w(u,"class","doc svelte-1cerce7"),w(d,"class","outline svelte-1cerce7"),w(m,"class","search-results svelte-1cerce7"),w(e,"class","svelte-1cerce7")},m(Q,ee){H(Q,e,ee),q(e,t),V(n,t,null),q(e,i),q(e,u),V(r,u,null),q(e,f),q(e,d),V(c,d,null),q(e,g),q(e,m),V(C,m,null),q(e,L),V(R,e,null),z=!0,B||(U=x(Xl,"resize",l[11]),B=!0)},p(Q,ee){const I={};ee[0]&128&&(I.matchCase=Q[7].searchResults.matchCase),ee[0]&128&&(I.onlyOutline=Q[7].searchResults.onlyOutline),!o&&ee[0]&64&&(o=!0,I.showOutline=Q[6],he(()=>o=!1)),!s&&ee[0]&32&&(s=!0,I.showSearchResults=Q[5],he(()=>s=!1)),n.$set(I);const me={};ee[0]&64&&(me.showOutline=Q[6]),ee[0]&32&&(me.showSearchResults=Q[5]),!a&&ee[0]&128&&(a=!0,me.state=Q[7].doc,he(()=>a=!1)),r.$set(me);const Be={};ee[0]&64&&(Be.showOutline=Q[6]),!h&&ee[0]&128&&(h=!0,Be.state=Q[7].outline,he(()=>h=!1)),c.$set(Be);const Ie={};ee[0]&32&&(Ie.showSearchResults=Q[5]),!k&&ee[0]&128&&(k=!0,Ie.state=Q[7].searchResults,he(()=>k=!1)),C.$set(Ie);const _e={};!J&&ee[0]&1&&(J=!0,_e.usingHue=Q[0],he(()=>J=!1)),!X&&ee[0]&2&&(X=!0,_e.hue=Q[1],he(()=>X=!1)),R.$set(_e)},i(Q){z||(p(n.$$.fragment,Q),p(r.$$.fragment,Q),p(c.$$.fragment,Q),p(C.$$.fragment,Q),p(R.$$.fragment,Q),z=!0)},o(Q){b(n.$$.fragment,Q),b(r.$$.fragment,Q),b(c.$$.fragment,Q),b(C.$$.fragment,Q),b(R.$$.fragment,Q),z=!1},d(Q){Q&&S(e),D(n),l[15](null),D(r),l[17](null),D(c),l[19](null),D(C),D(R),B=!1,U()}}}async function Yl(){document.getElementById("filePicker").click()}function Jl(){}function $l(l,e,t){let n,o,s;Ae(async()=>{let I=await Oe();I!=null&&(I.file_path!=null&&d(I.file_path),I.label,console.log("window ready",I))});let i=window.matchMedia("(prefers-color-scheme: dark)"),u=function(){document.body.classList.toggle("dark",i.matches)};u(),i.addEventListener("change",u);let r=!1,a=120,f=ze({open:!1,path:"",name:""});re(l,f,I=>t(27,s=I)),Te("fileInfo",f);async function d(I){I.split(".").pop()!="docx"||(await c(),!await Oe())||ce(f,s={open:!0,path:I,name:I.split("/").pop()},s)}async function c(){await Promise.all([Oe(),Oe()]),ce(f,s={open:!1,path:"",name:""},s),await He()}let h=ze({text:"",matchCase:!1,onlyOutline:!1});Te("query",h);let g=ze({paraIndex:null,charIndex:null});Te("selectedQuery",g),Te("getDocLoader",Jl);let m,C,k,L=!0,R=!0,J,X=ze(!1);re(l,X,I=>t(26,o=I)),Te("isResizing",X);let z=ze(!1);re(l,z,I=>t(25,n=I)),Te("isFullscreen",z);function B(){clearTimeout(J),ce(X,o=!0,o),J=setTimeout(function(){ce(X,o=!1,o),Oe().then(I=>{ce(z,n=I,n)})},600)}function U(){k==null||k.prevResult()}Te("prevResult",U);function O(){k==null||k.nextResult()}Te("nextResult",O),Ne("CommandOrControl+N",()=>{Oe()});async function y(){let I=m.getLoader().getFocus(),me=await Oe("get_nearest_outline_para",{paraIndex:I.index});console.log("outline aligning to: ",me),me&&C.getLoader().teleport(me.index)}let _=ze(1);Te("zoom",_);let j={doc:{loader:null},outline:{loader:null},searchResults:{loader:null,matchCase:!1,onlyOutline:!1}};function A(I){R=I,t(6,R)}function N(I){L=I,t(5,L)}function E(I){W[I?"unshift":"push"](()=>{m=I,t(2,m)})}function K(I){l.$$.not_equal(j.doc,I)&&(j.doc=I,t(7,j))}function Z(I){W[I?"unshift":"push"](()=>{C=I,t(3,C)})}function Se(I){l.$$.not_equal(j.outline,I)&&(j.outline=I,t(7,j))}function Me(I){W[I?"unshift":"push"](()=>{k=I,t(4,k)})}function Ce(I){l.$$.not_equal(j.searchResults,I)&&(j.searchResults=I,t(7,j))}function Q(I){r=I,t(0,r)}function ee(I){a=I,t(1,a)}return l.$$.update=()=>{l.$$.dirty[0]&1&&(r?document.body.classList.add("hue"):document.body.classList.remove("hue")),l.$$.dirty[0]&3&&(r?document.body.style.setProperty("--hue",a+"deg"):document.body.style.removeProperty("--hue"))},[r,a,m,C,k,L,R,j,f,X,z,B,y,A,N,E,K,Z,Se,Me,Ce,Q,ee]}class xl extends ae{constructor(e){super(),fe(this,e,$l,Wl,le,{},null,[-1,-1])}}function eo(){new xl({target:document.body})}document.addEventListener("DOMContentLoaded",eo);
